!function(e){function t(t){for(var n,s,l=t[0],c=t[1],i=t[2],p=0,m=[];p<l.length;p++)s=l[p],o[s]&&m.push(o[s][0]),o[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(u&&u(t);m.length;)m.shift()();return r.push.apply(r,i||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,l=1;l<a.length;l++){var c=a[l];0!==o[c]&&(n=!1)}n&&(r.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},o={0:0},r=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var l=window.webpackJsonp=window.webpackJsonp||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var i=0;i<l.length;i++)t(l[i]);var u=c;r.push([834,1]),a()}({651:function(e,t,a){var n={"./dots.gif":652,"./rounded.gif":653};function o(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=r,e.exports=o,o.id=651},652:function(e,t,a){e.exports=a.p+"5f186c20df7248f78855ca02d0a2368c.gif"},653:function(e,t,a){e.exports=a.p+"f304074f941900e8061bac063da84134.gif"},659:function(e,t,a){var n={"./af":230,"./af.js":230,"./ar":231,"./ar-dz":232,"./ar-dz.js":232,"./ar-kw":233,"./ar-kw.js":233,"./ar-ly":234,"./ar-ly.js":234,"./ar-ma":235,"./ar-ma.js":235,"./ar-sa":236,"./ar-sa.js":236,"./ar-tn":237,"./ar-tn.js":237,"./ar.js":231,"./az":238,"./az.js":238,"./be":239,"./be.js":239,"./bg":240,"./bg.js":240,"./bm":241,"./bm.js":241,"./bn":242,"./bn.js":242,"./bo":243,"./bo.js":243,"./br":244,"./br.js":244,"./bs":245,"./bs.js":245,"./ca":246,"./ca.js":246,"./cs":247,"./cs.js":247,"./cv":248,"./cv.js":248,"./cy":249,"./cy.js":249,"./da":250,"./da.js":250,"./de":251,"./de-at":252,"./de-at.js":252,"./de-ch":253,"./de-ch.js":253,"./de.js":251,"./dv":254,"./dv.js":254,"./el":255,"./el.js":255,"./en-SG":256,"./en-SG.js":256,"./en-au":257,"./en-au.js":257,"./en-ca":258,"./en-ca.js":258,"./en-gb":259,"./en-gb.js":259,"./en-ie":260,"./en-ie.js":260,"./en-il":261,"./en-il.js":261,"./en-nz":262,"./en-nz.js":262,"./eo":263,"./eo.js":263,"./es":264,"./es-do":265,"./es-do.js":265,"./es-us":266,"./es-us.js":266,"./es.js":264,"./et":267,"./et.js":267,"./eu":268,"./eu.js":268,"./fa":269,"./fa.js":269,"./fi":270,"./fi.js":270,"./fo":271,"./fo.js":271,"./fr":272,"./fr-ca":273,"./fr-ca.js":273,"./fr-ch":274,"./fr-ch.js":274,"./fr.js":272,"./fy":275,"./fy.js":275,"./ga":276,"./ga.js":276,"./gd":277,"./gd.js":277,"./gl":278,"./gl.js":278,"./gom-latn":279,"./gom-latn.js":279,"./gu":280,"./gu.js":280,"./he":281,"./he.js":281,"./hi":282,"./hi.js":282,"./hr":283,"./hr.js":283,"./hu":284,"./hu.js":284,"./hy-am":285,"./hy-am.js":285,"./id":286,"./id.js":286,"./is":287,"./is.js":287,"./it":288,"./it-ch":289,"./it-ch.js":289,"./it.js":288,"./ja":290,"./ja.js":290,"./jv":291,"./jv.js":291,"./ka":292,"./ka.js":292,"./kk":293,"./kk.js":293,"./km":294,"./km.js":294,"./kn":295,"./kn.js":295,"./ko":296,"./ko.js":296,"./ku":297,"./ku.js":297,"./ky":298,"./ky.js":298,"./lb":299,"./lb.js":299,"./lo":300,"./lo.js":300,"./lt":301,"./lt.js":301,"./lv":302,"./lv.js":302,"./me":303,"./me.js":303,"./mi":304,"./mi.js":304,"./mk":305,"./mk.js":305,"./ml":306,"./ml.js":306,"./mn":307,"./mn.js":307,"./mr":308,"./mr.js":308,"./ms":309,"./ms-my":310,"./ms-my.js":310,"./ms.js":309,"./mt":311,"./mt.js":311,"./my":312,"./my.js":312,"./nb":313,"./nb.js":313,"./ne":314,"./ne.js":314,"./nl":315,"./nl-be":316,"./nl-be.js":316,"./nl.js":315,"./nn":317,"./nn.js":317,"./pa-in":318,"./pa-in.js":318,"./pl":319,"./pl.js":319,"./pt":320,"./pt-br":321,"./pt-br.js":321,"./pt.js":320,"./ro":322,"./ro.js":322,"./ru":323,"./ru.js":323,"./sd":324,"./sd.js":324,"./se":325,"./se.js":325,"./si":326,"./si.js":326,"./sk":327,"./sk.js":327,"./sl":328,"./sl.js":328,"./sq":329,"./sq.js":329,"./sr":330,"./sr-cyrl":331,"./sr-cyrl.js":331,"./sr.js":330,"./ss":332,"./ss.js":332,"./sv":333,"./sv.js":333,"./sw":334,"./sw.js":334,"./ta":335,"./ta.js":335,"./te":336,"./te.js":336,"./tet":337,"./tet.js":337,"./tg":338,"./tg.js":338,"./th":339,"./th.js":339,"./tl-ph":340,"./tl-ph.js":340,"./tlh":341,"./tlh.js":341,"./tr":342,"./tr.js":342,"./tzl":343,"./tzl.js":343,"./tzm":344,"./tzm-latn":345,"./tzm-latn.js":345,"./tzm.js":344,"./ug-cn":346,"./ug-cn.js":346,"./uk":347,"./uk.js":347,"./ur":348,"./ur.js":348,"./uz":349,"./uz-latn":350,"./uz-latn.js":350,"./uz.js":349,"./vi":351,"./vi.js":351,"./x-pseudo":352,"./x-pseudo.js":352,"./yo":353,"./yo.js":353,"./zh-cn":354,"./zh-cn.js":354,"./zh-hk":355,"./zh-hk.js":355,"./zh-tw":356,"./zh-tw.js":356};function o(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=r,e.exports=o,o.id=659},799:function(e,t,a){},825:function(e,t){},833:function(e,t,a){},834:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(30),s=a.n(r),l=(a(444),a(6)),c=a.n(l),i="/",u=a(65),p=a(34),m=a(4),d=a.n(m);function f(e){for(var t=1;t<arguments.length;t++)if(t%2){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){b(e,t,a[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var y=function(e){return function(t){return c.a.defaults.headers.common.Authorization=localStorage.getItem("token"),c.a.post("".concat(i,"api/dashboard/"),{data:e}).then(function(e){t(function(e){return{type:"CREATE_BOT",data:e}}(e.data.bot))})}},h=function(){return function(e){return c.a.defaults.headers.common.Authorization=localStorage.getItem("token"),c.a.get("".concat(i,"api/dashboard/")).then(function(t){e({type:"GET_BOTS",bots:t.data.bots})})}},_=function(e){return function(t){return c.a.defaults.headers.common.Authorization=localStorage.getItem("token"),c.a.delete("".concat(i,"api/dashboard/").concat(e)).then(function(a){t(function(e){return{type:"DELETE_BOT",id:e}}(e))})}},g=function(e,t){return function(a){return c.a.defaults.headers.common.Authorization=localStorage.getItem("token"),c.a.post("".concat(i,"api/dashboard/").concat(e),{data:{name:t}}).then(function(n){a(function(e,t){return{type:"RENAME_BOT",data:{id:e,newName:t}}}(e,t))})}},E=function(e){return{type:"CONNECT_PAGE",page:e}},v=function(e,t){return function(a){return c.a.defaults.headers.common.Authorization=localStorage.getItem("token"),c.a.post("".concat(i,"api/dashboard/connect-page/").concat(e),{data:f({},t)}).then(function(e){a(E(e.data.page))})}},k=function(e){return function(t){return c.a.defaults.headers.common.Authorization=localStorage.getItem("token"),c.a.get("".concat(i,"api/dashboard/connected-page/").concat(e)).then(function(e){t(E(e.data.page))})}},w=function(e){return function(t){return c.a.defaults.headers.common.Authorization=localStorage.getItem("token"),c.a.delete("".concat(i,"api/dashboard/disconnect-page/").concat(e)).then(function(e){t({type:"DISCONNECT_PAGE"})})}},O=function(e){return f({type:"SAVE_MENU"},e)},S=function(e,t){return function(a){return c.a.defaults.headers.common.Authorization=localStorage.getItem("token"),c.a.post("".concat(i,"api/bot/setup-menu/").concat(e),{data:t}).then(function(e){a(O(f({},t)))})}},j=function(e){return function(t){return c.a.defaults.headers.common.Authorization=localStorage.getItem("token"),c.a.get("".concat(i,"api/bot/get-menu/").concat(e)).then(function(e){e.data.menu&&t(O(f({},e.data.menu)))})}},N=function(e,t){return function(a){c.a.post("".concat(i,"api/bot/ai/create/").concat(t),{data:f({},e)}).then(function(e){a(function(e){return{type:"ADD_AI",ai:e}}(e.data.ai))})}},T=function(e,t,a){return function(n){c.a.post("".concat(i,"api/bot/ai/edit/").concat(a,"/").concat(e),{data:f({},t)}).then(function(t){n(function(e,t){return{type:"EDIT_AI",ai:t,id:e}}(e,t.data.ai))})}},C=function(e,t){return function(a){c.a.delete("".concat(i,"api/bot/ai/remove/").concat(t,"/").concat(e)).then(function(t){a(function(e){return{type:"DELETE_AI",id:e}}(e))})}},P=a(10);function I(e){var t=e.name,a=e.id,n=e.deleteBot;return o.a.createElement("div",{class:"modal",tabindex:"-1",role:"dialog",id:"deleteModal_"+a},o.a.createElement("div",{class:"modal-dialog",role:"document"},o.a.createElement("div",{class:"modal-content"},o.a.createElement("div",{class:"modal-header"},o.a.createElement("h5",{class:"modal-title"},"Delete Bot"),o.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"},"×"))),o.a.createElement("div",{class:"modal-body"},o.a.createElement("p",null," you will delete ",t," permanentaly , Are your sure ? ")),o.a.createElement("div",{class:"modal-footer"},o.a.createElement("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"},"Close"),o.a.createElement("button",{type:"button",class:"btn btn-danger","data-dismiss":"modal",onClick:n},"Delete")))))}function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var M=function(e){function t(e){var a,n,o,r,s,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=D(t).call(this,e),a=!o||"object"!==x(o)&&"function"!=typeof o?B(n):o,r=B(a),l=function(e){var t=e.target.value;a.setState({name:t})},(s="onChange")in r?Object.defineProperty(r,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[s]=l,a.state={name:a.props.name},a}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,n["Component"]),a=t,(r=[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("div",{class:"modal",tabindex:"-1",role:"dialog",id:"renameModal_"+this.props.id},o.a.createElement("div",{class:"modal-dialog",role:"document"},o.a.createElement("div",{class:"modal-content"},o.a.createElement("div",{class:"modal-header"},o.a.createElement("h5",{class:"modal-title"},"Delete Bot"),o.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"},"×"))),o.a.createElement("div",{class:"modal-body"},o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{className:"form-control",id:"newName",placeholder:"name..",value:this.state.name,onChange:this.onChange}))),o.a.createElement("div",{class:"modal-footer"},o.a.createElement("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"},"Close"),o.a.createElement("button",{type:"button",class:"btn btn-success","data-dismiss":"modal",onClick:function(){e.props.renameBot(e.props.id,e.state.name)}},"rename"))))))}}])&&L(a.prototype,r),s&&L(a,s),t}();function U(e){var t=e.name,a=(e.img,e.id),n=e.deleteBot,r=e.renameBot;return o.a.createElement("div",{key:a,className:"bots__content__card text-center"},o.a.createElement("i",{class:"fas fa-ellipsis-v bots__content__card__dots ",href:"#",role:"button",id:"collapse_"+a,"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}),o.a.createElement("div",{class:"dropdown-menu","aria-labelledby":"dropdownMenuLink"},o.a.createElement("button",{class:"dropdown-item","data-toggle":"modal","data-target":"#deleteModal_"+a},"delete"),o.a.createElement("button",{class:"dropdown-item","data-toggle":"modal","data-target":"#renameModal_"+a},"rename")),o.a.createElement(P.a,{to:"/dashboard/bot/settings/"+a},o.a.createElement("img",{className:"bots__content__card__img ",src:"https://medias3.prestastore.com/835054-pbig/chat-bot-for-social-networking.jpg"}),o.a.createElement("p",{className:"bots__content__card__name"},t)),o.a.createElement(I,{name:t,id:a,deleteBot:function(){n(a)}}),o.a.createElement(M,{name:t,id:a,renameBot:r}))}var F=a(8);function H(e){var t=e.createBot;return o.a.createElement("div",{class:"modal",tabindex:"-1",role:"dialog",id:"createModal"},o.a.createElement("div",{class:"modal-dialog",role:"document"},o.a.createElement("div",{class:"modal-content"},o.a.createElement("div",{class:"modal-header"},o.a.createElement("h5",{class:"modal-title"},"Create Bot"),o.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"},"×"))),o.a.createElement("div",{class:"modal-body"},o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{className:"form-control",id:"botname",placeholder:"name.."}))),o.a.createElement("div",{class:"modal-footer"},o.a.createElement("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"},"Close"),o.a.createElement("button",{type:"button",class:"btn btn-primary","data-dismiss":"modal",onClick:t},"Create")))))}var R=function(e){var t=e.LoaderName,n=void 0===t?"rounded":t,r=e.width,s=e.top,l=void 0!==s&&s,c=e.style,i=a(651)("./".concat(n,".gif"));return o.a.createElement("div",{className:"d-flex  justify-content-center w-100 h-100",style:{alignItems:l?"flex-start":"center"}},o.a.createElement("img",{style:c,src:i,alt:"Loading...",width:r&&r,height:r&&r}))};function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Y=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=q(t).call(this,e),a=!o||"object"!==z(o)&&"function"!=typeof o?V(n):o,W(V(a),"componentDidMount",function(){a.props.dispatch(h())}),W(V(a),"renameBot",function(e,t){console.log(t),a.props.dispatch(g(e,t))}),W(V(a),"deleteBot",function(e){a.props.dispatch(_(e))}),W(V(a),"createBot",function(){var e=d()("#botname").val();a.props.dispatch(y({name:e}))}),a.state={bots:[],loading:!0},a}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(t,n["Component"]),a=t,(r=[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"bots"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"bots__content"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-3"},o.a.createElement("div",{className:"bots__content__card text-center","data-toggle":"modal","data-target":"#createModal"},o.a.createElement("h3",{className:"bots__content__card__add"},"+"))),this.state.loading?o.a.createElement(R,{width:30}):this.state.bots.map(function(t){return o.a.createElement("div",{className:"col-3"},o.a.createElement(U,{id:t._id,name:t.name,deleteBot:e.deleteBot,renameBot:e.renameBot}))}))),o.a.createElement(H,{createBot:this.createBot})))}}])&&G(a.prototype,r),s&&G(a,s),t}();W(Y,"getDerivedStateFromProps",function(e,t){return console.log(e),e.bot!=t.bot?{bots:e.bot.bots,loading:e.bot.botLoader}:function(e){for(var t=1;t<arguments.length;t++)if(t%2){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){W(e,t,a[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}({},t)});var J=Object(F.b)(function(e){return{bot:e.bot}})(Y),Q=a(9);function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ne=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=$(t).call(this),a=!o||"object"!==Z(o)&&"function"!=typeof o?ee(n):o,ae(ee(a),"componentDidMount",function(){var e,t,a,n,o;window.fbAsyncInit=function(){FB.init({appId:"2245399952381834",cookie:!0,xfbml:!0,version:"v3.1"}),FB.AppEvents.logPageView()},e=document,t="script",a="facebook-jssdk",o=e.getElementsByTagName(t)[0],e.getElementById(a)||((n=e.createElement(t)).id=a,n.src="https://connect.facebook.net/en_US/sdk.js",o.parentNode.insertBefore(n,o))}),ae(ee(a),"login",function(){FB.login(function(e){"connected"==e.status&&c.a.post(i+"api/user/login",{user:e.authResponse}).then(function(e){localStorage.setItem("token",e.data.token),a.props.dispatch(hs())})},{scope:"public_profile,manage_pages,pages_messaging"}),FB.getLoginStatus(function(e){})}),ae(ee(a),"goToDashboard",function(){a.props.history.push("/dashboard")}),ae(ee(a),"goToHome",function(){a.props.history.push("/")}),ae(ee(a),"back",function(){a.props.history.goBack()}),ae(ee(a),"logout",function(){a.props.dispatch(Es())}),a.state={bot:{},templateIsEditing:e.templateIsEditing},a}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(t,n["Component"]),a=t,s=[{key:"getDerivedStateFromProps",value:function(e,t){return e.bot!=t.bot?{bot:e.bot}:t}}],(r=[{key:"componentDidUpdate",value:function(e,t){e.match.params.page!==this.props.match.params.page&&this.setState({templateIsEditing:null}),this.props.templateIsEditing!==e.templateIsEditing&&this.setState({templateIsEditing:this.props.templateIsEditing})}},{key:"render",value:function(){var e=!!this.props.user.user_id,t=this.props.user,a=t.user_name,n=t.image_url,r=this.state.templateIsEditing;return o.a.createElement(o.a.Fragment,null,e?o.a.createElement("section",{className:"c-navbar"},o.a.createElement("ul",{className:"c-navbar__list"},e?o.a.createElement("span",null,Object.keys(this.props.match.params).length>0?o.a.createElement(o.a.Fragment,null,o.a.createElement("li",{className:"goBack"},o.a.createElement("p",{onClick:this.back},o.a.createElement("i",{className:"fa fa-chevron-left"})," back"))):null,o.a.createElement("li",{className:"c-navbar__list__item  c-navbar__list__item--no-border c-navbar__list__item--right c-navbar__list__item--left-line "},o.a.createElement("img",{className:"c-navbar__list__item__avatar",src:n}),o.a.createElement("p",{className:"c-navbar__list__item__name"},a,o.a.createElement("small",{onClick:this.logout}," logout "))),o.a.createElement("li",{onClick:this.goToDashboard,className:"c-navbar__list__item c-navbar__list__item--right c-navbar__list__item--no-border",style:{marginTop:"7px"}},"Dashboard")):""),this.props.match.params.page&&e&&o.a.createElement("div",{className:"d-flex align-items-center navbar-bot"},o.a.createElement("div",{className:"c-navbar__list__bot"},o.a.createElement("img",{src:"https://medias3.prestastore.com/835054-pbig/chat-bot-for-social-networking.jpg",className:"c-navbar__list__bot__img"}),this.state.bot.name),o.a.createElement("small",{className:"mr-4"},"Status"),o.a.createElement("div",null,null===r&&"",!0===r&&o.a.createElement(R,{width:30}),!1===r&&o.a.createElement(Q.a,{icon:"check",color:"green"})))):"")}}])&&X(a.prototype,r),s&&X(a,s),t}(),oe=Object(u.f)(Object(F.b)(function(e,t){var a;switch(t.match.params.page){case"blocks":a=e.block.template.templateIsEditing;break;case"schedules":a=e.schedule.template.templateIsEditing;break;case"welcome-message":a=e.welcome.template.templateIsEditing}return{user:e.user,bot:e.bot.bot,templateIsEditing:a}})(ne)),re=a(20),se=a.n(re);function le(){return(le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ce(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var ie=function(e){var t=e.type,a=void 0===t?"text":t,n=e.name,r=e.value,s=e.onChange,l=e.placeholder,c=e.required,i=(e.feedback,e.isvalid),u=e.className,p=void 0===u?"":u,m=e.id,d=ce(e,["type","name","value","onChange","placeholder","required","feedback","isvalid","className","id"]);return o.a.createElement(o.a.Fragment,null,o.a.createElement("input",le({id:m,type:a,name:n,value:r,onChange:s,placeholder:l,className:"validated-input form-control  ".concat(p," ").concat("false"===i&&" is-invalid"),required:c},d,{autoComplete:"off"})))};function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function de(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fe(e,t){return(fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var be=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=me(t).call(this,e),a=!o||"object"!==ue(o)&&"function"!=typeof o?de(n):o,function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(de(a),"datalistChangeHandler",function(e){var t=e.target.value,n=d()("#".concat(a.state.blocksDatalistId)).find("[value='".concat(t,"']")).data("id");n||a.setState({errors:{blockid:!0}}),a.setState({blockid:n},function(){}),""===t.trim()&&a.setState({blockid:null})}),a.state={blockid:a.props.blockid,blocksDatalistId:se()()},a}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fe(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.blocksDatalistId;return o.a.createElement("div",{className:"menu-control"},o.a.createElement("nav",null,o.a.createElement("div",{className:"nav nav-tabs",id:"nav-tab",role:"tablist"},o.a.createElement("a",{style:{borderTopLeftRadius:"17px"},className:"nav-item nav-link active",id:"nav-url-tab","data-toggle":"tab",href:"#nav-url",role:"tab","aria-controls":"nav-url","aria-selected":"true"},"url"),o.a.createElement("a",{className:"nav-item nav-link",id:"nav-block-tab","data-toggle":"tab",href:"#nav-block",role:"tab","aria-controls":"nav-profile","aria-selected":"false"},"block"))),o.a.createElement("div",{className:"tab-content menu-control__tabs",id:"nav-tabContent"},o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{id:"button-name",placeholder:"button name..",className:"form-control"})),o.a.createElement("div",{className:"tab-pane fade show active",id:"nav-url",role:"tabpanel","aria-labelledby":"nav-url-tab"},o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{id:"button-url",placeholder:"Enter url..",className:"form-control"})),o.a.createElement("div",{className:"menu-control__action"},o.a.createElement("button",{className:"btn btn-primary w-100",onClick:this.props.addUrlButton},"add"))),o.a.createElement("div",{className:"tab-pane fade",id:"nav-block",role:"tabpanel","aria-labelledby":"nav-block-tab"},o.a.createElement("div",{className:"form-group"},o.a.createElement(ie,{type:"text",id:"menu_".concat(t),name:"blockid",onChange:this.datalistChangeHandler,placeholder:"Block *required",isvalid:"true",required:!0,feedback:null,className:"w-100 border",list:t}),o.a.createElement("datalist",{id:t},this.props.blocks.map(function(e,t){return o.a.createElement("option",{key:t,"data-id":e._id,value:e.name})}))),o.a.createElement("div",{className:"menu-control__action"},o.a.createElement("button",{className:"btn btn-primary w-100",onClick:function(){e.props.addBlockButton(e.state.blockid)}},"add")))),this.props.persistentMenuError?o.a.createElement("p",{className:"error-text text-center"},this.props.persistentMenuError):"")}}])&&pe(a.prototype,r),s&&pe(a,s),t}();function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _e(e,t){return!t||"object"!==ye(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ve=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),_e(this,ge(t).call(this,e))}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(t,n["Component"]),a=t,(r=[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:" mr-2 card"},o.a.createElement("div",{className:"font-weight-bold card-header",style:{paddingTop:"8px",paddingBottom:"8px"}},"Menu"),o.a.createElement("ul",{className:"settings__card__menu__list card-body"},this.props.persistent_menu[0].call_to_actions.filter(function(e){return"create free chatbot"!=e.title}).map(function(t,a){return o.a.createElement("li",{className:"settings__card__menu__list__item"},o.a.createElement("i",{className:"fas fa-ellipsis-v bots__content__card__dots m-1 ",href:"#",role:"button",id:"collapse_","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}),o.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuLink"},o.a.createElement("button",{className:"dropdown-item",onClick:function(){return e.props.menuButtonDelete(a)}},"delete")),o.a.createElement("div",{className:"settings__card__menu__list__item__data"},o.a.createElement("div",{className:"settings__card__menu__list__item__data__name"},o.a.createElement("p",null,t.title))))}),!this.props.paid&&o.a.createElement("li",{className:"settings__card__menu__list__item",style:{color:"grey"}},o.a.createElement("div",{className:"settings__card__menu__list__item__data"},o.a.createElement("div",{className:"settings__card__menu__list__item__data__name"},o.a.createElement("p",null,"create free chatbot"))))))}}])&&he(a.prototype,r),s&&he(a,s),t}(),ke=function(e){return function(t){t({type:"FETCH_BLOCKS"}),c.a.get("".concat(i,"api/bot/block/get-all/").concat(e)).then(function(e){var a=e.data;t({type:"FETCH_BLOCKS_SUCCESS",blocks:a.blocks})}).catch(function(e){return t({type:"FETCH_BLOCK_FAILURE"})})}},we=function(e,t,a){return function(n){return n({type:"CREATE_BLOCK"}),new Promise(function(o,r){c.a.post("".concat(i,"api/bot/block/create/").concat(e),{data:{name:t}}).then(function(t){var r=t.data;n({type:"CREATE_BLOCK_SUCCESS",block:r.block}),o(),!a&&bs.push("/dashboard/bot/blocks/".concat(e,"/").concat(r.block._id))}).catch(function(e){console.log("failed to create new schedule",e)})})}};function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function je(e,t){return!t||"object"!==Oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ce=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),je(this,Ne(t).apply(this,arguments))}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(t,n["Component"]),a=t,(r=[{key:"render",value:function(){var e=this.props,t=e.pagesLoading,a=e.pageConnected,n=e.pages;return o.a.createElement("div",{className:"card "},o.a.createElement("h6",{className:"card-header bg-info text-light"},"Conenct your page"),o.a.createElement("div",{className:"card-body",style:{position:"relative"}},t&&o.a.createElement("div",{className:"overlayer",style:{right:0,bottom:0,top:0,left:0}},o.a.createElement(R,{width:30,style:{transform:"scale(0.7)"}})),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-6"},o.a.createElement("select",{id:"select-page",className:"settings__card__connect-page__select form-control"},n.map(function(e){return o.a.createElement("option",{key:e.id,value:e.id+"+"+e.access_token},e.name)}))),o.a.createElement("div",{className:"col-6"},a?o.a.createElement("div",{className:"settings__card__connect-page__page-card"},o.a.createElement("div",{className:"settings__card__connect-page__page-card__data"},o.a.createElement("img",{src:this.props.page.img_url,className:"settings__card__connect-page__page-card__data__image"}),o.a.createElement("p",{className:"settings__card__connect-page__page-card__data__text"},this.props.page?this.props.page.name:""))):o.a.createElement("div",null)),o.a.createElement("div",{className:"col-6 mt-3"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-6"},a?"":o.a.createElement("button",{onClick:this.props.connect,ref:"connect-button",className:"btn  btn-outline-info"},"Conenct")),o.a.createElement("div",{className:"col-6"}))),this.props.connectPageLoading?o.a.createElement("div",{className:"col-3 mt-3"},"connecting..."):"",o.a.createElement("div",{className:"col-3 mt-3"},a?o.a.createElement("button",{className:"btn  btn-danger",onClick:this.props.disconnect},"Disconnect"):o.a.createElement("div",null)))))}}])&&Se(a.prototype,r),s&&Se(a,s),t}(),Pe=a(1),Ie=a.n(Pe);function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ae(e,t){return(Ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Me=function(e){function t(){var e,a,n,o,r,s,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,i=new Array(c),u=0;u<c;u++)i[u]=arguments[u];return n=this,a=!(o=(e=De(t)).call.apply(e,[this].concat(i)))||"object"!==xe(o)&&"function"!=typeof o?Be(n):o,r=Be(a),l={bot:{},loader:!0},(s="state")in r?Object.defineProperty(r,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[s]=l,a}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ae(e,t)}(t,n["Component"]),a=t,s=[{key:"getDerivedStateFromProps",value:function(e,t){return e.bot!=t.bot&&Object.keys(e.bot).length>0?{bot:e.bot,loader:!1}:t}}],(r=[{key:"render",value:function(){return o.a.createElement("div",{className:"settings__bot-state text-center"},this.state.loader?o.a.createElement("div",{className:"overlayer",style:{width:"100%",height:"100%"}},o.a.createElement(R,{width:40})):"",o.a.createElement("div",{className:"settings__bot-state__icon ".concat(this.state.bot.paid?"":"settings__bot-state__icon--grey")},o.a.createElement("i",{class:"far fa-check-circle fa-7x"})),o.a.createElement("div",{className:"settings__bot-state__info"},this.state.bot.paid?"paid":"free"),this.state.bot.paid&&o.a.createElement("div",{className:"settings__bot-state__days settings__bot-state__info--grey"},this.state.bot?Ie()(this.state.bot.paid_to).diff(Ie()(),"days"):"Error !"," ",Ie()(this.state.bot.paid_to).diff(Ie()(),"days")>1?"days":"day"," ","left"))}}])&&Le(a.prototype,r),s&&Le(a,s),t}(),Ue=Object(F.b)(function(e){return{bot:e.bot.bot}})(Me);function Fe(e){for(var t=1;t<arguments.length;t++)if(t%2){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){Ve(e,t,a[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ze(e){return(ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qe(e,t){return(qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ve(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Ke=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=ze(t).call(this,e),a=!o||"object"!==He(o)&&"function"!=typeof o?Ge(n):o,Ve(Ge(a),"addUrlButton",function(){var e=d()("#button-name").val(),t=d()("#button-url").val(),n=a.state.persistent_menu;n[0].call_to_actions.length>=3?a.setState({persistentMenuError:"maximum 3 buttons !"}):(n[0].call_to_actions.push({type:"web_url",title:e,url:t,webview_height_ratio:"full"}),a.setState({persistent_menu:n},function(){a.saveMenu()}))}),Ve(Ge(a),"addBlockButton",function(e){var t=d()("#button-name").val(),n=a.state.persistent_menu;n[0].call_to_actions.length>=3?a.setState({persistentMenuError:"maximum 3 buttons !"}):(n[0].call_to_actions.push({type:"postback",title:t,payload:e}),a.setState({persistent_menu:n},function(){a.saveMenu()}))}),Ve(Ge(a),"menuButtonDelete",function(e){var t=a.state.persistent_menu;3==t[0].call_to_actions.length&&a.setState({persistentMenuError:!1}),t[0].call_to_actions=t[0].call_to_actions.filter(function(t,a){return e!=a}),a.setState({persistent_menu:t})}),Ve(Ge(a),"saveMenu",function(){var e=a.state.persistent_menu;a.props.bot.bot.paid||0==e[0].call_to_actions.filter(function(e){return"create free chatbot"==e.title}).length&&e[0].call_to_actions.push({type:"web_url",title:"create free chatbot",url:"http://pandabotbeta2.herokuapp.com",webview_height_ratio:"full"}),0==e[0].call_to_actions.length?a.setState({persistentMenuError:"can't be empty "}):(a.setState({menuSave:!0}),a.props.dispatch(S(a.props.match.params.botid,{persistent_menu:a.state.persistent_menu})).then(function(){a.setState({menuSave:!1,persistentMenuError:!1})}))}),Ve(Ge(a),"connect",function(){var e=d()("#select-page option:selected").val().split("+"),t=d()("#select-page option:selected").text(),n=e[0],o=e[1];a.setState({connectPageLoading:!0}),a.props.dispatch(v(a.props.match.params.botid,{pageName:t,pageId:n,accessToken:o})).then(function(){a.setState({connectPageLoading:!1,pageConnected:!0})})}),Ve(Ge(a),"disconnect",function(){a.props.dispatch(w(a.props.match.params.botid))}),Ve(Ge(a),"componentDidMount",function(){a.props.dispatch(ke(a.props.match.params.botid)),a.props.dispatch(k(a.props.match.params.botid)),a.props.dispatch(j(a.props.match.params.botid)),a.props.dispatch(_s())}),Ve(Ge(a),"copyToClipboard",function(e){var t=d()("<input>");d()("body").append(t),t.val(d()(e).text()).select(),document.execCommand("copy"),t.remove()}),Ve(Ge(a),"copyLink",function(e){a.copyToClipboard(e.target),a.setState({showCopy:!0}),setTimeout(function(){a.setState({showCopy:!1})},2e3)}),a.state={pagesLoading:!1,pages:[],page:null,connectPageLoading:!1,pageConnected:!0,persistentMenuError:!1,menuSave:!1,showCopy:!1,settingLoader:!0,persistent_menu:[{locale:"default",composer_input_disabled:!1,call_to_actions:[]}],welcomeMessageCard:[{type:"text",value:"welcome mr wahid to batchbot",buttons:[{name:"Lecs"},{name:"secs"}]}]},a}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qe(e,t)}(t,n["Component"]),a=t,(r=[{key:"render",value:function(){this.state.welcomeMessageCard;var e=this.state.pagesLoading,t=this.state.pageConnected,a=this.state.pages?this.state.pages:[];return o.a.createElement("section",{className:"settings"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-8"},o.a.createElement(Ce,{disconnect:this.disconnect,connect:this.connect,pages:a,pageConnected:t,pagesLoading:e,page:this.state.page}),this.state.menuSave?o.a.createElement("div",{className:"overlayer",style:{width:"100%",height:"100%"}},o.a.createElement(R,{width:40})):"",o.a.createElement("div",{className:"card"},o.a.createElement("h6",{className:"card-header text-light bg-info font-weight-bold"},"Chatbot menu"),o.a.createElement("div",{className:"card-body pt-0",style:{position:"relative"}},o.a.createElement("div",{style:{paddingTop:"50px"}},o.a.createElement("p",{className:"settings__card__text"},"is simply dummy text of the printing and typesetting industry. Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum"),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-6"},o.a.createElement(be,{blocks:this.props.blocks,persistentMenuError:this.state.persistentMenuError,addUrlButton:this.addUrlButton,addBlockButton:this.addBlockButton})),o.a.createElement("div",{className:"col-6"},o.a.createElement(ve,{paid:this.props.bot.bot.paid,persistent_menu:this.state.persistent_menu,menuButtonDelete:this.menuButtonDelete}),"\\")))))),o.a.createElement("div",{className:"col-4"},o.a.createElement("div",{className:"card"},o.a.createElement("div",{className:"settings__widget"},o.a.createElement("div",{className:"settings__widget__create-page"},o.a.createElement(Ue,null)))),o.a.createElement("div",{className:"card"},o.a.createElement("div",{className:"settings__widget"},o.a.createElement("div",{className:"settings__widget__create-page text-center"},this.state.pagesLoading?o.a.createElement("div",{className:"overlayer",style:{width:"100%",height:"100%"}},o.a.createElement(R,{width:40})):"",o.a.createElement("div",{onClick:this.copyLink,style:{cursor:"pointer"}},o.a.createElement("p",{style:{color:"#007bff",display:"inline"}},this.state.pageConnected?"m.me/"+this.props.bot.connectedPage.page_id:"there's no page connected")," ",o.a.createElement(Q.a,{icon:"copy"})),this.state.showCopy&&o.a.createElement("small",null,"copied to clipboard ",o.a.createElement(Q.a,{style:{color:"green"},icon:"check-circle"}))))))))}}])&&Re(a.prototype,r),s&&Re(a,s),t}();Ve(Ke,"getDerivedStateFromProps",function(e,t){return e!==t?Fe({},t,{pagesLoading:e.user.userLoader,pages:e.user.pages,pageConnected:!!e.bot.connectedPage,page:e.bot.connectedPage,userLoader:e.user.userLoader,persistent_menu:e.bot.persistent_menu}):Fe({},t)});var We=Object(F.b)(function(e){return{user:e.user,bot:e.bot,blocks:e.block.blocks}})(Ke);function Ye(e){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Je(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qe(e){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ze(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xe(e,t){return(Xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $e(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var et=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=Qe(t).call(this,e),a=!o||"object"!==Ye(o)&&"function"!=typeof o?Ze(n):o,$e(Ze(a),"datalistChangeHandler",function(e){var t=e.target.value,n=a.state.aiError,o=d()("#".concat(a.state.blocksDatalistId)).find("[value='".concat(t,"']")).data("id");o||(n.payload="can't be empty",n.datalist=!0),a.setState({save:!0}),a.setState({payload:o,aiError:n}),""===t.trim()&&a.setState({payload:null})}),$e(Ze(a),"save",function(){var e=a.state.aiError;""==a.state.messages.trim()&&(e.messages="Please you can't leave messages empty"),"text"==a.props.type?(""==a.state.replay.trim()&&(e.replay="Please you can't leave Replay empty"),a.setState({aiError:e}),""==e.messages&&""==e.replay&&a.props.dispatch(T(a.state.id,{messages:a.state.messages,replay:a.state.replay,type:a.state.type,errors:{messages:"",replay:""}},a.props.match.params.botid))):a.props.dispatch(T(a.state.id,{messages:a.state.messages,replay:"",type:a.state.type,payload:a.state.payload},a.props.match.params.botid)),a.setState({save:!1})}),$e(Ze(a),"delete",function(){a.props.dispatch(C(a.state.id,a.props.botId))}),$e(Ze(a),"onTypeChange",function(e){var t=e.target.value;a.setState({type:t})}),a.state={replay:a.props.replay,messages:a.props.messages,save:!1,id:a.props.id,payload:a.props.payload,type:a.props.type,blocksDatalistId:se()(),aiError:{messages:"",replay:"",payload:"",datalist:!1}},a}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xe(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidMount",value:function(){var e=this;if(d()("#ai-type-item_".concat(this.state.id,' option[value="').concat(this.state.type,'"]')).attr("selected","selected"),"block"==this.state.type)try{var t=this.props.blocks.find(function(t){return t._id===e.props.payload}).name;t&&d()("#ai_".concat(this.state.blocksDatalistId)).val(t)}catch(e){}}},{key:"onChange",value:function(e,t){this.setState($e({},t,e.target.value));var a=this.state.aiError;this.setState({save:!0}),""!=e.target.value&&(a[t]="",this.setState({aiError:a}))}},{key:"componentDidUpdate",value:function(e,t){var a=this;if(e!=this.props&&this.setState({id:this.props.id,replay:this.props.replay,messages:this.props.messages,type:this.props.type,payload:this.props.payload,blocks:this.props.blocks}),e.blocks!=this.props.blocks&&"block"==this.state.type)try{var n=this.props.blocks.find(function(e){return e._id===a.props.payload}).name;n&&d()("#ai_".concat(this.state.blocksDatalistId)).val(n)}catch(e){}}},{key:"render",value:function(){var e=this,t=this.state,a=t.aiError,n=t.blocksDatalistId;return o.a.createElement("div",{className:"Ai__list__item"},o.a.createElement("div",{className:"form-group Ai__list__item__message"},o.a.createElement("i",{className:"fa fa-times Ai__list__item__message__close",onClick:this.delete}),o.a.createElement("textarea",{value:this.state.messages,style:{border:""==this.state.aiError.messages?"":"1px solid red"},className:"form-control  ",onChange:function(t){return e.onChange(t,"messages")},placeholder:"enter messages (eg. hello,welcome,hi) "})),o.a.createElement("div",{className:"form-group Ai__list__item__replay d-flex",id:"replay"},"text"==this.state.type?o.a.createElement("textarea",{style:{background:"#e8e8e8",border:""==this.state.aiError.replay?"":"1px solid red"},value:this.state.replay,className:"form-control",onChange:function(t){return e.onChange(t,"replay")},placeholder:"Enter replay.."}):o.a.createElement(o.a.Fragment,null,o.a.createElement(ie,{type:"text",id:"ai_".concat(n),name:"blockid",onChange:this.datalistChangeHandler,placeholder:"Block *required",isvalid:a.datalist?"false":"true",required:!0,feedback:a.datalist,className:"w-100 border",list:n}),o.a.createElement("datalist",{id:n},this.props.blocks.map(function(e,t){return o.a.createElement("option",{key:t,"data-id":e._id,value:e.name})}))),o.a.createElement("div",{className:"form-group w-25 ml-4 "},o.a.createElement("p",null," ",o.a.createElement("small",{style:{color:"grey"}}," choose type of response")),o.a.createElement("select",{className:"form-control",id:"ai-type-item_".concat(this.state.id),onChange:this.onTypeChange},o.a.createElement("option",{value:"text"},"text"),o.a.createElement("option",{value:"block"},"block")))),this.state.save?o.a.createElement("button",{onClick:this.save,className:"btn btn-success"},"Save"):"")}}])&&Je(a.prototype,r),s&&Je(a,s),t}(),tt=Object(F.b)()(Object(u.f)(et));function at(e){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nt(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ot(e){return(ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function st(e,t){return(st=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ct=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=ot(t).call(this,e),a=!o||"object"!==at(o)&&"function"!=typeof o?rt(n):o,lt(rt(a),"datalistChangeHandler",function(e){var t=e.target.value,n=a.state.aiError,o=d()("#".concat(a.state.blocksDatalistId)).find("[value='".concat(t,"']")).data("id");o||(n.payload="can't be empty",n.datalist=!0),a.setState({save:!0}),a.setState({payload:o,aiError:n}),""===t.trim()&&a.setState({payload:null})}),lt(rt(a),"save",function(){var e=a.state.aiError;"text"==a.state.type?(""==a.state.replay.trim()&&(e.replay="Please you can't leave Replay empty"),a.setState({aiError:e}),""==e.replay&&a.props.dispatch(T(a.state.id,{replay:a.state.replay,type:a.state.type,errors:{messages:" ",replay:""}},a.props.match.params.botid))):a.props.dispatch(T(a.state.id,{replay:"",type:a.state.type,payload:a.state.payload},a.props.match.params.botid)),a.setState({save:!1})}),lt(rt(a),"delete",function(){a.props.dispatch(C(a.state.id,a.props.botId))}),lt(rt(a),"onTypeChange",function(e){var t=e.target.value;a.setState({type:t})}),a.state={replay:a.props.replay,messages:" ",save:!1,id:a.props.id,payload:a.props.payload,type:a.props.type,blocksDatalistId:se()(),aiError:{replay:"",payload:"",datalist:!1}},a}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&st(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidMount",value:function(){var e=this;if(d()("#ai-type-item-default_".concat(this.state.id,' option[value="').concat(this.state.type,'"]')).attr("selected","selected"),"block"==this.state.type)try{var t=this.props.blocks.find(function(t){return t._id===e.props.payload}).name;t&&d()("#ai_".concat(this.state.blocksDatalistId)).val(t)}catch(e){}}},{key:"onChange",value:function(e,t){this.setState(lt({},t,e.target.value));var a=this.state.aiError;this.setState({save:!0}),""!=e.target.value&&(a[t]="",this.setState({aiError:a}))}},{key:"componentDidUpdate",value:function(e,t){var a=this;if(e!=this.props&&this.setState({id:this.props.id,replay:this.props.replay,messages:this.props.messages,type:this.props.type,payload:this.props.payload,blocks:this.props.blocks}),e.blocks!=this.props.blocks&&"block"==this.state.type)try{var n=this.props.blocks.find(function(e){return e._id===a.props.payload}).name;n&&d()("#ai-default_".concat(this.state.blocksDatalistId)).val(n)}catch(e){}}},{key:"render",value:function(){var e=this,t=this.state,a=t.aiError,n=t.blocksDatalistId;return o.a.createElement("div",{className:"default-message"},o.a.createElement("div",{className:"default-message__header"},o.a.createElement("p",null,"Default message"),o.a.createElement("small",null,"Your bot will understand user phrases similar to those you write on the left and reply with some text or a block. Bot language:")),o.a.createElement("div",{className:"Ai__list__item",style:{background:"none"}},o.a.createElement("div",{className:"form-group Ai__list__item__replay d-flex",id:"replay"},"text"==this.state.type?o.a.createElement("textarea",{style:{background:"#e8e8e8",border:""==this.state.aiError.replay?"":"1px solid red"},value:this.state.replay,className:"form-control",onChange:function(t){return e.onChange(t,"replay")},placeholder:"Enter replay.."}):o.a.createElement(o.a.Fragment,null,o.a.createElement(ie,{type:"text",id:"ai-default_".concat(n),name:"blockid",onChange:this.datalistChangeHandler,placeholder:"Block *required",isvalid:a.datalist?"false":"true",required:!0,feedback:!1,className:"w-100 border",list:n,style:{background:"none"}}),o.a.createElement("datalist",{id:n},this.props.blocks.map(function(e,t){return o.a.createElement("option",{key:t,"data-id":e._id,value:e.name})}))),o.a.createElement("div",{className:"form-group w-25 ml-4 "},o.a.createElement("select",{className:"form-control",id:"ai-type-item-default_".concat(this.state.id),onChange:this.onTypeChange},o.a.createElement("option",{value:"text"},"text"),o.a.createElement("option",{value:"block"},"block")),o.a.createElement("p",null," ",o.a.createElement("small",{style:{color:"grey"}}," choose type of response")))),this.state.save?o.a.createElement("button",{onClick:this.save,className:"btn btn-success"},"Save"):""))}}])&&nt(a.prototype,r),s&&nt(a,s),t}(),it=Object(F.b)()(Object(u.f)(ct));function ut(e){return(ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pt(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mt(e){return(mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ft(e,t){return(ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var yt=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=mt(t).call(this,e),a=!o||"object"!==ut(o)&&"function"!=typeof o?dt(n):o,bt(dt(a),"botid",a.props.match.params.botid),bt(dt(a),"save",function(){var e=a.state.aiError;""==a.state.messages.trim()&&(e.messages="Please you can't leave messages empty"),"text"==a.state.type?(""==a.state.replay.trim()&&(e.replay="Please you can't leave message replay"),a.setState({aiError:e}),""==e.messages&&""==e.replay&&(console.log(a.state),a.props.dispatch(N({messages:a.state.messages,replay:a.state.replay},a.botid)),a.setState({aiError:{messages:"",replay:"",payload:!1}}),a.setState({messages:"",replay:"",payload:null,type:"text"}))):(null==a.state.payload&&(e.payload="Please you can't leave blocks choices"),a.setState({aiError:e}),""==e.payload&&""==e.messages&&(a.props.dispatch(N({type:"block",payload:a.state.payload,messages:a.state.messages},a.botid)),a.setState({aiError:{messages:"",replay:"",payload:!1}}),a.setState({messages:"",replay:"",payload:null,type:"text"})))}),bt(dt(a),"datalistChangeHandler",function(e){var t=e.target.value,n=a.state.aiError,o=d()("#".concat(a.state.blocksDatalistId)).find("[value='".concat(t,"']")).data("id");o||(n.payload="can't be empty",n.datalist=!0),a.setState({payload:o,aiError:n}),""===t.trim()&&a.setState({payload:null})}),bt(dt(a),"add",function(){a.setState({add:!a.state.add})}),bt(dt(a),"onTypeChange",function(e){var t=e.target.value;a.setState({type:t})}),a.state={messages:"",replay:"",type:"text",defaultAi:{},payload:null,blocksDatalistId:se()(),loading:!0,aiError:{messages:"",replay:"",payload:""},add:!1,ais:[]},a}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ft(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidMount",value:function(){var e;this.props.dispatch((e=this.props.match.params.botid,function(t){c.a.get("".concat(i,"api/bot/ai/get-all/").concat(e)).then(function(e){t(function(e){return{type:"GET_AIS",ais:e}}(e.data.ais))})})),this.props.dispatch(ke(this.props.match.params.botid))}},{key:"componentDidUpdate",value:function(e,t){e.bot.ais!==this.props.bot.ais&&(this.setState({ais:this.props.bot.ais,loading:!1}),this.setState({defaultAi:this.props.bot.ais.filter(function(e){return e.default_message})[0]}))}},{key:"onChange",value:function(e,t){this.setState(bt({},t,e.target.value));var a=this.state.aiError;""!=e.target.value&&(a[t]="",this.setState({aiError:a}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.defaultAi,n=t.aiError,r=t.blocksDatalistId;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"",style:{position:"relative"}},this.state.loading?o.a.createElement("div",{className:"overlayer",style:{width:"100%",height:"100%"}},o.a.createElement(R,{width:40})):"",o.a.createElement(it,{id:a._id,key:a._id,botId:this.props.match.params.botid,replay:a.replay,messages:a.messages,type:a.type,payload:a.payload,blocks:this.props.blocks}),o.a.createElement("div",{className:"Ai"},o.a.createElement("div",{className:"Ai__header"},o.a.createElement("p",null,"AI training"),o.a.createElement("small",null,"Your bot will understand user phrases similar to those you write on the left and reply with some text or a block. Bot language:")),o.a.createElement("div",{className:""},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-12"},o.a.createElement("div",{className:"Ai__add",onClick:this.add},o.a.createElement("i",{className:"fa fa-plus"})),o.a.createElement("div",{className:"Ai__list"},this.state.add?o.a.createElement("div",{className:"Ai__list__item Ai__list__item"},o.a.createElement("div",{className:"form-group Ai__list__item__message"},o.a.createElement("textarea",{style:{border:""==this.state.aiError.messages?"":"1px solid red"},onChange:function(t){return e.onChange(t,"messages")},value:this.state.messages,className:"form-control ",placeholder:"enter messages (eg. hello,welcome,hi) "})),o.a.createElement("div",{className:"form-group Ai__list__item__replay d-flex",id:"replay"},"text"==this.state.type?o.a.createElement("textarea",{style:{background:"#e8e8e8",border:""==this.state.aiError.replay?"":"1px solid red"},onChange:function(t){return e.onChange(t,"replay")},value:this.state.replay,className:"form-control w-100",placeholder:"Enter replay.."}):o.a.createElement("div",{className:"w-100"},o.a.createElement(ie,{type:"text",id:"ai_".concat(r),name:"blockid",onChange:this.datalistChangeHandler,placeholder:"Block *required",isvalid:n.payload?"false":"true",required:!0,feedback:n.payload,className:"w-100 border",list:r}),o.a.createElement("datalist",{id:r},this.props.blocks.map(function(e,t){return o.a.createElement("option",{key:t,"data-id":e._id,value:e.name})}))),o.a.createElement("div",{className:"form-group w-25 ml-4 "},o.a.createElement("p",null," ",o.a.createElement("small",{style:{color:"grey"}}," choose type of response")),o.a.createElement("select",{className:"form-control",id:"ai-type",onChange:this.onTypeChange},o.a.createElement("option",{value:"text"},"text"),o.a.createElement("option",{value:"block"},"block")))),o.a.createElement("button",{onClick:this.save,className:"btn btn-success"},"Save")):"",this.state.ais.map(function(t,a){return t.default_message?null:o.a.createElement(tt,{id:t._id,key:t._id,botId:e.props.match.params.botid,replay:t.replay,messages:t.messages,type:t.type,payload:t.payload,blocks:e.props.blocks})}))))))))}}])&&pt(a.prototype,r),s&&pt(a,s),t}(),ht=Object(F.b)(function(e){return{bot:e.bot,blocks:e.block.blocks}})(yt);function _t(e){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gt(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Et(e){return(Et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kt(e,t){return(kt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Ot=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=Et(t).call(this),a=!o||"object"!==_t(o)&&"function"!=typeof o?vt(n):o,wt(vt(a),"deleteSchedule",function(e){a.props.deleteSchedule(a.props.botId,a.state.schedule._id),d()(e.target).parents("#schdule_section").slideUp(400)}),wt(vt(a),"addActiveClass",function(e){e.currentTarget}),a.state={schedule:e.schedule},a}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kt(e,t)}(t,n["Component"]),a=t,s=[{key:"getDerivedStateFromProps",value:function(e,t){return e.schedule!=t.schedule?{schedule:e.schedule}:null}}],(r=[{key:"componentDidMount",value:function(){this.setState({schedule:this.props.schedule})}},{key:"render",value:function(){return o.a.createElement("div",{style:{position:"relative"},className:"schdule_section"},o.a.createElement("button",{onClick:this.deleteSchedule,className:"d-block badge has-fa-icon btn  btn-secondary d-flex justify-content-center align-items-center",id:"delete_schedule",style:{position:"absolute",right:"3px",top:"5px",zIndex:"1000",width:"20px",height:"20px",borderRadius:"12px",cursor:"pointer"}},o.a.createElement(Q.a,{icon:"times"}),o.a.createElement("span",{className:"fa-icon-cover"})),o.a.createElement(P.b,{to:"/dashboard/bot/schedules/".concat(this.props.botId,"/").concat(this.state.schedule._id),className:"block-schedule",activeClassName:"block--active"},o.a.createElement("button",{type:"button",className:"btn__icon has-fa-icon w-100 h-100"},o.a.createElement("div",null,o.a.createElement("span",{className:"badge badge-secondary mr-1"},Ie()(this.state.schedule.start_date).format("MMM DD")),this.state.schedule.end_date&&o.a.createElement("span",{className:"end-date badge badge-secondary"},Ie()(this.state.schedule.end_date).format("MMM DD"))),o.a.createElement("small",{style:{position:"absolute",right:"24px",bottom:"-21px"}},Ie()(this.state.schedule.start_date).format("hh:mm")))))}}])&&gt(a.prototype,r),s&&gt(a,s),t}(),St=Object(F.b)(null,{deleteSchedule:function(e,t){return function(a){c.a.delete("".concat(i,"api/bot/schedule/remove/").concat(e,"/").concat(t)).then(function(n){a({type:"DELET_SCHEDULE",scheduleId:t}),bs.push("/dashboard/bot/schedules/".concat(e))})}}})(Ot),jt=function(e,t,a,n){return function(o){o({type:"block"===n?"ADD_BLOCK_TEMPLATE":"ADD_SCHEDULE_TEMPLATE"});var r="block"===n?"block-template":"template";return new Promise(function(s,l){c.a.post("".concat(i,"api/bot/").concat(r,"/create/").concat(e,"/").concat(t),{data:a}).then(function(e){var t=e.data.template;try{t.message=JSON.parse(t.message)}catch(e){}o({type:"block"===n?"ADD_BLOCK_TEMPLATE_SUCCESS":"ADD_SCHEDULE_TEMPLATE_SUCCESS",newTemplate:t}),s()}).catch(function(e){console.log(e)})})}},Nt=function(e,t,a,n){return function(o){var r="block"===n?"block-template":"template";return c.a.delete("".concat(i,"api/bot/").concat(r,"/remove/").concat(e,"/").concat(t,"/").concat(a)).then(function(e){o({type:"block"===n?"DELETE_BLOCK_TEMPLATE":"DELETE_SCHEDULE_TEMPLATE",id:a})})}},Tt=function(e,t,a,n,o){return function(r){var s="block"===o?"block-template":"template";return r({type:"block"===o?"EDIT_BLOCK_TEMPLATE":"EDIT_SCHEDULE_TEMPLATE"}),new Promise(function(l,u){c.a.post("".concat(i,"api/bot/").concat(s,"/edit/").concat(e,"/").concat(t,"/").concat(a),{data:n}).then(function(e){e.data;r({type:"block"===o?"EDIT_BLOCK_TEMPLATE_SUCCESS":"EDIT_SCHEDULE_TEMPLATE_SUCCESS",id:a,newTemplate:n}),l()})})}},Ct=function(e,t,a){return function(n){n({type:"block"===a?"FETCH_BLOCK_TEMPLATES":"FETCH_SCHEDULE_TEMPLATES"}),c.a.get("".concat(i,"api/bot/").concat(a,"/get/").concat(e,"/").concat(t)).then(function(e){var t=e.data,o=t.templates.map(function(e){try{e.message=JSON.parse(e.message)}catch(e){}return e});n({type:"block"===a?"FETCH_BLOCK_TEMPLATES_SUCCESS":"FETCH_SCHEDULE_TEMPLATES_SUCCESS",templates:o}),n({type:"block"===a?"SET_CURRENT_BLOCK":"SET_CURRENT_SCHEDULE",current:t.schedule||t.block})}).catch(function(e){console.log(e),n({type:"block"===a?"FETCH_BLOCK_TEMPLATES_FAILURE":"FETCH_SCHEDULE_TEMPLATES_FAILURE"})})}},Pt=function(e){var t=e._addTemplate;return o.a.createElement("div",{className:"list-unstyled btn-group",style:{zIndex:1}},o.a.createElement("button",{className:"choose-template__button  has-fa-icon",onClick:function(){t("button")}},o.a.createElement("span",{className:"fa-icon-cover","data-template":"button"}),o.a.createElement(Q.a,{className:"icon",icon:"align-left"}),o.a.createElement("span",{className:"text"},"Button")),o.a.createElement("button",{className:"choose-template__button has-fa-icon",onClick:function(){t("image")}},o.a.createElement("span",{className:"fa-icon-cover","data-template":"image"}),o.a.createElement(Q.a,{className:"icon",icon:"image"}),o.a.createElement("span",{className:"text"},"image")),o.a.createElement("button",{className:"choose-template__button has-fa-icon",onClick:function(){t("generic")}},o.a.createElement("span",{className:"fa-icon-cover","data-template":"gallery"}),o.a.createElement(Q.a,{className:"icon",icon:"images"}),o.a.createElement("span",{className:"text"},"gallery")),o.a.createElement("button",{className:"choose-template__button has-fa-icon",onClick:function(){t("typing")}},o.a.createElement("span",{className:"fa-icon-cover","data-template":"typing"}),o.a.createElement(Q.a,{className:"icon",icon:"comment-dots"}),o.a.createElement("span",{className:"text"},"typing")),o.a.createElement("button",{className:"choose-template__button has-fa-icon",onClick:function(){t("redirect")}},o.a.createElement("span",{className:"fa-icon-cover","data-template":"redirect"}),o.a.createElement(Q.a,{className:"icon",icon:"chevron-circle-down"}),o.a.createElement("span",{className:"text"},"redirect")))},It=(a(660),a(685),a(184)),xt=function(e){var t=e.message;switch(e.type){case"error":return o.a.createElement("div",{className:"d-flex justify-content-center align-items-center w-100"},o.a.createElement("div",{className:"show-message"},o.a.createElement("h6",{className:" alert alert-danger alert-dismissible fade show "},t,o.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"},"×")))));case"success":return o.a.createElement("div",{className:"d-flex justify-content-center align-items-center w-100"},o.a.createElement("div",{className:"show-message"},o.a.createElement("h6",{className:" alert alert-success alert-dismissible fade show "},t,o.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"},"×")))))}},Lt=function(e){return null==e||""===e||0===Object.keys(e).length};function Dt(e){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bt(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function At(e){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ut(e,t){return(Ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ft(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Ht=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=At(t).call(this),a=!o||"object"!==Dt(o)&&"function"!=typeof o?Mt(n):o,Ft(Mt(a),"handleInputChange",function(e){var t=e.target;a.setState(Ft({},t.name,t.value))}),Ft(Mt(a),"editSchedule",function(){console.log(Ie()(),"MOMEEEEEENT");var e=Ie()(a.state.startDate).local("en").format("YYYY-MM-DD");console.log(e,"DATEEEEEEEEEEEE"),e=Ie()("".concat(e," ").concat(a.state.hour.replace(/^[0]/,""),":").concat(a.state.mins.replace(/^[0]/,"")," ").concat(a.state.time)),console.log(e,"DATEEEEEEEEEEEE");var t,n=Ie()(a.state.endDate).local("en").format("YYYY-MM-DD");n=Ie()("".concat(n," ").concat(a.state.hour.replace(/^[0]/,""),":").concat(a.state.mins.replace(/^[0]/,"")," ").concat(a.state.time)),a.state.isSingleDay?(e=Ie()(a.state.date).local("en").format("YYYY-MM-DD"),t={startDate:(e=Ie()("".concat(e," ").concat(a.state.hour.replace(/^[0]/,""),":").concat(a.state.mins.replace(/^[0]/,"")," ").concat(a.state.time))).toString(),endDate:null}):t={startDate:e.toString(),endDate:n.toString()},console.log("TIMEW ",t),a.props.editSchedule(a.props.match.params.botid,a.props.match.params.scheduleid,t)}),Ft(Mt(a),"selectDateTypeHandler",function(e){var t=e.target,n=t.checked;a.setState(Ft({},t.name,n))}),a.state={startDate:Ie()(e.startDate),endDate:null===e.endDate?void 0:Ie()(e.endDate)||Ie()(e.startDate),focusedInput:void 0,hour:"",mins:"",time:"am",date:void 0,focused:!1,isSingleDay:!1},a}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ut(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidUpdate",value:function(e,t){var a=this;e.startDate!==this.props.startDate&&(console.log(this.props.time),this.setState({startDate:Ie()(this.props.startDate),endDate:Lt(this.props.endDate)?void 0:Ie()(this.props.endDate),mins:this.props.mins,hour:this.props.hours,time:this.props.time},function(){console.log(a.state),a.state.startDate&&void 0===a.state.endDate&&a.setState({isSingleDay:!0,date:a.state.startDate})}))}},{key:"render",value:function(){for(var e=this,t=[],a=[],n=1;n<=12;n++)n<10?t.push("0".concat(n)):t.push(n);for(var r=0;r<=59;r++)r<10?a.push("0".concat(r)):a.push(r);return o.a.createElement("form",{className:"schedule-time",style:{color:"#888",transform:"scale(0.8)"}},o.a.createElement("div",{className:"date form-group"},o.a.createElement("label",{htmlFor:"date"},"Date"),o.a.createElement("br",null),this.state.isSingleDay?o.a.createElement(It.SingleDatePicker,{date:this.state.date,onDateChange:function(t){return e.setState({date:t})},focused:this.state.focused,onFocusChange:function(t){var a=t.focused;return e.setState({focused:a})},showDefaultInputIcon:!0,placeholder:"Single day",id:"single_date_picker"}):o.a.createElement(It.DateRangePicker,{startDate:this.state.startDate,endDate:this.state.endDate,startDateId:"#startDate",endDateId:"#startDate",onDatesChange:function(t){var a=t.startDate,n=t.endDate;console.log(a),e.setState({startDate:a,endDate:n})},focusedInput:this.state.focusedInput,onFocusChange:function(t){return e.setState({focusedInput:t})},showDefaultInputIcon:!0})),o.a.createElement("div",{className:"form-group form-check"},o.a.createElement("input",{type:"checkbox",name:"isSingleDay",checked:this.state.isSingleDay,onChange:this.selectDateTypeHandler,className:"form-check-input ",style:{width:"20px",height:"20px"},id:"single_day"}),o.a.createElement("label",{style:{cursor:"pointer"},className:"ml-3",htmlFor:"single_day"},"choose single day")),o.a.createElement("p",null,"Or"),o.a.createElement("div",{className:"week-days form-group"},o.a.createElement("label",null,"Week days"),o.a.createElement("div",{className:"d-flex"},o.a.createElement("select",{id:"hour",name:"hour",onChange:this.handleInputChange,title:"choose schedule time",className:"form-control mr-2",value:this.state.hour,style:{width:"100px"}},t.map(function(e,t){return o.a.createElement("option",{value:e,key:t},e)})),o.a.createElement("select",{id:"",name:"mins",onChange:this.handleInputChange,title:"choose schedule time",className:"form-control mr-2",value:this.state.mins,style:{width:"100px"}},a.map(function(e,t){return o.a.createElement("option",{value:e,key:t},e)})),o.a.createElement("select",{id:"time",name:"time",onChange:this.handleInputChange,title:"choose schedule time   ",className:"form-control ",value:this.state.time,style:{width:"100px"}},o.a.createElement("option",{value:"am"},"am"),o.a.createElement("option",{value:"pm"},"pm")))),o.a.createElement("div",{className:"schedule-actions "},o.a.createElement(P.a,{to:"/",className:""},"Go back and cancel"),o.a.createElement("button",{onClick:this.editSchedule,type:"button",className:"btn btn-primary ml-3"},"Save schedule"),!1===this.props.scheduleIsEditing&&o.a.createElement("div",{className:"mt-3"},o.a.createElement(xt,{type:"success",message:"your schedule is saved successfully"}))))}}])&&Bt(a.prototype,r),s&&Bt(a,s),t}(),Rt=Object(F.b)(function(e){return{templates:e.schedule.template.templates,scheduleIsEditing:e.schedule.scheduleIsEditing}},{editSchedule:function(e,t,a){return function(n){var o={start_date:a.startDate,end_date:a.endDate};n({type:"SAVE_SCHEDULE"}),c.a.post("".concat(i,"api/bot/schedule/edit/").concat(e,"/").concat(t),{data:o}).then(function(e){var t=e.data;n({type:"SET_CURRENT_SCHEDULE",current:t.schedule}),n({type:"SAVE_SCHEDULE_SUCCESS",newSchedule:t.schedule})}).catch(function(e){console.log(e),n({type:"SAVE_SCHEDULE_FAILURE"})})}}})(Object(u.f)(Ht)),zt=a(19),Gt=function(e){switch(e){case"button":return{valid:!1,type:"button",message:{attachment:{type:"template",payload:{template_type:"button",text:"",buttons:[]}}}};case"image":return{valid:!1,type:"image",message:{attachment:{type:"image",payload:{url:"",is_reusable:!0}}}};case"generic":return{valid:!1,type:"generic",message:{attachment:{type:"template",payload:{template_type:"generic",elements:[{title:"",image_url:"",subtitle:"",buttons:[]}]}}}};case"typing":return{valid:!0,type:"typing",seconds:1};case"redirect":return{valid:!1,type:"redirect"};default:return null}},qt=function(e,t){var a={};if(!Lt(t))switch(e){case"button":Lt(t.text)&&(a.text="text field is required");break;case"image":Lt(t.image_url)&&(a.picture="picture is required");break;case"gallery":Lt(t.image_url)&&(a.picture="picture is required"),Lt(t.title)&&(a.title="title is required")}return{isValid:Lt(a),errors:a}};function Vt(){return(Vt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Kt(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var Wt=function(e){var t=e.type,a=void 0===t?"text":t,n=e.name,r=e.value,s=e.onChange,l=e.placeholder,c=e.required,i=e.feedback,u=e.isvalid,p=e.className,m=void 0===p?"":p,d=e.maxLength,f=void 0===d?"":d,b=Kt(e,["type","name","value","onChange","placeholder","required","feedback","isvalid","className","maxLength"]);return o.a.createElement("div",{style:{position:"relative"}},o.a.createElement("textarea",Vt({type:a,name:n,value:r,onChange:s,placeholder:l,className:"validated-input form-control ".concat(m," ").concat("false"===u&&" is-invalid"),required:c,maxLength:f},b)),o.a.createElement("span",{style:{position:"absolute",zIndex:"100",bottom:0,left:"20px"},className:"invalid-feedback"},i))},Yt=a(434),Jt=function(e){var t={};return Lt(e)||("web_url"!==e.buttonType||Lt(e.buttonUrl)||Object(Yt.isURL)(e.buttonUrl)||(t.buttonUrl="Please enter a valid url!"),Lt(e.buttonTitle)&&(t.buttonTitle="button title is required!"),"web_url"===e.buttonType&&Lt(e.buttonUrl)&&(t.buttonUrl="button url is required!"),"postback"===e.buttonType&&null===e.buttonPayload&&(t.buttonPayload="button payload is required!")),{isValid:Lt(t),errors:t}};function Qt(e){return(Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zt(e){for(var t=1;t<arguments.length;t++)if(t%2){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){aa(e,t,a[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}function Xt(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $t(e){return($t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ea(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ta(e,t){return(ta=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function aa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var na=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=$t(t).call(this),a=!o||"object"!==Qt(o)&&"function"!=typeof o?ea(n):o,aa(ea(a),"handleInputChange",function(e){return a.setState(aa({},e.target.name,e.target.value))}),aa(ea(a),"chooseButtonType",function(e){e.stopPropagation(),document.querySelectorAll(".button-type__list li").forEach(function(e){return e.classList.remove("active")}),e.target.classList.add("active"),a.setState({buttonType:e.target.getAttribute("data-button_type")})}),aa(ea(a),"datalistChangeHandler",function(e){var t=e.target.value,n=d()("#".concat(a.state.blocksDatalistId)).find("[value='".concat(t,"']")).data("id");a.setState({buttonPayload:n,unCreatedBlockName:t}),""===t.trim()&&a.setState({buttonPayload:null})}),aa(ea(a),"handleSubmit",function(e){e.preventDefault();var t={buttonType:a.state.buttonType,buttonTitle:a.state.buttonTitle,buttonPayload:a.state.buttonPayload,buttonUrl:a.state.buttonUrl},n=Jt(t),o=n.isValid,r=n.errors;if(o){if(a.props.buttons.length>=3)return void a.setState({errors:Zt({},a.state.errors,{buttonsNumberLimits:"can't add more than 3 buttons per template !"})},function(){setTimeout(function(){a.props.toggleButtonForm(!1)},3e3)});if(a.state.buttonType,void 0===a.state.buttonPayload)return void a.setState({blockNotFound:!0});a.setState({errors:{}});var s={};switch(a.state.buttonType){case"web_url":s={type:"web_url",url:a.state.buttonUrl,title:a.state.buttonTitle};break;case"postback":s={type:"postback",title:a.state.buttonTitle,payload:a.state.buttonPayload}}if(a.props.template){var l=a.props.template;a.state.isEditForm?a.props._editButtonOfTemplate(s,a.props.button.buttonIndex):a.props._addButtonToTemplate(s),a.props._editTemplate(l),a.props.toggleButtonForm(!1)}else console.error("template was not found")}else a.setState({errors:r})}),aa(ea(a),"__createBlock",function(){a.props._createBlock(a.state.unCreatedBlockName,!0),d()("#input_".concat(a.state.blocksDatalistId)).val(""),a.setState({blockNotFound:!1})}),a.state={buttonType:e.button&&e.button.type||"postback",buttonTitle:e.button&&e.button.title||"",buttonPayload:e.button&&e.button.payload||null,buttonUrl:e.button&&e.button.url||"",errors:{},isEditForm:!Lt(e.button),blocksDatalistId:se()(),blockNotFound:!1,unCreatedBlockName:""},a}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ta(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidMount",value:function(){var e=this;if("payload"===this.state.buttonType){var t=this.props.button&&this.props.blocks.find(function(t){return t._id===e.props.button.payload}).name;t&&d()("#input_".concat(this.state.blocksDatalistId)).val(t)}}},{key:"render",value:function(){var e=this,t=this.props,a=t.toggleButtonForm,n=t.animation,r=this.state,s=r.buttonTitle,l=r.buttonType,c=r.buttonUrl,i=r.errors,u=r.isEditForm,p=r.blocksDatalistId;return o.a.createElement(zt.animated.div,{style:n,className:"add-button-form d-block"},o.a.createElement("span",{className:"badge badge-secondary d-flex justify-content-center align-items-center",style:{position:"absolute",top:"-7px",left:"-9px",fontSize:"16px",fontWeight:"bold",transform:"scale(0.8)",zIndex:"1000",cursor:"pointer"},onClick:function(){return a(!1)}},"×"),o.a.createElement(ie,{type:"text",name:"buttonTitle",value:s,onChange:this.handleInputChange,placeholder:"button title *required",isvalid:i.buttonTitle?"false":"true",required:!0,feedback:i.buttonTitle,className:"w-100 border"}),o.a.createElement("hr",{style:{margin:"10px 0"}}),o.a.createElement("ul",{className:"list-unstyled d-flex justify-content-between w-100 button-type__list mb-3"},o.a.createElement("li",{onClick:this.chooseButtonType,"data-button_type":"postback",style:{cursor:"pointer",position:"relative"},role:"button",className:"has-fa-icon"},o.a.createElement("span",{"data-button_type":"postback",className:"fa-icon-cover "}),o.a.createElement(Q.a,{icon:"th-large"}),o.a.createElement("span",{className:"ml-1"},"section")),o.a.createElement("li",{onClick:this.chooseButtonType,"data-button_type":"web_url",style:{cursor:"pointer"},role:"button",className:"has-fa-icon"},o.a.createElement("span",{className:"fa-icon-cover","data-button_type":"web_url"}),o.a.createElement(Q.a,{icon:"link"}),o.a.createElement("span",{className:"ml-1"},"url")),o.a.createElement("li",{onClick:this.chooseButtonType,"data-button_type":"share",style:{cursor:"pointer"},role:"button",className:"has-fa-icon"},o.a.createElement("span",{className:"fa-icon-cover","data-button_type":"share"}),o.a.createElement(Q.a,{icon:"share-alt"}),o.a.createElement("span",{"data-button-type":"share",className:"ml-1"},"share"))),"postback"===l&&o.a.createElement(o.a.Fragment,null,o.a.createElement(ie,{type:"text",id:"input_".concat(p),name:"buttonPayload",onChange:this.datalistChangeHandler,placeholder:"Block *required",isvalid:i.buttonPayload?"false":"true",required:!0,feedback:i.buttonPayload,className:"w-100 border",list:p}),o.a.createElement("datalist",{id:p},this.props.blocks.map(function(e,t){return o.a.createElement("option",{key:t,"data-id":e._id,value:e.name})})),o.a.createElement(zt.Transition,{items:this.state.blockNotFound,from:{marginTop:"-40px",opacity:0},enter:{marginTop:"0",opacity:1},leave:{marginTop:"-40px",opacity:0},native:!0},function(t){return t&&function(t){return o.a.createElement(zt.animated.div,{style:t},o.a.createElement("small",{className:"text-warning"},"this block is not found"),o.a.createElement("button",{type:"button",onClick:e.__createBlock,className:"btn btn-sm mt-1"},o.a.createElement("a",{href:"#",onClick:function(e){return e.preventDefault()}},"create block"),o.a.createElement("span",{className:"badge bg-light"},e.state.unCreatedBlockName," ?")))}})),"web_url"===l&&o.a.createElement(ie,{type:"text",name:"buttonUrl",value:c,onChange:this.handleInputChange,placeholder:"button url *required",isvalid:i.buttonUrl?"false":"true",required:!0,feedback:i.buttonUrl,className:"w-100 border"}),u?o.a.createElement("button",{className:"btn btn-primary float-right mt-3 btn-sm",type:"button",onClick:this.handleSubmit},!0===this.props.newBlockIsLoading?o.a.createElement(R,{width:20}):"Update"):o.a.createElement("button",{className:"btn btn-primary float-right mt-3 btn-sm",type:"button",onClick:this.handleSubmit,style:{position:"relative"}},!0===this.props.newBlockIsLoading?o.a.createElement(R,{width:20}):"Save"),o.a.createElement("div",{className:"clearfix"}),this.state.errors.buttonsNumberLimits&&o.a.createElement("small",{className:"text-danger"},this.state.errors.buttonsNumberLimits))}}])&&Xt(a.prototype,r),s&&Xt(a,s),t}(),oa=function(e){var t=e.modalId,a=e.title,n=e.message,r=e.actionButtonBootstrapClass,s=e.doActionButtonTitle,l=e.action;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{tabIndex:-1,className:"modal fade",id:t,role:"dialog","aria-hidden":"true","aria-labelledby":"exampleModalLabel"},o.a.createElement("div",{className:"modal-dialog",role:"document"},o.a.createElement("div",{className:"modal-content"},o.a.createElement("div",{className:"modal-header"},o.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},a),o.a.createElement("button",{className:"close","aria-label":"Close",type:"button","data-dismiss":"modal"},o.a.createElement("span",{"aria-hidden":"true"},"×"))),o.a.createElement("div",{className:"modal-body"},n),o.a.createElement("div",{className:"modal-footer"},o.a.createElement("button",{className:"btn btn-secondary",type:"button","data-dismiss":"modal"},"Close"),o.a.createElement("button",{className:"btn btn-".concat(r),type:"button",onClick:function(e){l(e),d()("#".concat(t)).modal("hide")}},s))))))};function ra(e){return(ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sa(e){for(var t=1;t<arguments.length;t++)if(t%2){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){pa(e,t,a[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}function la(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ca(e){return(ca=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ia(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ua(e,t){return(ua=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ma(e,t,a,n,o,r,s){try{var l=e[r](s),c=l.value}catch(e){return void a(e)}l.done?t(c):Promise.resolve(c).then(n,o)}var da=zt.Keyframes.Spring(function(){var e,t=(e=regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({from:{opacity:0,transform:"scale(0)"},transform:"scale(1.05)",opacity:.8});case 2:return e.next=4,t({from:{opacity:.8,transform:"scale(1.05)"},transform:"scale(1)",opacity:1});case 4:case"end":return e.stop()}},e)}),function(){var t=this,a=arguments;return new Promise(function(n,o){var r=e.apply(t,a);function s(e){ma(r,n,o,s,l,"next",e)}function l(e){ma(r,n,o,s,l,"throw",e)}s(void 0)})});return function(e){return t.apply(this,arguments)}}()),fa=function(e){function t(e){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n,o,r=e.template.message.attachment.payload.text;return n=this,o=ca(t).call(this),a=!o||"object"!==ra(o)&&"function"!=typeof o?ia(n):o,pa(ia(a),"handleInputChange",function(e){return a.setState(pa({},e.target.name,e.target.value))}),pa(ia(a),"toggleButtonForm",function(e){e?a.setState({openButtonForm:!0}):(a.setState({openButtonForm:!1}),a.state.currentButton&&a.setState({currentButton:void 0}))}),pa(ia(a),"checkIfNoButtons",function(e){var t=sa({},e);if(t.message.attachment&&0===t.message.attachment.payload.buttons.length){var a=t.message.attachment.payload.text;delete t.message.attachment,t.message={text:a},console.log("template after removing buttons is : ",t)}return t}),pa(ia(a),"__editTemplate",function(){var e=a.props,t=e.template,n=e._editTemplate,o=qt("button",{text:a.state.text}),r=o.isValid,s=o.errors;if(!r)return a.setState({errors:s}),t.valid=!1,t.message.attachment.payload.text=a.state.text,void n(checkIfNoButtons(t));a.setState({errors:{}}),t.message.attachment.payload.text=a.state.text,t.valid=!0,n(a.checkIfNoButtons(t))}),pa(ia(a),"onBlurHandler",function(e){e.target;a.__editTemplate()}),pa(ia(a),"setCurrentButton",function(e,t){var n=a.props.buttons[t];n.buttonIndex=t,a.setState({currentButton:n},function(){a.toggleButtonForm(!0)})}),pa(ia(a),"deleteButton",function(e,t){e.stopPropagation(),e.preventDefault();var n=a.props,o=n.template,r=n._editTemplate;o.message.attachment.payload.buttons.splice(t,1),r(a.checkIfNoButtons(o))}),pa(ia(a),"__deleteTemplate",function(e){a.setState({templateIsBeingDeleted:!0});var t=a.props;(0,t._deleteTemplate)(t.template._id)}),pa(ia(a),"_addButtonToTemplate",function(e){var t=a.props,n=t.template,o=t._editTemplate;n.message.attachment.payload.buttons.push(e),o(n)}),pa(ia(a),"_editButtonOfTemplate",function(e,t){var n=a.props,o=n.template,r=n._editTemplate;o.message.attachment.payload.buttons[t]=e,r(o)}),a.state={text:r||"",buttons:[],errors:{},openButtonForm:!1,templateIsBeingDeleted:null,currentButton:void 0,modalId:se()()},a}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ua(e,t)}(t,n["Component"]),a=t,(r=[{key:"render",value:function(){var e=this,t=this.state,a=t.text,n=t.errors,r=t.openButtonForm,s=t.currentButton,l=t.modalId,c=t.templateIsBeingDeleted,i=this.props,u=i.template,p=i.blocks,m=i.buttons,f=i.animation,b=i.newBlockIsLoading,y=m||this.state.buttons;return o.a.createElement(o.a.Fragment,null,o.a.createElement(oa,{modalId:l,title:"Delete Template!",message:"Are you sure you want to delete this template ?",doActionButtonTitle:"Delete",actionButtonBootstrapClass:"danger",action:this.__deleteTemplate}),o.a.createElement(zt.animated.div,{style:sa({},f,{},{zIndex:2,position:"relative"}),className:"button-template"},c&&o.a.createElement("div",{className:"overlayer",style:{width:"250px"}},o.a.createElement(R,{width:30})),o.a.createElement("button",{className:"btn__icon deleteButton_btn has-fa-icon",title:"delete this template",style:{left:"-29px",top:"-14px"},type:"button",onClick:function(){return d()("#".concat(l)).modal("show")}},o.a.createElement("span",{className:"fa-icon-cover"}),o.a.createElement(Q.a,{icon:"trash",size:"sm"})),o.a.createElement("div",{style:{position:"relative"}},o.a.createElement(Wt,{name:"text",onChange:this.handleInputChange,value:a,placeholder:"template text *required",isvalid:n.text?"false":"true",feedback:n.text,required:!0,className:"button-template__text-input",maxLength:"640",onBlur:this.onBlurHandler}),o.a.createElement("span",{className:"badge badge-pill badge-primary",style:{position:"absolute",left:"215px",bottom:"0",zIndex:"9"}},a.length)),o.a.createElement("ul",{className:"buttons-container list-unstyled"},y.map(function(t,a){return o.a.createElement(zt.Transition,{key:a,from:{transform:"translate3d(0,-10px,0)",opacity:0},enter:{transform:"translate3d(0,0px,0)",opacity:1},leave:{transform:"translate3d(0,-10px,0)",opacity:0}},function(){return function(n){return o.a.createElement(zt.animated.div,{onClick:function(t){e.setCurrentButton(t,a)},key:a,style:n},o.a.createElement("li",{style:{zIndex:"100",position:"relative",cursor:"pointer"},className:"btn__add-btn btn"},o.a.createElement("span",null,t.title),o.a.createElement("button",{className:"btn__icon deleteButton_btn has-fa-icon",title:"delete this button",type:"button",onClick:function(t){e.deleteButton(t,a)}},o.a.createElement("span",{className:"fa-icon-cover"}),o.a.createElement(Q.a,{icon:"trash-alt",size:"sm"}))))}})})),o.a.createElement("button",{type:"button",className:"btn__add-btn btn",onClick:function(){return e.toggleButtonForm(!0)}},"Add Button"),r&&o.a.createElement(da,{native:!0},function(t){return o.a.createElement(na,{toggleButtonForm:e.toggleButtonForm,animation:t,blocks:p,template:u,buttons:y,button:s,_editTemplate:e.props._editTemplate,_createBlock:e.props._createBlock,newBlockIsLoading:b,_addButtonToTemplate:e._addButtonToTemplate,_editButtonOfTemplate:e._editButtonOfTemplate})})))}}])&&la(a.prototype,r),s&&la(a,s),t}(),ba=a(435);function ya(e){return(ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ha(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _a(e){return(_a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ga(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ea(e,t){return(Ea=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var va=function(e){function t(){var e,a,n,o,r,s,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,i=new Array(c),u=0;u<c;u++)i[u]=arguments[u];return n=this,a=!(o=(e=_a(t)).call.apply(e,[this].concat(i)))||"object"!==ya(o)&&"function"!=typeof o?ga(n):o,r=ga(a),s="state",l={loader:a.props.loader},s in r?Object.defineProperty(r,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[s]=l,a}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ea(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidUpdate",value:function(e,t){e.loader!=this.props.loader&&this.setState({loader:this.props.loader})}},{key:"render",value:function(){var e=this.state.loader,t=this.props,a=t.handleInputChange,n=t.image_url;return o.a.createElement("div",{className:this.props.className},o.a.createElement("div",{className:"avatar-upload"},e?o.a.createElement("div",{className:"overlayer"},o.a.createElement(R,{width:"40px"})):"",o.a.createElement("div",{className:"avatar-edit"},o.a.createElement("input",{type:"file",title:"",name:"image-template",onChange:a,accept:".png, .jpg, .jpeg "}),o.a.createElement("label",{className:"d-flex",style:{justifyContent:"center",alignItems:"center"}},o.a.createElement(Q.a,{icon:"upload",className:"upload-icon"}))),o.a.createElement("div",{className:"avatar-preview"},o.a.createElement("div",{style:{backgroundImage:"url(".concat(n,")")}}))))}}])&&ha(a.prototype,r),s&&ha(a,s),t}();function ka(e){return(ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wa(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Oa(e){return(Oa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ja(e,t){return(ja=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Na(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Ta=function(e){function t(){var e,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=Oa(t).call(this),e=!n||"object"!==ka(n)&&"function"!=typeof n?Sa(a):n,Na(Sa(e),"readURL",function(t){e.setState({image_url:t});var a=e.props,n=a.template,o=a._editTemplate;n.message.attachment.payload.url=t,o(n)}),Na(Sa(e),"handleImageInput",function(t){var a=new FormData;a.append("upload-image",t.target.files[0]),a.append("type","imagetemp"),e.setState({loader:!0});var n=e.state.image_url?e.state.image_url.split("images/")[1]:"Un";c.a.post("".concat(i,"api/upload-image/").concat(n),a,{headers:{"content-type":"multipart/form-data"}}).then(function(t){e.readURL("".concat(t.data.img)),e.setState({loader:!1}),e.setState({image_url:"".concat(t.data.img)})})}),Na(Sa(e),"__deleteTemplate",function(t){e.setState({loader:!0}),e.props._deleteTemplate(e.props.template._id)}),e.state={image_url:"",errors:{},loader:null,modalId:se()()},e}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ja(e,t)}(t,n["Component"]),a=t,(r=[{key:"render",value:function(){var e=this.state,t=e.errors,a=e.loader,n=e.image_url,r=e.modalId,s=this.props,l=s.template,c=s.image_url,i=s.animation;return c=l.message.attachment.payload.url,o.a.createElement(o.a.Fragment,null,o.a.createElement(oa,{modalId:r,title:"Delete Template!",message:"Are you sure you want to delete this template ?",doActionButtonTitle:"Delete",actionButtonBootstrapClass:"danger",action:this.__deleteTemplate}),o.a.createElement(ba.a.div,{style:i,className:"image-template"},o.a.createElement("button",{className:"btn__icon deleteButton_btn has-fa-icon",title:"delete this template",style:{left:"-29px",top:"-14px"},type:"button",onClick:function(){return d()("#".concat(r)).modal("show")}},o.a.createElement("span",{className:"fa-icon-cover"}),o.a.createElement(Q.a,{icon:"trash",size:"sm"})),o.a.createElement(va,{className:"img-template__img-uploader",handleInputChange:this.handleImageInput,loader:a,templateId:l._id||"",image_url:c||n,style:{backgroundSize:"cover"}}),t.image_url&&o.a.createElement("small",{className:"text-danger"},t.image_url)))}}])&&wa(a.prototype,r),s&&wa(a,s),t}();function Ca(e){return(Ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pa(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ia(e){for(var t=1;t<arguments.length;t++)if(t%2){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){Aa(e,t,a[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}function xa(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function La(e){return(La=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Da(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ba(e,t){return(Ba=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Aa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ma(e,t,a,n,o,r,s){try{var l=e[r](s),c=l.value}catch(e){return void a(e)}l.done?t(c):Promise.resolve(c).then(n,o)}var Ua=zt.Keyframes.Spring(function(){var e,t=(e=regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({from:{opacity:0,transform:"scale(0)"},transform:"scale(1.05)",opacity:.8});case 2:return e.next=4,t({from:{opacity:.8,transform:"scale(1.05)"},transform:"scale(1)",opacity:1});case 4:case"end":return e.stop()}},e)}),function(){var t=this,a=arguments;return new Promise(function(n,o){var r=e.apply(t,a);function s(e){Ma(r,n,o,s,l,"next",e)}function l(e){Ma(r,n,o,s,l,"throw",e)}s(void 0)})});return function(e){return t.apply(this,arguments)}}()),Fa=function(e){function t(e){var a,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=La(t).call(this),a=!o||"object"!==Ca(o)&&"function"!=typeof o?Da(n):o,Aa(Da(a),"checkIfValid",function(){var e=a.props,t=e.elements,n=e.template,o=!0;t.forEach(function(e){Lt(e.title||Lt(e.image_url))&&(o=!1)}),n.valid=o,a.props._editTemplate(n)}),Aa(Da(a),"readURL",function(e){a.setState({image_url:e});var t=a.props,n=t.template,o=t._editTemplate,r=t.elementIndex;t.templateIsBeingDeleted;n.message.attachment.payload.elements[r].image_url=e,o(n),a.checkIfValid()}),Aa(Da(a),"handleImageInput",function(e){var t=new FormData;t.append("upload-image",e.target.files[0]),a.setState({loader:!0});var n=a.state.image_url?a.state.image_url.split("images/")[1]:"Un";c.a.post("".concat(i,"api/upload-image/").concat(n),t,{headers:{"content-type":"multipart/form-data"}}).then(function(e){a.readURL("".concat(e.data.img)),a.setState({loader:!1}),a.setState({image_url:"".concat(e.data.img)})})}),Aa(Da(a),"handleInputChange",function(e){return a.setState(Aa({},e.target.name,e.target.value))}),Aa(Da(a),"toggleButtonForm",function(e){e?a.setState({openButtonForm:!0}):(a.setState({openButtonForm:!1}),a.state.currentButton&&a.setState({currentButton:void 0}))}),Aa(Da(a),"__editTemplate",function(e){var t=a.props,n=t.template,o=t._editTemplate,r=t.elementIndex,s=a.state,l=s.title,c=s.subtitle,i=s.image_url,u={};if(n.valid=!0,Lt(a.state.title))return u.title="title field is required !",n.valid=!1,void a.setState({errors:Ia({},a.state.errors,{},u)});Lt(a.state.image_url)&&(n.valid=!1),a.setState({errors:{}}),n.message.attachment.payload.elements[r].title=l,n.message.attachment.payload.elements[r].subtitle=c,n.message.attachment.payload.elements[r].image_url=i,o(n)}),Aa(Da(a),"onBlurHandler",function(e){var t=e.target;a.__editTemplate(t)}),Aa(Da(a),"setCurrentButton",function(e,t){var n=a.props.element.buttons[t];n.buttonIndex=t,a.setState({currentButton:n},function(){a.toggleButtonForm(!0)})}),Aa(Da(a),"deleteButton",function(e,t){e.stopPropagation(),e.preventDefault();var n=a.props,o=n.template,r=n._editTemplate,s=n.elementIndex;o.message.attachment.payload.elements[s].buttons.splice(t,1),r(o)}),Aa(Da(a),"_editButtonOfTemplate",function(e,t){var n=a.props,o=n.template,r=n.elementIndex,s=n._editTemplate;o.message.attachment.payload.elements[r].buttons[t]=e,s(o)}),Aa(Da(a),"_addButtonToTemplate",function(e){var t=a.props,n=t.template,o=t.elementIndex,r=t._editTemplate;n.message.attachment.payload.elements[o].buttons.push(e),r(n)}),Aa(Da(a),"deleteElement",function(){a.setState({elementIsBeingDeleted:!0});var e=a.props,t=e.template,n=e.elementIndex,o=e._editTemplate,r=e.elements;r.splice(n,1),t.message.attachment.payload.elements=Pa(r),o(t)});var r=e.element,s=r.title,l=r.subtitle,u=r.image_url;return a.state={title:s||"",subtitle:l||"",image_url:u||null,loader:!1,elementIsBeingDeleted:null,buttons:[],errors:{},openButtonForm:!1,currentButton:void 0},a}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ba(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidMount",value:function(){console.log("mounted")}},{key:"componentDidUpdate",value:function(e,t){this.props.elements.length!==e.elements.length&&this.setState({elementIsBeingDeleted:!1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.loader,n=t.image_url,r=t.title,s=t.subtitle,l=t.openButtonForm,c=t.currentButton,i=t.errors,u=t.elementIsBeingDeleted,p=this.props,m=p.template,d=p.image_url,f=p.elementIndex,b=p.blocks,y=p.element,h=p.animation,_=p.newBlockIsLoading,g=p.elementsLength,E=p.templateIsBeingDeleted,v=y&&y.buttons,k=v||this.state.buttons;return o.a.createElement(zt.animated.div,{className:"mr-1",style:h},u&&o.a.createElement("div",{className:"overlayer"},o.a.createElement(R,{width:30})),E&&o.a.createElement("div",{className:"overlayer"},o.a.createElement(R,{width:30})),o.a.createElement(va,{className:"img-template__img-uploader",handleInputChange:this.handleImageInput,loader:a,templateId:m._id||"",image_url:d||n,index:f}),g>1&&o.a.createElement("span",{onClick:this.deleteElement,style:{position:"absolute",top:"-34px",right:"-17px",width:"25px",height:"25px",fontSize:"25px",cursor:"pointer",fontWeight:"bold"},title:"Delete Element"},"×"),o.a.createElement("div",{className:"p-2",style:{background:"#FFF"}},o.a.createElement("div",{style:{position:"relative"}},o.a.createElement(ie,{name:"title",value:r,onChange:this.handleInputChange,placeholder:"Title.. *required",isvalid:i.title?"false":"true",required:!0,maxLength:80,feedback:i.title,className:"mb-2",style:{borderRadius:"7px",padding:"30px 10px",border:"1px solid #DDD"},onBlur:this.onBlurHandler}),o.a.createElement("span",{className:"badge badge-pill badge-primary",style:{position:"absolute",left:"215px",bottom:"0",zIndex:"9",opacity:.7}},r.length)),o.a.createElement("div",{style:{position:"relative"}},o.a.createElement(ie,{name:"subtitle",value:s,onChange:this.handleInputChange,placeholder:"Subtitle..",isvalid:i.subtitle?"false":"true",feedback:i.subtitle,maxLength:80,style:{borderRadius:"0",paddingRight:"20px",fontSize:"14px"},onBlur:this.onBlurHandler}),o.a.createElement("span",{className:"badge badge-pill badge-primary",style:{position:"absolute",left:"215px",bottom:"0",zIndex:"9",opacity:.7}},s.length))),o.a.createElement("ul",{className:"buttons-container list-unstyled"},k.map(function(t,a){return o.a.createElement(zt.Transition,{key:a,from:{transform:"translate3d(0,-10px,0)",opacity:0},enter:{transform:"translate3d(0,0px,0)",opacity:1},leave:{transform:"translate3d(0,-10px,0)",opacity:0}},function(){return function(n){return o.a.createElement(zt.animated.div,{onClick:function(t){e.setCurrentButton(t,a)},key:a,style:n},o.a.createElement("li",{style:{zIndex:"100",position:"relative",cursor:"pointer"},className:"btn__add-btn btn"},o.a.createElement("span",null,t.title),o.a.createElement("button",{className:"btn__icon deleteButton_btn has-fa-icon",title:"delete this button",type:"button",onClick:function(t){e.deleteButton(t,a)}},o.a.createElement("span",{className:"fa-icon-cover"}),o.a.createElement(Q.a,{icon:"trash-alt",size:"sm"}))))}})})),o.a.createElement("button",{type:"button",className:"btn__add-btn btn",onClick:function(){return e.toggleButtonForm(!0)}},"Add Button"),l&&o.a.createElement(Ua,{native:!0},function(t){return o.a.createElement(na,{toggleButtonForm:e.toggleButtonForm,animation:t,blocks:b,template:m,buttons:k,button:c,_editTemplate:e.props._editTemplate,_createBlock:e.props._createBlock,_editButtonOfTemplate:e._editButtonOfTemplate,_addButtonToTemplate:e._addButtonToTemplate,newBlockIsLoading:_})}))}}])&&xa(a.prototype,r),s&&xa(a,s),t}(),Ha=(a(799),function(){return o.a.createElement("div",{className:"loading"},o.a.createElement("div",{className:"thumbnail"},o.a.createElement("div",{className:"black"}),o.a.createElement("div",{className:"caption"},o.a.createElement("div",{className:"p"}),o.a.createElement("div",{className:"p2"}),o.a.createElement("div",{className:"p"}),o.a.createElement("div",{className:"p2"}))))});function Ra(e){return(Ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function za(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ga(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qa(e){return(qa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Va(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ka(e,t){return(Ka=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Ya=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=qa(t).call(this),a=!o||"object"!==Ra(o)&&"function"!=typeof o?Va(n):o,Wa(Va(a),"__deleteTemplate",function(e){a.setState({templateIsBeingDeleted:!0});var t=a.props;(0,t._deleteTemplate)(t.template._id)}),Wa(Va(a),"addElement",function(){a.setState({newElementLoading:!0});var e=function(e){for(var t=1;t<arguments.length;t++)if(t%2){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){Wa(e,t,a[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}({},a.props.template);e.message.attachment.payload.elements=[].concat(za(a.props.elements),[{title:"",image_url:"",subtitle:"",buttons:[]}]),a.props._editTemplate(e)}),a.state={templateIsLoading:void 0,modalId:se()(),galleryTemplateId:se()(),newElementLoading:null,templateIsBeingDeleted:null},a}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ka(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidUpdate",value:function(e,t){this.props.elements.length>e.elements.length&&this.setState({newElementLoading:!1})}},{key:"componentDidMount",value:function(){d()("#".concat(this.state.galleryTemplateId)).parents(".template-form__gallery").scrollLeft(1e3)}},{key:"render",value:function(){var e=this.props,t=e.template,a=e._editTemplate,n=e.blocks,r=e.newBlockIsLoading,s=e._createBlock,l=e.animation,c=e.elements,i=this.state,u=i.modalId,p=i.galleryTemplateId,m=i.newElementLoading,f=i.templateIsBeingDeleted;return o.a.createElement(o.a.Fragment,null,o.a.createElement(oa,{modalId:u,title:"Delete Template!",message:"Are you sure you want to delete this template ?",doActionButtonTitle:"Delete",actionButtonBootstrapClass:"danger",action:this.__deleteTemplate}),o.a.createElement("div",{className:"gallery-template d-flex mt-5 mb-1 ",id:p,style:{position:"relative"}},o.a.createElement("button",{className:"btn__icon deleteButton_btn has-fa-icon",title:"delete this template",style:{left:"-29px",top:"-14px"},type:"button",onClick:function(){return d()("#".concat(u)).modal("show")}},o.a.createElement("span",{className:"fa-icon-cover"}),o.a.createElement(Q.a,{icon:"trash",size:"sm"})),c.map(function(e,i){return o.a.createElement(Fa,{key:se()(),element:e,template:t,elementIndex:i,elementsLength:c.length,blocks:n,newBlockIsLoading:r,_editTemplate:a,_createBlock:s,animation:l,elements:za(c),templateIsBeingDeleted:f})}),o.a.createElement("div",{className:"d-flex justify-content-center align-items-center ml-2 pr-2"},m&&o.a.createElement("div",{className:"",style:{position:"relative",width:"250px",height:"100%"}},o.a.createElement(Ha,null)),o.a.createElement("button",{onClick:this.addElement,className:"btn btn-primary"},"+"))))}}])&&Ga(a.prototype,r),s&&Ga(a,s),t}();function Ja(e){return(Ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qa(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Za(e){return(Za=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $a(e,t){return($a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function en(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var tn=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=Za(t).call(this,e),a=!o||"object"!==Ja(o)&&"function"!=typeof o?Xa(n):o,en(Xa(a),"datalistChangeHandler",function(e){var t=e.target.value,n=d()("#".concat(a.state.blocksDatalistId)).find("[value='".concat(t,"']")).data("id");n||a.setState({errors:{blockid:!0}}),a.setState({blockid:n,unCreatedBlockName:t},function(){a.editTemplate()}),""===t.trim()&&a.setState({blockid:null})}),en(Xa(a),"onChangeSeconds",function(e){console.log("E ",e.target.value),a.setState({seconds:e.target.value},function(){d()("#seconds_".concat(a.props.template._id," option[value=").concat(a.state.seconds,"]")).attr("selected","selected"),a.props.template._id&&a.editTemplate()})}),en(Xa(a),"editTemplate",function(){var e=a.props,t=e.template,n=e._editTemplate;a.setState({errors:{}}),t.redirect=a.state.blockid,t.valid=!0,n(t)}),en(Xa(a),"__deleteTemplate",function(){var e=a.props;(0,e._deleteTemplate)(e.template._id)}),a.state={botId:e.match.params.botid,blocksDatalistId:se()(),blockid:e.template.redirect,errors:{blockid:!1}},a}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$a(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.template;e._editTemplate;try{if(t.redirect){var a=this.props.blocks.find(function(e){return e._id===t.redirect}).name;console.log("BLOCK NAM ",a),a&&d()("#input_".concat(this.state.blocksDatalistId)).val(a)}}catch(e){console.log(e)}t.redirect||this.setState({errors:{blockid:!0}}),d()("#seconds_".concat(this.props.template._id," option[value=").concat(this.state.seconds,"]")).attr("selected","selected")}},{key:"render",value:function(){for(var e=this.state,t=e.errors,a=e.blocksDatalistId,n=[],r=1;r<=20;r++)n.push(o.a.createElement("option",{value:r},r,"s"));var s=this.props.template._id;return o.a.createElement("div",{className:"typing-template"},o.a.createElement(oa,{modalId:"typing-".concat(s),title:"Delete Template!",message:"Are you sure you want to delete this template ?",doActionButtonTitle:"Delete",actionButtonBootstrapClass:"danger",action:this.__deleteTemplate}),o.a.createElement("button",{className:"btn__icon deleteButton_btn has-fa-icon",title:"delete this template",style:{left:"-29px",top:"-14px"},type:"button",onClick:function(){return d()("#typing-".concat(s)).modal("show")}},o.a.createElement("span",{className:"fa-icon-cover"}),o.a.createElement(Q.a,{icon:"trash",size:"sm"})),o.a.createElement("div",{className:"typing-template__header",style:{background:"#007bc3"}},o.a.createElement("p",null,"Redirect to block")),o.a.createElement("div",{className:"typing-template__body"},o.a.createElement("div",{className:"typing-template__body__info",style:{flex:"1"}},"choose next block being sent to user . it will help you to make good flow to your bot",o.a.createElement("br",null),o.a.createElement("small",{style:{color:"grey"}},"Note : it must be last element in your sequence")),o.a.createElement("div",{className:"typing-template__body__time"},o.a.createElement(ie,{type:"text",id:"input_".concat(a),name:"blockid",onChange:this.datalistChangeHandler,placeholder:"Block *required",isvalid:t.blockid?"false":"true",required:!0,feedback:t.blockid,className:"w-100 border",list:a}),o.a.createElement("datalist",{id:a},this.props.blocks.map(function(e,t){return o.a.createElement("option",{key:t,"data-id":e._id,value:e.name})})))))}}])&&Qa(a.prototype,r),s&&Qa(a,s),t}(),an=Object(F.b)()(Object(u.f)(tn));function nn(e){return(nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function on(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rn(e){return(rn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ln(e,t){return(ln=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var un=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=rn(t).call(this,e),a=!o||"object"!==nn(o)&&"function"!=typeof o?sn(n):o,cn(sn(a),"onChangeSeconds",function(e){console.log("E ",e.target.value),a.setState({seconds:e.target.value},function(){d()("#seconds_".concat(a.props.template._id," option[value=").concat(a.state.seconds,"]")).attr("selected","selected"),a.props.template._id&&a.editTemplate()})}),cn(sn(a),"editTemplate",function(){var e=a.props,t=e.template,n=e._editTemplate;a.setState({errors:{}}),t.message="",t.seconds=a.state.seconds,t.valid=!0,n(t)}),cn(sn(a),"__deleteTemplate",function(){var e=a.props;(0,e._deleteTemplate)(e.template._id)}),a.state={seconds:e.template.seconds||1,botId:e.match.params.botid},a}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ln(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidMount",value:function(){d()("#seconds_".concat(this.props.template._id," option[value=").concat(this.state.seconds,"]")).attr("selected","selected")}},{key:"render",value:function(){for(var e=[],t=1;t<=20;t++)e.push(o.a.createElement("option",{value:t},t,"s"));var a=this.props.template._id;return o.a.createElement("div",{className:"typing-template"},o.a.createElement(oa,{modalId:"typing-".concat(a),title:"Delete Template!",message:"Are you sure you want to delete this template ?",doActionButtonTitle:"Delete",actionButtonBootstrapClass:"danger",action:this.__deleteTemplate}),o.a.createElement("button",{className:"btn__icon deleteButton_btn has-fa-icon",title:"delete this template",style:{left:"-29px",top:"-14px"},type:"button",onClick:function(){return d()("#typing-".concat(a)).modal("show")}},o.a.createElement("span",{className:"fa-icon-cover"}),o.a.createElement(Q.a,{icon:"trash",size:"sm"})),o.a.createElement("div",{className:"typing-template__header"},o.a.createElement("p",null,"typing...")),o.a.createElement("div",{className:"typing-template__body"},o.a.createElement("div",{className:"typing-template__body__info"},"select number of seconds that this typing block will shown to the user"),o.a.createElement("div",{className:"typing-template__body__time"},o.a.createElement("div",{className:"form-group"},o.a.createElement("select",{class:"form-control",id:"seconds_".concat(a),onChange:this.onChangeSeconds},e.map(function(e){return e}))))))}}])&&on(a.prototype,r),s&&on(a,s),t}(),pn=Object(F.b)()(Object(u.f)(un));function mn(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function dn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var fn=function(e){var t=e.blocks,a=e.template,n=e.animation;switch(e.renderedTemplate||e.selectedTemplate){case"button":var r=function(e){for(var t=1;t<arguments.length;t++)if(t%2){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){dn(e,t,a[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}({},a);if(Lt(r.message.attachment)){var s=r.message.text,l=r._id;(r=Gt("button")).message.attachment.payload.text=s,r.message.attachment.payload.buttons=[],r._id=l}return o.a.createElement("div",{className:"template-form my-3"},o.a.createElement(fa,{blocks:t,template:r,buttons:mn(r.message.attachment.payload.buttons),_editTemplate:e._editTemplate,_deleteTemplate:e._deleteTemplate,_createBlock:e._createBlock,animation:n,newBlockIsLoading:e.newBlockIsLoading}));case"image":return o.a.createElement("div",{className:"template-form my-3"},o.a.createElement(Ta,{_editTemplate:e._editTemplate,_deleteTemplate:e._deleteTemplate,template:a,animation:n}));case"generic":return o.a.createElement("div",{className:"template-form my-3 template-form__gallery"},o.a.createElement(Ya,{animation:n,elements:a.message.attachment.payload.elements,template:a,_editTemplate:e._editTemplate,_deleteTemplate:e._deleteTemplate,_createBlock:e._createBlock,newBlockIsLoading:e.newBlockIsLoading,blocks:t}));case"typing":return o.a.createElement("div",{className:"template-form my-3"},o.a.createElement(pn,{blocks:t,template:a,animation:n,_editTemplate:e._editTemplate,_deleteTemplate:e._deleteTemplate}));case"redirect":return o.a.createElement("div",{className:"template-form my-3"},o.a.createElement(an,{blocks:t,template:a,_editTemplate:e._editTemplate,_deleteTemplate:e._deleteTemplate,animation:n}));default:return null}};function bn(e){return(bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yn(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hn(e){return(hn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gn(e,t){return(gn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function En(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var vn=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=hn(t).call(this),a=!o||"object"!==bn(o)&&"function"!=typeof o?_n(n):o,En(_n(a),"_addTemplate",function(e){var t=Gt(e);a.props.addTemplate(a.state.botId,a.state.scheduleId,t,"schedule")}),En(_n(a),"_editTemplate",function(e){a.props.editTemplate(a.state.botId,a.state.scheduleId,e._id,e,"schedule")}),En(_n(a),"_deleteTemplate",function(e){a.props.deleteTemplate(a.state.botId,a.state.scheduleId,e,"schedule")}),En(_n(a),"_createBlock",function(e,t){a.props.createBlock(a.state.botId,e,t)}),a.state={botId:e.match.params.botid,scheduleId:e.match.params.scheduleid,currentSchedule:{}},a}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gn(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidMount",value:function(){this.props.fetchTemplates(this.props.match.params.botid,this.props.match.params.scheduleid,"schedule")}},{key:"componentDidUpdate",value:function(e,t){this.props.currentSchedule!==e.currentSchedule&&this.setState({currentSchedule:this.props.currentSchedule}),e.match.params.scheduleid!==this.props.match.params.scheduleid&&(this.setState({scheduleId:this.props.match.params.scheduleId}),this.props.fetchTemplates(this.props.match.params.botid,this.props.match.params.scheduleid,"schedule"))}},{key:"render",value:function(){var e=this,t=this.props,a=t.templates,n=t.blocks,r=t.newBlockIsLoading,s=t.templateIsLoading;return t.templatesAreLoading?o.a.createElement("div",{className:"overlayer with-navs",style:{left:"338px"}},o.a.createElement(R,{width:40})):o.a.createElement("main",{className:"schedule"},o.a.createElement("div",{className:"create-template"},o.a.createElement("h5",null,"Add Schedule"),o.a.createElement("p",null,o.a.createElement("small",{className:"text-muted"},"add different types of message elements")),o.a.createElement("div",null,o.a.createElement("section",{className:"templates-container "},o.a.createElement("div",{className:"templates"},o.a.createElement(zt.Transition,{items:a,keys:function(e){return e._id},from:{opacity:0,transform:"scale(0)"},enter:{opacity:1,transform:"scale(1)"},leave:{opacity:0}},function(t){return function(a){return o.a.createElement(fn,{key:t._id,selectedTemplate:t.type,blocks:n,template:t,_deleteTemplate:e._deleteTemplate,_editTemplate:e._editTemplate,_createBlock:e._createBlock,animation:a,newBlockIsLoading:r})}})),o.a.createElement("br",null),!0===s&&o.a.createElement("div",{className:"my-3"},o.a.createElement(R,{LoaderName:"dots",style:{transform:"scale(0.7)"}})),o.a.createElement(Pt,{templates:a,_addTemplate:this._addTemplate})),o.a.createElement(Rt,{startDate:this.state.currentSchedule.start_date,endDate:this.state.currentSchedule.end_date,hours:Ie()(this.state.currentSchedule.start_date).format("hh"),mins:Ie()(this.state.currentSchedule.start_date).format("mm"),time:Ie()(this.state.currentSchedule.start_date).format("a"),botId:this.props.match.params.botid,scheduleId:this.props.match.params.scheduleid}))))}}])&&yn(a.prototype,r),s&&yn(a,s),t}(),kn=Object(F.b)(function(e){return{templates:e.schedule.template.templates,currentSchedule:e.schedule.currentSchedule,templateIsLoading:e.schedule.template.isLoading,blocks:e.block.blocks,newBlockIsLoading:e.block.newBlockIsLoading,templatesAreLoading:e.schedule.template.templatesAreLoading}},{fetchTemplates:Ct,addTemplate:jt,editTemplate:Tt,deleteTemplate:Nt,createBlock:we})(vn);function wn(e){return(wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function On(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Sn(e){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nn(e,t){return(Nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Cn=function(e){function t(){var e,a,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return n=this,o=(e=Sn(t)).call.apply(e,[this].concat(s)),a=!o||"object"!==wn(o)&&"function"!=typeof o?jn(n):o,Tn(jn(a),"state",{schedules:[]}),Tn(jn(a),"botId",a.props.match.params.botid),Tn(jn(a),"createSchedule",function(){a.props.createSchedule(a.botId)}),a}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nn(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidMount",value:function(){this.props.fetchSchedules(this.botId),this.props.fetchBlocks(this.props.match.params.botid)}},{key:"componentDidUpdate",value:function(e,t){e.schedules!==this.props.schedules&&this.setState({schedules:this.props.schedules})}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"schedule-layout has-sidebar has-navbar"},o.a.createElement("div",{className:"blocks-schedule with-scroll",style:{top:"70px",paddingTop:"10px"}},o.a.createElement("button",{className:"btn btn__blue has-fa-icon",style:{width:"100%",borderRadius:"10px",height:"40px"},type:"button",onClick:this.createSchedule},o.a.createElement("span",{className:"fa-icon-cover"}),!0===this.props.newScheduleHasLoaded&&o.a.createElement(Q.a,{icon:"plus"}),this.props.newScheduleIsLoading&&o.a.createElement(R,{width:16})),this.props.schedulesAreLoading?o.a.createElement("div",{className:"mt-3"},o.a.createElement(R,{width:25,top:!0})):this.state.schedules.map(function(t,a){return o.a.createElement(St,{schedule:t,botId:e.props.match.params.botid,key:a})})),o.a.createElement(u.b,{history:bs},o.a.createElement(u.a,{path:"/dashboard/bot/schedules/:botid/:scheduleid",component:kn}))))}}])&&On(a.prototype,r),s&&On(a,s),t}(),Pn=Object(F.b)(function(e){return{templates:e.schedule.template.templates,schedules:e.schedule.schedules,schedulesAreLoading:e.schedule.schedulesAreLoading,newScheduleIsLoading:e.schedule.newScheduleIsLoading,newScheduleHasLoaded:e.schedule.newScheduleHasLoaded}},{fetchSchedules:function(e){return function(t){t({type:"FETCH_SCHEDULES"}),c.a.get("".concat(i,"api/bot/schedule/get-all/").concat(e)).then(function(e){var a=e.data;t({type:"FETCH_SCHEDULES_SUCCESS",schedules:a.schedules})}).catch(function(e){return t({type:"FETCH_SCHEDULE_FAILURE"})})}},createSchedule:function(e){return function(t){t({type:"CREATE_SCHEDULE"}),c.a.post("".concat(i,"api/bot/schedule/create/").concat(e),{data:{start_date:Ie()().add(10,"hours").toString()}}).then(function(a){var n=a.data;t({type:"CREATE_SCHEDULE_SUCCESS",schedule:n.schedule}),bs.push("/dashboard/bot/schedules/".concat(e,"/").concat(n.schedule._id))}).catch(function(e){console.log("failed to create new schedule")})}},fetchBlocks:ke})(Cn);function In(e){return(In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xn(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ln(e){return(Ln=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bn(e,t){return(Bn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function An(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Mn=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=Ln(t).call(this),a=!o||"object"!==In(o)&&"function"!=typeof o?Dn(n):o,An(Dn(a),"deleteBlock",function(e){a.props.deleteBlock(a.botId,a.state.block._id),d()(e.target).parents("#schdule_section").slideUp(400)}),An(Dn(a),"addActiveClass",function(e){e.currentTarget}),a.state={block:e.block},a.botId=e.match.params.botid,a}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bn(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidMount",value:function(){this.setState({block:this.props.block})}},{key:"componentDidUpdate",value:function(e,t){e.block!==this.props.block&&this.setState({block:this.props.block})}},{key:"render",value:function(){return o.a.createElement("div",{style:{position:"relative"},className:"schdule_section"},o.a.createElement("button",{onClick:this.deleteBlock,className:"d-block badge has-fa-icon btn  btn-secondary d-flex justify-content-center align-items-center",id:"delete_schedule",style:{position:"absolute",right:"3px",top:"5px",zIndex:"1000",width:"20px",height:"20px",borderRadius:"12px",cursor:"pointer"}},o.a.createElement(Q.a,{icon:"times"}),o.a.createElement("span",{className:"fa-icon-cover"})),o.a.createElement(P.b,{to:"/dashboard/bot/blocks/".concat(this.botId,"/").concat(this.state.block._id),className:"block-schedule",activeClassName:"block--active",style:{padding:"0"}},o.a.createElement("button",{type:"button",className:"btn__icon has-fa-icon w-100 h-100 d-flex justify-content-center align-items-center"},o.a.createElement("h5",{style:{margin:0,fontWeight:"bold"}},this.state.block.name))))}}])&&xn(a.prototype,r),s&&xn(a,s),t}(),Un=Object(F.b)(null,{deleteBlock:function(e,t){return function(a){c.a.delete("".concat(i,"api/bot/block/remove/").concat(e,"/").concat(t)).then(function(n){a({type:"DELETE_BLOCK",blockId:t}),bs.push("/dashboard/bot/blocks/".concat(e))})}}})(Object(u.f)(Mn));function Fn(e){return(Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hn(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Rn(e){return(Rn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gn(e,t){return(Gn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Vn=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=Rn(t).call(this),a=!o||"object"!==Fn(o)&&"function"!=typeof o?zn(n):o,qn(zn(a),"_addTemplate",function(e){var t=Gt(e);a.props.addTemplate(a.state.botId,a.state.blockId,t,"block")}),qn(zn(a),"_editTemplate",function(e){a.props.editTemplate(a.state.botId,a.state.blockId,e._id,e,"block")}),qn(zn(a),"_deleteTemplate",function(e){a.props.deleteTemplate(a.state.botId,a.state.blockId,e,"block")}),qn(zn(a),"_createBlock",function(e,t){a.props.createBlock(a.state.botId,e,t)}),a.state={botId:e.match.params.botid,blockId:e.match.params.blockid},a}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gn(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidMount",value:function(){this.props.fetchTemplates(this.props.match.params.botid,this.props.match.params.blockid,"block")}},{key:"componentDidUpdate",value:function(e,t){e.match.params.blockid!==this.props.match.params.blockid&&(this.setState({blockId:this.props.match.params.blockid}),this.props.fetchTemplates(this.props.match.params.botid,this.props.match.params.blockid,"block"))}},{key:"render",value:function(){var e=this,t=this.props,a=t.templates,n=t.blocks,r=t.newBlockIsLoading,s=t.templateIsLoading,l=t.templatesAreLoading;t.templateIsEditing;return l?o.a.createElement("div",{className:"overlayer with-navs",style:{left:"338px"}},o.a.createElement(R,{width:40})):o.a.createElement("main",{className:"schedule"},o.a.createElement("div",{className:"create-template"},o.a.createElement("h5",null,"Add blocks"),o.a.createElement("p",null,o.a.createElement("small",{className:"text-muted"},"add different types of message elements")),o.a.createElement("section",{className:""},o.a.createElement(zt.Transition,{items:a,keys:function(e){return e._id},from:{opacity:0,transform:"scale(0)"},enter:{opacity:1,transform:"scale(1)"},leave:{opacity:0}},function(t){return function(a){return o.a.createElement(fn,{key:t._id,selectedTemplate:t.type,blocks:n,template:t,_deleteTemplate:e._deleteTemplate,_editTemplate:e._editTemplate,_createBlock:e._createBlock,animation:a,newBlockIsLoading:r})}}),!0===s&&o.a.createElement(R,{style:{transform:"scale(0.7)"},LoaderName:"dots"}),o.a.createElement(Pt,{templates:a,_addTemplate:this._addTemplate}))))}}])&&Hn(a.prototype,r),s&&Hn(a,s),t}(),Kn=Object(F.b)(function(e){return{templates:e.block.template.templates,templatesAreLoading:e.block.template.templatesAreLoading,templateIsLoading:e.block.template.isLoading,blocks:e.block.blocks,newBlockIsLoading:e.block.newBlockIsLoading,templateIsEditing:e.block.template.templateIsEditing}},{fetchTemplates:Ct,addTemplate:jt,editTemplate:Tt,deleteTemplate:Nt,createBlock:we})(Object(u.f)(Vn));function Wn(e){return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yn(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Jn(e){return(Jn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zn(e,t){return(Zn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var $n=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=Jn(t).call(this),a=!o||"object"!==Wn(o)&&"function"!=typeof o?Qn(n):o,Xn(Qn(a),"createBlock",function(e){e.preventDefault(),Lt(a.state.blockName.trim())?a.setState({blockNameError:"block name is required"}):a.props.createBlock(a.props.match.params.botid,a.state.blockName).then(function(){a.hideBlockNameInput()})}),Xn(Qn(a),"showBlockNameInput",function(){a.setState({showBlockNameInput:!0})}),Xn(Qn(a),"hideBlockNameInput",function(){a.setState({showBlockNameInput:!1,blockName:""})}),Xn(Qn(a),"handleOnChange",function(e){return a.setState(Xn({},e.target.name,e.target.value))}),a.state={blocks:[],blockName:"",showBlockNameInput:!1},a}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zn(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidMount",value:function(){this.props.fetchBlocks(this.props.match.params.botid)}},{key:"componentDidUpdate",value:function(e,t){e.blocks!=this.props.blocks&&this.setState({blocks:this.props.blocks},function(){})}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"schedule-layout has-sidebar has-navbar"},o.a.createElement("div",{className:"blocks-schedule with-scroll",style:{zIndex:"9",backgroundColor:"#efefef",top:" 70px",paddingTop:"10px"}},o.a.createElement("button",{className:"btn btn__blue has-fa-icon",style:{width:"100%",borderRadius:"10px",height:"40px"},type:"button",onClick:this.showBlockNameInput},o.a.createElement("span",{className:"fa-icon-cover"}),!0===this.props.newBlockIsLoading?o.a.createElement(R,{width:16}):o.a.createElement(Q.a,{icon:"plus"})),o.a.createElement(zt.Transition,{items:this.state.showBlockNameInput,from:{marginTop:-100,opacity:0,display:"none"},enter:{marginTop:0,opacity:1,display:"block"},leave:{marginTop:-100}},function(t){return t&&function(t){return o.a.createElement("div",{className:"mb-5",style:t},o.a.createElement("form",{onSubmit:e.createBlock,noValidate:!0,id:"block_name",className:"form-group",style:{minHeight:"55px"}},o.a.createElement(ie,{name:"blockName",value:e.state.blockName,onChange:e.handleOnChange,placeholder:"Block name..",required:!0,className:"border mt-3 ",feedback:e.state.blockNameError,isvalid:e.state.blockNameError?"false":"true"}),o.a.createElement("button",{type:"submit",className:"btn btn-secondary btn-sm float-right mt-1"},"Save")))}}),this.props.blocksAreLoading?o.a.createElement("div",{className:"mt-3"},o.a.createElement(R,{width:25,top:!0})):o.a.createElement(zt.Trail,{items:this.state.blocks,keys:function(e){return e._id},from:{left:"-100%",opacity:0,position:"relative"},to:{left:"0",opacity:1}},function(t){return function(a){return o.a.createElement("div",{style:a},o.a.createElement(Un,{block:t,botId:e.props.match.params.botId}))}})),o.a.createElement(u.b,{history:bs},o.a.createElement(u.a,{path:"/dashboard/bot/blocks/:botid/:blockid",render:function(){return o.a.createElement(Kn,{key:e.props.match.params.blockid,showBlockNameInput:e.showBlockNameInput})}}))))}}])&&Yn(a.prototype,r),s&&Yn(a,s),t}(),eo=Object(F.b)(function(e){return{templates:e.block.template.templates,blocks:e.block.blocks,blocksAreLoading:e.block.blocksAreLoading,newBlockIsLoading:e.block.newBlockIsLoading}},{fetchBlocks:ke,createBlock:we})(Object(u.f)($n)),to=a(109),ao=a.n(to);function no(e){return(no="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oo(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ro(e,t){return!t||"object"!==no(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function so(e){return(so=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lo(e,t){return(lo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var co=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ro(this,so(t).call(this,e))}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lo(e,t)}(t,n["Component"]),a=t,(r=[{key:"render",value:function(){return o.a.createElement("div",{className:"card"},o.a.createElement("div",{className:"card__analysis"},o.a.createElement("p",{className:"card__analysis__title"},this.props.title),o.a.createElement(Q.a,{className:"card__analysis__icon ".concat("paid"==this.props.title?"card__anaylsis__icon--orange":""),icon:this.props.icon}),o.a.createElement("p",{className:"card__analysis__data"},this.props.data)))}}])&&oo(a.prototype,r),s&&oo(a,s),t}(),io=a(185),uo=a.n(io);function po(e){return(po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mo(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fo(e,t){return!t||"object"!==po(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bo(e){return(bo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yo(e,t){return(yo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ho={},_o=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),fo(this,bo(t).call(this,e))}var a,r,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yo(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidUpdate",value:function(e){console.log("INSIDE ",this.props.data),this.props.data&&(ho.data.datasets[0].data=this.props.data,ho.update())}},{key:"componentDidMount",value:function(){ao.a.defaults.global.legend.display=!1,ao.a.defaults.scale.gridLines.display=!1;var e=s.a.findDOMNode(this.refs.chart).getContext("2d");ho=new ao.a(e,{type:"line",data:{labels:this.props.labels,datasets:[{fill:!1,borderColor:"rgba(99,195,194)",data:this.props.data}],options:{}}})}},{key:"render",value:function(){return o.a.createElement("div",{className:"chart-block"},o.a.createElement("p",{className:"chart-block__header"},this.props.header),o.a.createElement("p",{className:"chart-block__desc"},this.props.description),o.a.createElement("canvas",{ref:"chart"}))}}])&&mo(a.prototype,r),l&&mo(a,l),t}();function go(e){return(go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Eo(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vo(e){return(vo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ko(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wo(e,t){return(wo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Oo=function(e){function t(){var e,a,n,o,r,s,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,i=new Array(c),u=0;u<c;u++)i[u]=arguments[u];return n=this,a=!(o=(e=vo(t)).call.apply(e,[this].concat(i)))||"object"!==go(o)&&"function"!=typeof o?ko(n):o,r=ko(a),l={analysis:{group:[0,0,0,0,0,0,0,0,0,0,0,0],today:0,users_no:0}},(s="state")in r?Object.defineProperty(r,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[s]=l,a}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wo(e,t)}(t,n["Component"]),a=t,s=[{key:"getDerivedStateFromProps",value:function(e,t){return e.analysis!==t.analysis&&e.analysis?{analysis:e.analysis}:t}}],(r=[{key:"componentDidMount",value:function(){var e;this.props.dispatch((e=this.props.match.params.botid,function(t){c.a.get("".concat(i,"api/bot/analysis/get-all/").concat(e)).then(function(e){t({type:"GET_ANALYSIS",analysis:e.data})})}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"analysis"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-6"},o.a.createElement("div",{className:"card card__charts"},o.a.createElement(_o,{header:"users number",description:"number of users this year",data:this.state.analysis.group,labels:["1","2","3","4","5","6","7","8","9","10","11","12"]}))),o.a.createElement("div",{className:"col-md-6"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-6"},o.a.createElement(co,{title:"users",icon:"users",data:uo()(this.state.analysis.users_no)})),o.a.createElement("div",{className:"col-md-6"},o.a.createElement(co,{title:"today",icon:"door-open",data:uo()(this.state.analysis.today)}))))))}}])&&Eo(a.prototype,r),s&&Eo(a,s),t}(),So=Object(F.b)(function(e){return{analysis:e.bot.analysis}})(Oo);function jo(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function No(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function To(e){return(To="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Co(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Po(e){return(Po=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Io(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xo(e,t){return(xo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Lo(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Do=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=Po(t).call(this),a=!o||"object"!==To(o)&&"function"!=typeof o?Io(n):o,Lo(Io(a),"_addTemplate",function(e){var t=Gt(e);a.props.addTemplate(t,a.state.botId)}),Lo(Io(a),"_editTemplate",function(e){a.props.editTemplate(e,a.state.botId)}),Lo(Io(a),"_deleteTemplate",function(e){a.props.removeTemplate(a.state.botId,e)}),Lo(Io(a),"_createBlock",function(e,t){a.props.createBlock(a.state.botId,e,t)}),a.state={botId:e.match.params.botid},a}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xo(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidMount",value:function(){this.props.fetchBlocks(this.state.botId),this.props.fetchTemplates(this.state.botId),console.log("welcome mounter")}},{key:"render",value:function(){var e=this,t=this.props,a=t.templates,n=t.blocks,r=t.newBlockIsLoading,s=t.newTemplateIsLoading,l=t.templatesAreLoading;t.templateIsEditing;return o.a.createElement(o.a.Fragment,null,l&&o.a.createElement("div",{className:"overlayer with-navs "},o.a.createElement(R,{width:40})),o.a.createElement("div",{className:"dashboard__page "},o.a.createElement("main",{className:"dashboard__main"},o.a.createElement("h5",null,"Welcome message"),o.a.createElement("section",{className:"template-forms-container"},o.a.createElement(zt.Transition,{items:this.props.templates,keys:function(e){return e._id},from:{opacity:0,transform:"scale(0)"},enter:{opacity:1,transform:"scale(1)"},leave:{opacity:0}},function(t){return function(a){return o.a.createElement(fn,{key:t._id,selectedTemplate:t.type,blocks:n,template:t,_deleteTemplate:e._deleteTemplate,_editTemplate:e._editTemplate,_createBlock:e._createBlock,animation:a,newBlockIsLoading:r})}})),!0===s&&o.a.createElement(R,{style:{transform:"scale(0.7)"},LoaderName:"dots"}),o.a.createElement(Pt,{templates:a,_addTemplate:this._addTemplate}))))}}])&&Co(a.prototype,r),s&&Co(a,s),t}(),Bo=Object(F.b)(function(e){return{choosenTemplateType:e.welcome.template.choosenTemplateType,templates:e.welcome.template.templates,blocks:e.block.blocks,newBlockIsLoading:e.block.newBlockIsLoading,newTemplateIsLoading:e.welcome.template.newTemplateIsLoading,templatesAreLoading:e.welcome.template.templatesAreLoading,templateIsEditing:e.welcome.template.templateIsEditing}},{addTemplate:function(e,t){return function(a){a({type:"ADD_TEMPLATE__WELCOME"}),c.a.post("".concat(i,"api/bot/welcome/create/").concat(t),{data:e}).then(function(e){var t=function(e){for(var t=1;t<arguments.length;t++)if(t%2){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){No(e,t,a[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}({},e.data.template);try{t.message=JSON.parse(t.message)}catch(e){}a({type:"ADD_TEMPLATE_SUCCESS__WELCOME",newTemplate:t})})}},editTemplate:function(e,t){return function(a){a({type:"EDIT_TEMPLATE__WELCOME"}),c.a.post("".concat(i,"api/bot/welcome/edit/").concat(t,"/").concat(e._id),{data:e}).then(function(t){t.data,a({type:"EDIT_TEMPLATE_SUCCESS__WELCOME",newTemplate:e})})}},removeTemplate:function(e,t){return function(a){return c.a.delete("".concat(i,"api/bot/welcome/remove/").concat(e,"/").concat(t)).then(function(e){a({type:"REMOVE_TEMPLATE__WELCOME",templateId:t})})}},chooseTemplate:function(e){return{type:"CHOOSE_TEMPLATE__WELCOME",templateTypeName:e}},resetChoosenTemplate:function(){return{type:"RESET_CHOOSEN_TEMPLATE__WELCOME"}},fetchTemplates:function(e){return function(t){t({type:"FETCH_TEMPLATES__WELCOME",templates:a});var a=[];c.a.get("".concat(i,"api/bot/welcome/get/").concat(e)).then(function(e){var n=e.data;a=(a=jo(n.templates)).map(function(e){try{e.message=JSON.parse(e.message)}catch(e){}return e}),t({type:"FETCH_TEMPLATES_SUCCESS__WELCOME",templates:a})})}},fetchBlocks:ke,createBlock:we})(Do);function Ao(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,{path:"/dashboard/bot/settings/:botid",component:We}),o.a.createElement(u.a,{path:"/dashboard/bot/broadcast/:botid",component:function(){return o.a.createElement("span",null,"schssssssssedules")}}),o.a.createElement(u.a,{exact:!0,path:"/dashboard/bot/ai/:botid",component:ht}),o.a.createElement(u.a,{path:"/dashboard/bot/schedules/:botid",component:Pn}),o.a.createElement(u.a,{path:"/dashboard/bot/analysis/:botid",component:So}),o.a.createElement(u.a,{path:"/dashboard/bot/blocks/:botid",component:eo}),o.a.createElement(u.a,{path:"/dashboard/bot/welcome-message/:botid",component:Bo}))}function Mo(e){return(Mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Uo(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fo(e,t){return!t||"object"!==Mo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ho(e){return(Ho=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ro(e,t){return(Ro=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var zo=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Fo(this,Ho(t).call(this,e))}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ro(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidMount",value:function(){d()('[data-toggle="tooltip"]').tooltip()}},{key:"goHome",value:function(){this.props.history.replace("/")}},{key:"render",value:function(){var e=this.props.id;return o.a.createElement("section",{className:"sidebar"},o.a.createElement("div",{className:"sidebar__header"},o.a.createElement("img",{className:"sidebar__header__image",onClick:this.goHome,src:"https://www.stickpng.com/assets/images/580b57fcd9996e24bc43c39a.png"}),o.a.createElement("div",{className:"sidebar__header__title"})),o.a.createElement("div",{className:"sidebar__body"},o.a.createElement("ul",{className:"sidebar__body__list"},o.a.createElement("li",null," ",o.a.createElement(P.b,{className:"sidebar__body__list__nav",activeClassName:"active-link",to:"/dashboard/bot/welcome-message/"+e},o.a.createElement("i",{"data-toggle":"tooltip",title:"Home",className:"fas fa-home x "}))),o.a.createElement("li",null," ",o.a.createElement(P.b,{"data-toggle":"tooltip",title:"Schedule",className:"sidebar__body__list__nav",activeClassName:"active-link",to:"/dashboard/bot/schedules/"+e},o.a.createElement("i",{className:"fas fa-calendar-alt x "}))),o.a.createElement("li",null," ",o.a.createElement(P.b,{"data-toggle":"tooltip",title:"Blocks",className:"sidebar__body__list__nav",activeClassName:"active-link",to:"/dashboard/bot/blocks/"+e},o.a.createElement("i",{className:"fas fa-th-large x"}))),o.a.createElement("li",null," ",o.a.createElement(P.b,{"data-toggle":"tooltip",title:"settings",className:"sidebar__body__list__nav",activeClassName:"active-link",to:"/dashboard/bot/settings/"+e},o.a.createElement("i",{className:"fas fa-cog x"}))),o.a.createElement("li",null," ",o.a.createElement(P.b,{"data-toggle":"tooltip",title:"Ai",className:"sidebar__body__list__nav",activeClassName:"active-link",to:"/dashboard/bot/ai/"+e},o.a.createElement("i",{className:"fas fa-robot x"}))),o.a.createElement("li",null," ",o.a.createElement(P.b,{className:"sidebar__body__list__nav",activeClassName:"active-link",to:"/dashboard/bot/analysis/"+e},o.a.createElement("i",{"data-toggle":"tooltip",title:"Analysis",className:"fas fa-chart-bar x"}))))))}}])&&Uo(a.prototype,r),s&&Uo(a,s),t}(),Go=Object(u.f)(zo),qo=a(80),Vo=a(436);function Ko(e){for(var t=1;t<arguments.length;t++)if(t%2){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){Wo(e,t,a[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}function Wo(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Yo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pages:[],userLoader:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Ko({},e,{user_id:t.data._id,user_name:t.data.name,image_url:t.data.image_url});case"GET_PAGES":return Ko({},e,{pages:t.pages,userLoader:!1});default:return e}},Jo=a(437);function Qo(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Zo(e){for(var t=1;t<arguments.length;t++)if(t%2){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){Xo(e,t,a[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}function Xo(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var $o,er=[{locale:"default",composer_input_disabled:!1,call_to_actions:[]}],tr=[],ar=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ais:tr,bot:{},bots:[],botLoader:!0,connectedPage:{},persistent_menu:er,welcomeMessage:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_BOT":return Zo({},e,{botLoader:!1,bots:[].concat(Qo(e.bots),[t.data])});case"GET_BOT":return Zo({},e,{botLoader:!1,bot:t.bot});case"GET_BOTS":return console.log(t.bots,"ACTION"),Zo({},e,{botLoader:!1,bots:t.bots});case"DELETE_BOT":return console.log(t),Zo({},e,{bots:e.bots.filter(function(e){return e._id!=t.id})});case"RENAME_BOT":return console.log(t),Zo({},e,{bots:e.bots.map(function(e){return e._id==t.data.id&&(e.name=t.data.newName),e})});case"CONNECT_PAGE":return Zo({},e,{connectedPage:t.page});case"DISCONNECT_PAGE":return Zo({},e,{connectedPage:null});case"SAVE_MENU":return Zo({},e,{persistent_menu:t.persistent_menu});case"ADD_AI":return Zo({},e,{ais:[t.ai].concat(Qo(e.ais))});case"EDIT_AI":return Zo({},e,{ais:e.ais.map(function(e,a){return e._id==t.id?t.ai:e})});case"DELETE_AI":return Zo({},e,{ais:e.ais.filter(function(e,a){return e._id!=t.id})});case"GET_AIS":return Zo({},e,{ais:t.ais});case"GET_ANALYSIS":return Zo({},e,{analysis:t.analysis});default:return e}};function nr(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function or(e){for(var t=1;t<arguments.length;t++)if(t%2){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){rr(e,t,a[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}function rr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var sr=(rr($o={schedules:[],currentSchedule:{},scheduleHasLoaded:!1,schedulesAreLoading:!1,newScheduleIsLoading:!1,newScheduleHasLoaded:!0,errors:{scheduleLoadingError:!1,templatesLoadingError:!1}},"currentSchedule",{}),rr($o,"button",{buttons:[],currentButton:{}}),rr($o,"template",{templates:[],error:null,templateIsEditing:null,isLoading:null,templatesAreLoading:null}),$o);function lr(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function cr(e){for(var t=1;t<arguments.length;t++)if(t%2){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){ir(e,t,a[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}function ir(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ur={blocks:[],currentBlock:{},blockHasLoaded:!1,blocksAreLoading:!1,newBlockIsLoading:null,errors:{blockLoadingError:!1,templatesLoadingError:!1,blockEditError:!1},button:{buttons:[],currentButton:{}},template:{templates:[],error:null,templatesAreLoading:null,templateIsEditing:null,isLoading:null,hasLoaded:!1}};function pr(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function mr(e){for(var t=1;t<arguments.length;t++)if(t%2){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){dr(e,t,a[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}function dr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function fr(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function br(e){for(var t=1;t<arguments.length;t++)if(t%2){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){yr(e,t,a[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}function yr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var hr={template:{templates:[],choosenTemplateType:"",newTemplateIsLoading:null,templatesAreLoading:null,templateIsEditing:null}},_r=Object(Jo.composeWithDevTools)({}),gr=Object(qo.combineReducers)({user:Yo,bot:ar,schedule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_SCHEDULE_TEMPLATE":return or({},e,{template:or({},e.template,{isLoading:!0})});case"ADD_SCHEDULE_TEMPLATE_SUCCESS":return or({},e,{template:or({},e.template,{isLoading:!1,templates:[].concat(nr(e.template.templates),[t.newTemplate])})});case"DELETE_SCHEDULE_TEMPLATE":var a=e.template.templates.filter(function(e){return e._id!==t.id});return or({},e,{template:or({},e.template,{templates:nr(a)})});case"EDIT_SCHEDULE_TEMPLATE":return or({},e,{template:or({},e.template,{templateIsEditing:!0})});case"EDIT_SCHEDULE_TEMPLATE_SUCCESS":var n=e.template.templates.map(function(e){return e._id===t.id?t.newTemplate:e});return or({},e,{template:or({},e.template,{templates:nr(n),templateIsEditing:!1})});case"FETCH_SCHEDULE_TEMPLATES":return or({},e,{template:or({},e.template,{templatesAreLoading:!0})});case"FETCH_SCHEDULE_TEMPLATES_SUCCESS":return or({},e,{template:or({},e.template,{templatesAreLoading:!1,templates:t.templates})});case"FETCH_SCHEDULE_TEMPLATES_FAILURE":return or({},e,{errors:or({},e.errors,{templatesLoadingError:!0}),template:or({},e.template,{templatesAreLoading:!0})});case"FETCH_SCHEDULES":return or({},e,{schedulesAreLoading:!0});case"FETCH_SCHEDULES_SUCCESS":return or({},e,{scheduleHasLoaded:!0,schedulesAreLoading:!1,schedules:t.schedules});case"FETCH_SCHEDULE_FAILURE":return or({},e,{errors:or({},e.errors,{scheduleLoadingError:!0})});case"CREATE_SCHEDULE":return or({},e,{newScheduleIsLoading:!0,newScheduleHasLoaded:!1});case"CREATE_SCHEDULE_SUCCESS":var o=e.schedules;return o.unshift(t.schedule),console.log("schdule comming from action in create schedule succcesss: ",t.schedule),or({},e,{newScheduleIsLoading:!1,newScheduleHasLoaded:!0,schedules:nr(o)});case"SAVE_SCHEDULE":return or({},e,{scheduleIsEditing:!0});case"SAVE_SCHEDULE_SUCCESS":var r=e.schedules.map(function(e){return e._id===t.newSchedule._id?t.newSchedule:e});return or({},e,{schedules:r,scheduleIsEditing:!1});case"SAVE_SCHEDULE_FAILURE":return or({},e,{errors:or({},e.errors,{scheduleEditError:!0})});case"DELET_SCHEDULE":var s=e.schedules.filter(function(e){return e._id!==t.scheduleId});return or({},e,{schedules:s});case"SET_CURRENT_SCHEDULE":return or({},e,{currentSchedule:t.current});default:return e}},block:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ur,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_BLOCK_TEMPLATE":return cr({},e,{template:cr({},e.template,{isLoading:!0})});case"ADD_BLOCK_TEMPLATE_SUCCESS":return cr({},e,{template:cr({},e.template,{isLoading:!1,hasLoaded:!0,templates:[].concat(lr(e.template.templates),[t.newTemplate])})});case"DELETE_BLOCK_TEMPLATE":var a=e.template.templates.filter(function(e){return e._id!==t.id});return cr({},e,{template:cr({},e.template,{templates:lr(a)})});case"EDIT_BLOCK_TEMPLATE":return cr({},e,{template:cr({},e.template,{templateIsEditing:!0})});case"EDIT_BLOCK_TEMPLATE_SUCCESS":var n=e.template.templates.map(function(e){return e._id===t.newTemplate._id?t.newTemplate:e});return cr({},e,{template:cr({},e.template,{templates:lr(n),templateIsEditing:!1})});case"FETCH_BLOCK_TEMPLATES":return cr({},e,{template:cr({},e.template,{templatesAreLoading:!0})});case"FETCH_BLOCK_TEMPLATES_SUCCESS":return cr({},e,{template:cr({},e.template,{templatesAreLoading:!1,templates:t.templates})});case"FETCH_BLOCK_TEMPLATES_FAILURE":return cr({},e,{errors:cr({},e.errors,{templatesLoadingError:!0}),template:cr({},e.template,{templatesAreLoading:void 0})});case"FETCH_BLOCKS":return cr({},e,{blocksAreLoading:!0});case"FETCH_BLOCKS_SUCCESS":return cr({},e,{blockHasLoaded:!0,blocksAreLoading:!1,blocks:t.blocks});case"FETCH_BLOCK_FAILURE":return cr({},e,{errors:cr({},e.errors,{blockLoadingError:!0})});case"CREATE_BLOCK":return cr({},e,{newBlockIsLoading:!0});case"CREATE_BLOCK_SUCCESS":var o=e.blocks;return o.unshift(t.block),cr({},e,{newBlockIsLoading:!1,blocks:lr(o)});case"SAVE_BLOCK":return cr({},e,{blockIsEditing:!0});case"SAVE_BLOCK_SUCCESS":var r=e.blocks.map(function(e){return e._id===t.newBlock._id?t.newBlock:e});return cr({},e,{blocks:r,blockIsEditing:!1});case"SAVE_BLOCK_FAILURE":return cr({},e,{errors:cr({},e.errors,{blockEditError:!0})});case"DELETE_BLOCK":var s=e.blocks.filter(function(e){return e._id!==t.blockId});return cr({},e,{blocks:s});case"SET_CURRENT_BLOCK":return cr({},e,{currentBlock:t.current});default:return e}},chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{messages:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_MESSAGE":return mr({},e,{messages:[].concat(pr(e.messages),[{text:t.message,from:t.from}])});default:return e}},welcome:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TEMPLATE__WELCOME":return br({},e,{template:br({},e.template,{newTemplateIsLoading:!0})});case"ADD_TEMPLATE_SUCCESS__WELCOME":return br({},e,{template:br({},e.template,{templates:[].concat(fr(e.template.templates),[t.newTemplate]),newTemplateIsLoading:!1})});case"EDIT_TEMPLATE__WELCOME":return br({},e,{template:br({},e.template,{templateIsEditing:!0})});case"EDIT_TEMPLATE_SUCCESS__WELCOME":var a=e.template.templates.map(function(e){return e._id===t.newTemplate._id?t.newTemplate:e});return br({},e,{template:br({},e.template,{templates:fr(a),templateIsEditing:!1})});case"REMOVE_TEMPLATE__WELCOME":var n=e.template.templates.filter(function(e){return e._id!==t.templateId});return br({},e,{template:br({},e.template,{templates:fr(n)})});case"FETCH_TEMPLATES__WELCOME":return br({},e,{template:br({},e.template,{templatesAreLoading:!0})});case"FETCH_TEMPLATES_SUCCESS__WELCOME":return br({},e,{template:br({},e.template,{templates:fr(t.templates),templatesAreLoading:!1})});case"CHOOSE_TEMPLATE__WELCOME":return br({},e,{template:br({},e.template.templates,{choosenTemplateType:t.templateTypeName})});case"RESET_CHOOSEN_TEMPLATE__WELCOME":return br({},e,{template:br({},e.template.templates,{choosenTemplateType:""})});default:return e}}}),Er=Object(qo.createStore)(gr,_r(Object(qo.applyMiddleware)(Vo.a))),vr=function(e,t,a){return function(a){return new Promise(function(n,o){a(function(e,t){return{type:"SAVE_MESSAGE",message:e,from:t}}(e,t)),n()})}},kr=a(438),wr=a.n(kr);function Or(e){return(Or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sr(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function jr(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Nr(e){return(Nr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cr(e,t){return(Cr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Ir=function(e){function t(){var e,a,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return n=this,o=(e=Nr(t)).call.apply(e,[this].concat(s)),a=!o||"object"!==Or(o)&&"function"!=typeof o?Tr(n):o,Pr(Tr(a),"state",{typing:!1,welcomeMessages:[],text:"",messages:[],visible:!1,welcome:!1,animatePopUp:!1}),Pr(Tr(a),"socket",wr()("",{secure:!0})),Pr(Tr(a),"componentDidUpdate",function(e,t){if(t.messages!==a.state.messages){if(console.log("UPDATE"),"admin"==a.state.messages[a.state.messages.length-1].from)document.getElementById("receive").play();try{d()(".chat__body")[0].scroll(0,999999)}catch(e){console.log(e)}}}),Pr(Tr(a),"onChange",function(e){a.setState({text:e.target.value})}),Pr(Tr(a),"phone",function(){setTimeout(function(){a.setState({typing:!0})},"1000"),setTimeout(function(){a.props.dispatch(vr("call me 01100720379 , thanks !","admin")),document.getElementById("receive").play(),a.setState({typing:!1})},2e3)}),Pr(Tr(a),"status",function(){setTimeout(function(){a.setState({typing:!0})},"1000"),setTimeout(function(){a.props.dispatch(vr("fine <3 , you","admin"),function(){document.getElementById("receive").play()}),a.setState({typing:!1})},2e3)}),Pr(Tr(a),"send",function(){""!=a.state.text.trim()&&(document.getElementById("send").play(),a.props.dispatch(vr(a.state.text,"user")).then(function(){try{d()(".chat__body")[0].scroll(0,999999)}catch(e){console.log(e)}}),(a.state.text.includes("number")||a.state.text.includes("phone")||a.state.text.includes("رقم")||a.state.text.includes("رقمك")||a.state.text.includes("هاتف"))&&a.phone(),(a.state.text.includes("عامل")||a.state.text.includes("how are you")||a.state.text.includes("ازيك")||a.state.text.includes("اخبارك")||a.state.text.includes("كيفك")||a.state.text.includes("احوالك"))&&a.status(),a.setState({text:""}))}),Pr(Tr(a),"onKeyDown",function(e){"Enter"==e.key&&""!=a.state.text.trim()?(document.getElementById("send").play(),a.props.dispatch(vr(a.state.text,"user")).then(function(){try{d()(".chat__body")[0].scroll(0,999999)}catch(e){console.log(e)}}),(a.state.text.includes("number")||a.state.text.includes("phone")||a.state.text.includes("رقم")||a.state.text.includes("رقمك")||a.state.text.includes("هاتف"))&&a.phone(),2==a.state.welcomeMessages.length&&a.state.messages.length<=1&&(a.state.text.includes("yes")||a.state.text.includes("we")||a.state.text.includes("ah")||a.state.text.includes("اه")||a.state.text.includes("ياريت"))&&a.phone(),(a.state.text.includes("عامل")||a.state.text.includes("how are you")||a.state.text.includes("ازيك")||a.state.text.includes("اخبارك")||a.state.text.includes("كيفك")||a.state.text.includes("احوالك"))&&a.status(),a.setState({text:""})):a.socket.emit("typing",{id:"admin",socketId:localStorage.getItem("this.socketId")})}),Pr(Tr(a),"toggle",function(){if(a.state.visible||a.setState({animatePopUp:!1}),!a.state.visible&&!a.state.welcome)var e=["Hello !, we are pandabot team","can we help you !"],t=0,n=setInterval(function(){a.setState({typing:!0});var o=document.getElementById("receive");setTimeout(function(){var r=e[t];a.setState({welcomeMessages:[].concat(Sr(a.state.welcomeMessages),[r])},function(){o.play()}),a.setState({typing:!1}),a.state.welcomeMessages.length==e.length&&clearInterval(n),t++},500)},1e3);a.setState({welcome:!0}),a.setState({visible:!a.state.visible})}),a}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cr(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidMount",value:function(){var e=this;console.log("MOUNT"),this.socket.on("typing",function(t){t==localStorage.getItem("this.socketId")&&e.setState({typing:!0})}),this.socket.on("stoptyping",function(t){t==localStorage.getItem("this.socketId")&&e.setState({typing:!1})})}},{key:"render",value:function(){var e=this;return d()("#chat-message").focusout(function(){console.log("stop"),e.socket.emit("stoptyping",{id:"admin",socketId:localStorage.getItem("this.socketId")})}),o.a.createElement(o.a.Fragment,null,o.a.createElement("audio",{id:"send"},o.a.createElement("source",{src:"/audio/sendMessage.mp3",type:"audio/mpeg"})),o.a.createElement("audio",{id:"receive"},o.a.createElement("source",{src:"/audio/receive.mp3",type:"audio/mpeg"})),o.a.createElement("div",{className:"chat-container"},this.state.visible?o.a.createElement("div",{className:"chat"},o.a.createElement("div",{className:"chat__header"},o.a.createElement("div",{className:"chat__header__data"},o.a.createElement("p",{className:"chat__header__data__name"},o.a.createElement("strong",null,"Pandabot team")),o.a.createElement("small",null,"  Mohamed Salah & Mohamed Essam"),o.a.createElement("p",{className:"chat__header__data__rule"},"Developers"),o.a.createElement("div",{className:"chat__header__status"},o.a.createElement("i",{className:"fa fa-toggle-on "})))),o.a.createElement("div",{className:"chat__body"},o.a.createElement("ul",{className:"chat__body__list"},this.state.welcomeMessages.map(function(e){return o.a.createElement("li",{className:"chat__body__list__message"},o.a.createElement("img",{className:"chat__body__list__message__img",src:"https://scontent-hbe1-1.xx.fbcdn.net/v/t1.0-9/37943301_1983834905000661_749321417757032448_n.jpg?_nc_cat=107&_nc_oc=AQnWlClsi_xdogMgx1VkLl7PVWefqYxuZqC1gkdn_z34QsA6L1l5SZ2suKDb0ymXDYg&_nc_ht=scontent-hbe1-1.xx&oh=a1c38e8915d3e3e7870c797d58218d7d&oe=5DA77A8C"}),o.a.createElement("div",{className:"chat__body__list__message__text"},e))}),this.state.messages.map(function(e){return o.a.createElement("li",{className:"admin"==e.from?"chat__body__list__message":"chat__body__list__message chat__body__list__message--right"},o.a.createElement("img",{className:"chat__body__list__message__img",src:"https://scontent-hbe1-1.xx.fbcdn.net/v/t1.0-9/37943301_1983834905000661_749321417757032448_n.jpg?_nc_cat=107&_nc_oc=AQnWlClsi_xdogMgx1VkLl7PVWefqYxuZqC1gkdn_z34QsA6L1l5SZ2suKDb0ymXDYg&_nc_ht=scontent-hbe1-1.xx&oh=a1c38e8915d3e3e7870c797d58218d7d&oe=5DA77A8C"}),o.a.createElement("div",{className:"chat__body__list__message__text"},e.text))}))),o.a.createElement("div",{className:"chat__input"},this.state.typing?o.a.createElement("div",{className:"chat__body__typing"},o.a.createElement("ul",{className:"chat__body__typing__list"},o.a.createElement("li",null,"."),o.a.createElement("li",null,"."),o.a.createElement("li",null,"."))):"",o.a.createElement("input",{value:this.state.text,id:"chat-message",onChange:this.onChange,onKeyDown:this.onKeyDown,placeholder:"text now..",type:"text",className:"chat__input__text"}),o.a.createElement("div",{onClick:this.send,className:"chat__input__send"},"send",o.a.createElement("i",{className:"fa fa-arrow"})))):"",o.a.createElement("div",{onClick:this.toggle,className:" chat__header chat-pop "},this.state.visible?"":o.a.createElement("img",{className:"chat__header__img   ".concat(!this.state.welcome||this.state.animatePopUp?"chat-pop-animation":""),style:!this.state.welcome||this.state.animatePopUp?{border:"2px solid red"}:{border:"none"},src:"http://localhost:2000/assets/images/panda-bear.png"}),this.state.visible?o.a.createElement("div",{style:{width:"100%"},className:"text-center"},"Close"):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"chat__header__data"},o.a.createElement("p",{className:"chat__header__data__name"},"Pandabot "),o.a.createElement("p",{className:"chat__header__data__rule"},"Get help"),o.a.createElement("div",{className:"chat__header__status"},o.a.createElement("i",{className:"fa fa-toggle-on "})))))))}}])&&jr(a.prototype,r),s&&jr(a,s),t}();Pr(Ir,"getDerivedStateFromProps",function(e,t){var a;return console.log("LOL"),e.chat.messages!==t.messages&&0!=e.chat.messages.length?(t.visible||(a=!0),{animatePopUp:a,typing:!1,messages:e.chat.messages}):t});Object(F.b)(function(e){return{chat:e.chat}})(Ir);function xr(e){return(xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lr(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Dr(e,t){return!t||"object"!==xr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Br(e){return(Br=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ar(e,t){return(Ar=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Mr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Dr(this,Br(t).apply(this,arguments))}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ar(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidMount",value:function(){var e;this.props.dispatch((e=this.props.match.params.botid,function(t){return c.a.defaults.headers.common.Authorization=localStorage.getItem("token"),c.a.get("".concat(i,"api/dashboard/")+e).then(function(e){t({type:"GET_BOT",bot:e.data.bot})})}))}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(Go,{id:this.props.match.params.botid}),o.a.createElement("div",{style:{marginLeft:"80px",position:"fixed",zIndex:"11",width:"97%"}},o.a.createElement(oe,null)),o.a.createElement("div",{className:"schedules"!=this.props.match.params.page&&"blocks"!=this.props.match.params.page?"dashboard__content":""},o.a.createElement(Ao,null)))}}])&&Lr(a.prototype,r),s&&Lr(a,s),t}(),Ur=Object(F.b)()(Mr),Fr=a(439),Hr=a.n(Fr);function Rr(e){return(Rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zr(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Gr(e){return(Gr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vr(e,t){return(Vr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Kr=function(e){function t(e){var a,n,o,r,s,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=Gr(t).call(this,e),a=!o||"object"!==Rr(o)&&"function"!=typeof o?qr(n):o,r=qr(a),l=function(){var e=Hr.a.parse(a.props.location.search);console.log(e),a.props.dispatch(gs("Bearer "+e.token))},(s="componentDidMount")in r?Object.defineProperty(r,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[s]=l,a}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vr(e,t)}(t,n["Component"]),a=t,(r=[{key:"render",value:function(){return o.a.createElement("div",null)}}])&&zr(a.prototype,r),s&&zr(a,s),t}(),Wr=Object(F.b)()(Kr);function Yr(e){return(Yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jr(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qr(e){return(Qr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xr(e,t){return(Xr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var es=function(e){function t(){var e,a,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return n=this,o=(e=Qr(t)).call.apply(e,[this].concat(s)),a=!o||"object"!==Yr(o)&&"function"!=typeof o?Zr(n):o,$r(Zr(a),"state",{bot:{}}),$r(Zr(a),"componentDidMount",function(){var e,t,a,n,o;window.fbAsyncInit=function(){FB.init({appId:"2245399952381834",cookie:!0,xfbml:!0,version:"v3.1"}),FB.AppEvents.logPageView()},e=document,t="script",a="facebook-jssdk",o=e.getElementsByTagName(t)[0],e.getElementById(a)||((n=e.createElement(t)).id=a,n.src="https://connect.facebook.net/en_US/sdk.js",o.parentNode.insertBefore(n,o))}),$r(Zr(a),"login",function(){window.location=i+"api/user/auth/facebook"}),$r(Zr(a),"goToDashboard",function(){a.props.history.push("/dashboard")}),$r(Zr(a),"back",function(){a.props.history.goBack()}),$r(Zr(a),"logout",function(){a.props.dispatch(Es())}),$r(Zr(a),"goToHome",function(){a.props.history.push("/")}),a}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xr(e,t)}(t,n["Component"]),a=t,s=[{key:"getDerivedStateFromProps",value:function(e,t){return e.bot!=t.bot?{bot:e.bot}:t}}],(r=[{key:"render",value:function(){var e=!!this.props.user.user_id,t=this.props.user,a=t.user_name,n=t.image_url;return o.a.createElement("div",{className:"home-navbar ".concat("home"==this.props.class?"":"home-navbar--black")},o.a.createElement("img",{className:"home-navbar__logo",onClick:this.goToHome,src:"http://localhost/assets/images/design/panda.png"}),o.a.createElement("ul",{className:"home-navbar__list list-style-none"},o.a.createElement("li",null,o.a.createElement(P.b,{className:"home-navbar__list__item",activeClassName:"home-navbar__list__item--active",to:"/"},"Home")),o.a.createElement("li",null,o.a.createElement(P.b,{className:"home-navbar__list__item",activeClassName:"home-navbar__list__item--active",to:"/about"},"About")),o.a.createElement("li",null,o.a.createElement(P.b,{className:"home-navbar__list__item",activeClassName:"home-navbar__list__item--active",to:"/chatbot"},"chatbot")),o.a.createElement("li",null,o.a.createElement(P.b,{className:"home-navbar__list__item",activeClassName:"home-navbar__list__item--active",to:"/privacy"},"privacy")),o.a.createElement("li",null,o.a.createElement(P.b,{className:"home-navbar__list__item",activeClassName:"home-navbar__list__item--active",to:"/faq"},"FAQ"))),e?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"home-navbar__user-info    right"},o.a.createElement("img",{className:"home-navbar__user-info__img",src:n}),o.a.createElement("div",{className:"home-navbar__user-info__name"},o.a.createElement("p",null,a),o.a.createElement("small",{onClick:this.logout},"logout")))):"",o.a.createElement("ul",{className:"home-navbar__list right list-style-none"},e||o.a.createElement("li",{className:"home-navbar__list__item home-navbar__list__item--login ",onClick:this.login},"login"),e&&o.a.createElement("li",{className:"home-navbar__list__item home-navbar__list__item--login ",onClick:this.goToDashboard},"Dashboard")))}}])&&Jr(a.prototype,r),s&&Jr(a,s),t}(),ts=Object(F.b)(function(e){return{user:e.user,bot:e.bot.bot}})(Object(u.f)(es));function as(e){var t=e.img,a=e.header,n=e.info;return o.a.createElement("div",null,o.a.createElement("div",{className:"home-services__item"},o.a.createElement("img",{className:"home-services__item__img",src:t}),o.a.createElement("p",{className:"home-services__item__header"},a),o.a.createElement("p",{className:"home-services__item__info"},n)))}function ns(e){return(ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function os(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rs(e,t){return!t||"object"!==ns(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ss(e){return(ss=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ls(e,t){return(ls=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var cs=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),rs(this,ss(t).apply(this,arguments))}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ls(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidMount",value:function(){0==d()(document).scrollTop()&&d()(".home-navbar").addClass("home-navbar--white"),d()(document).on("scroll",function(){console.log(d()(this).scrollTop()),0==d()(this).scrollTop()?(d()(".home-navbar__list__item").removeClass("home-navbar__list__item--black"),d()(".home-navbar").addClass("home-navbar--white")):(d()(".home-navbar__list__item").addClass("home-navbar__list__item--black"),d()(".home-navbar").removeClass("home-navbar--white"))})}},{key:"render",value:function(){return o.a.createElement("div",{className:"home"},o.a.createElement("section",{className:"home-intro"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-6"},o.a.createElement("div",{className:"home-intro__text"},o.a.createElement("p",{className:"home-intro__text__header"},"Pandabot"),o.a.createElement("p",{className:"home-intro__text__info"}," Chatbots represent a very huge opportunity for business to communicate and engage their customers through messaging apps. Have you employed a chatbot strategy today?"),o.a.createElement("div",{className:"home-intro__text__get-started"},"Get Started"))),o.a.createElement("div",{className:"col-md-6"},o.a.createElement("div",{className:"home-intro__image"},o.a.createElement("img",{src:"https://pandabotbeta.herokuapp.com/assets/images/design/image_.png"}))))),o.a.createElement("section",{className:"home-business"},o.a.createElement("p",{className:"home-business__header"},"improve your business "),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-6"},o.a.createElement("div",{className:"home-business__text"},o.a.createElement("p",null,"Users are spending more time on messaging apps like Facebook Messenger, Snapchat, WeChat, and others. Using Chatbots in messaging platforms allow brands to interact personally."),o.a.createElement("p",null,"Messaging apps will soon leverage on technologies such as chatbot to deliver smarter and better engagement with the customers. More and more businesses are adopting chatbot technology to improve their customer experience."))),o.a.createElement("div",{className:"col-md-6"},o.a.createElement("div",{className:"home-business__image"},o.a.createElement("img",{src:"https://pandabotbeta.herokuapp.com/assets/images/design/business_1.png"}))))),o.a.createElement("section",{className:"home-services"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-3"},o.a.createElement(as,{info:"  Use this free online SVG to\r PNG converter to convert \r SVG files to PNG images, \r quickly and easily\r ",img:"https://pandabotbeta.herokuapp.com/assets/images/design/realtime.png",header:"Realtime"})),o.a.createElement("div",{className:"col-md-3"},o.a.createElement(as,{info:"  Use this free online SVG to\r PNG converter to convert \r SVG files to PNG images, \r quickly and easily\r ",img:"https://pandabotbeta.herokuapp.com/assets/images/design/unlimited.png",header:"Unlimited"})),o.a.createElement("div",{className:"col-md-3"},o.a.createElement(as,{info:"  Use this free online SVG to\r PNG converter to convert \r SVG files to PNG images, \r quickly and easily\r ",img:"https://pandabotbeta.herokuapp.com/assets/images/design/sent-mail.png",header:"Broadcast"})),o.a.createElement("div",{className:"col-md-3"},o.a.createElement(as,{info:"  Use this free online SVG to\r PNG converter to convert \r SVG files to PNG images, \r quickly and easily\r ",img:"https://pandabotbeta.herokuapp.com/assets/images/design/calendar.png",header:"Scheduling"})),o.a.createElement("div",{className:"col-md-3"},o.a.createElement(as,{info:"  Use this free online SVG to\r PNG converter to convert \r SVG files to PNG images, \r quickly and easily\r ",img:"https://pandabotbeta.herokuapp.com/assets/images/design/diagram.png",header:"Flow"})),o.a.createElement("div",{className:"col-md-3"},o.a.createElement(as,{info:"  Use this free online SVG to\r PNG converter to convert \r SVG files to PNG images, \r quickly and easily\r ",img:"https://pandabotbeta.herokuapp.com/assets/images/design/presentation.png",header:"AI training"})),o.a.createElement("div",{className:"col-md-3"},o.a.createElement(as,{info:"  Use this free online SVG to\r PNG converter to convert \r SVG files to PNG images, \r quickly and easily\r ",img:"https://pandabotbeta.herokuapp.com/assets/images/design/support.png",header:"customer support"})),o.a.createElement("div",{className:"col-md-3"},o.a.createElement(as,{info:"  Use this free online SVG to\r PNG converter to convert \r SVG files to PNG images, \r quickly and easily\r ",img:"https://pandabotbeta.herokuapp.com/assets/images/design/software.png",header:"development"})))),o.a.createElement("section",{className:"subscribe"},o.a.createElement("p",{className:"subscribe__header"},"Subscribe us"),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-6"},o.a.createElement("div",{className:"subscribe__body"},o.a.createElement("div",{className:"subscribe__body__text"},"subscribe us to get latest news about pandabot platforms and many updates"),o.a.createElement("div",{className:"subscribe__body__email"},o.a.createElement("input",{className:"subscribe__body__email__input",placeholder:"email.."}),o.a.createElement("div",{className:"subscribe__body__email__inside"},"email")))),o.a.createElement("div",{className:"col-md-6"},o.a.createElement("div",{className:"subscribe__image"},o.a.createElement("img",{src:"https://pandabotbeta.herokuapp.com/assets/images/design/subscribe_.png"}))))))}}])&&os(a.prototype,r),s&&os(a,s),t}();function is(){return o.a.createElement("div",null,o.a.createElement("div",{className:"home__content"},o.a.createElement(ts,null),o.a.createElement(u.a,{exact:!0,path:"/",component:cs}),o.a.createElement(u.a,{path:"/about",component:function(){return"ABOUT"}}),o.a.createElement("div",{className:"footer"},"Pandabot team ©2019")))}function us(e){return(us="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ps(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ms(e,t){return!t||"object"!==us(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ds(e){return(ds=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fs(e,t){return(fs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var bs=Object(p.a)({}),ys=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ms(this,ds(t).apply(this,arguments))}var a,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fs(e,t)}(t,n["Component"]),a=t,(r=[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(u.b,{history:bs},o.a.createElement(u.a,{exact:!0,path:"/auth/facebook/",component:Wr}),o.a.createElement(u.c,null,o.a.createElement(u.a,{path:"/Hello",component:function(){return"HELLO"}}),o.a.createElement(u.a,{path:"/dashboard/bot/:page/:botid",component:Ur}),o.a.createElement(u.a,{path:"/schedule",component:Pn}),o.a.createElement(u.a,{path:"/dashboard",component:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(oe,null),o.a.createElement(J,null))}}),o.a.createElement(is,null))))}}])&&ps(a.prototype,r),s&&ps(a,s),t}();c.a.defaults.proxy={host:"127.0.0.1",port:8e3};var hs=function(){return function(e){return c.a.defaults.headers.common.Authorization=localStorage.getItem("token"),c.a.get("".concat(i,"api/user/")).then(function(t){e({type:"LOGIN",data:t.data.user})}).catch(function(e){localStorage.clear(),bs.replace("/")})}},_s=function(){return function(e){return c.a.get("".concat(i,"api/user/pages")).then(function(t){e({type:"GET_PAGES",pages:t.data.pages})})}},gs=function(e){return function(t){return localStorage.setItem("token",e),c.a.defaults.headers.common.Authorization=localStorage.getItem("token"),c.a.get("".concat(i,"api/user/")).then(function(e){t(hs()),bs.replace("/dashboard")})}},Es=function(){return function(e){localStorage.removeItem("token"),e({type:"LOGOUT"}),window.location="/"}},vs=(a(831),a(832),a(833),a(108)),ks=a(23);var ws=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(ys,null))};vs.b.add(ks.a,ks.i,ks.o,ks.k,ks.n,ks.e,ks.b,ks.r,ks.l,ks.s,ks.m,ks.p,ks.d,ks.t,ks.h,ks.j,ks.f,ks.q,ks.g,ks.c),c.a.defaults.headers.common.Authorization=localStorage.getItem("token");var Os=o.a.createElement(F.a,{store:Er},o.a.createElement(ws,null)),Ss=!1,js=function(){Ss||(s.a.render(Os,document.getElementById("root")),Ss=!0)};s.a.render(o.a.createElement("div",null,"login...."),document.getElementById("root")),localStorage.getItem("token")?Er.dispatch(hs()).then(function(){js(),"/"==window.location.pathname&&history.push("/dashboard/bots")}):js()}});