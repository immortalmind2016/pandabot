!function(e){function t(t){for(var n,c,l=t[0],s=t[1],i=t[2],m=0,p=[];m<l.length;m++)c=l[m],o[c]&&p.push(o[c][0]),o[c]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(u&&u(t);p.length;)p.shift()();return r.push.apply(r,i||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,l=1;l<a.length;l++){var s=a[l];0!==o[s]&&(n=!1)}n&&(r.splice(t--,1),e=c(c.s=a[0]))}return e}var n={},o={0:0},r=[];function c(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.m=e,c.c=n,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(a,n,function(t){return e[t]}.bind(null,n));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var l=window.webpackJsonp=window.webpackJsonp||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var i=0;i<l.length;i++)t(l[i]);var u=s;r.push([834,1]),a()}({651:function(e,t,a){var n={"./dots.gif":652,"./rounded.gif":653};function o(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=r,e.exports=o,o.id=651},652:function(e,t,a){e.exports=a.p+"5f186c20df7248f78855ca02d0a2368c.gif"},653:function(e,t,a){e.exports=a.p+"f304074f941900e8061bac063da84134.gif"},659:function(e,t,a){var n={"./af":230,"./af.js":230,"./ar":231,"./ar-dz":232,"./ar-dz.js":232,"./ar-kw":233,"./ar-kw.js":233,"./ar-ly":234,"./ar-ly.js":234,"./ar-ma":235,"./ar-ma.js":235,"./ar-sa":236,"./ar-sa.js":236,"./ar-tn":237,"./ar-tn.js":237,"./ar.js":231,"./az":238,"./az.js":238,"./be":239,"./be.js":239,"./bg":240,"./bg.js":240,"./bm":241,"./bm.js":241,"./bn":242,"./bn.js":242,"./bo":243,"./bo.js":243,"./br":244,"./br.js":244,"./bs":245,"./bs.js":245,"./ca":246,"./ca.js":246,"./cs":247,"./cs.js":247,"./cv":248,"./cv.js":248,"./cy":249,"./cy.js":249,"./da":250,"./da.js":250,"./de":251,"./de-at":252,"./de-at.js":252,"./de-ch":253,"./de-ch.js":253,"./de.js":251,"./dv":254,"./dv.js":254,"./el":255,"./el.js":255,"./en-SG":256,"./en-SG.js":256,"./en-au":257,"./en-au.js":257,"./en-ca":258,"./en-ca.js":258,"./en-gb":259,"./en-gb.js":259,"./en-ie":260,"./en-ie.js":260,"./en-il":261,"./en-il.js":261,"./en-nz":262,"./en-nz.js":262,"./eo":263,"./eo.js":263,"./es":264,"./es-do":265,"./es-do.js":265,"./es-us":266,"./es-us.js":266,"./es.js":264,"./et":267,"./et.js":267,"./eu":268,"./eu.js":268,"./fa":269,"./fa.js":269,"./fi":270,"./fi.js":270,"./fo":271,"./fo.js":271,"./fr":272,"./fr-ca":273,"./fr-ca.js":273,"./fr-ch":274,"./fr-ch.js":274,"./fr.js":272,"./fy":275,"./fy.js":275,"./ga":276,"./ga.js":276,"./gd":277,"./gd.js":277,"./gl":278,"./gl.js":278,"./gom-latn":279,"./gom-latn.js":279,"./gu":280,"./gu.js":280,"./he":281,"./he.js":281,"./hi":282,"./hi.js":282,"./hr":283,"./hr.js":283,"./hu":284,"./hu.js":284,"./hy-am":285,"./hy-am.js":285,"./id":286,"./id.js":286,"./is":287,"./is.js":287,"./it":288,"./it-ch":289,"./it-ch.js":289,"./it.js":288,"./ja":290,"./ja.js":290,"./jv":291,"./jv.js":291,"./ka":292,"./ka.js":292,"./kk":293,"./kk.js":293,"./km":294,"./km.js":294,"./kn":295,"./kn.js":295,"./ko":296,"./ko.js":296,"./ku":297,"./ku.js":297,"./ky":298,"./ky.js":298,"./lb":299,"./lb.js":299,"./lo":300,"./lo.js":300,"./lt":301,"./lt.js":301,"./lv":302,"./lv.js":302,"./me":303,"./me.js":303,"./mi":304,"./mi.js":304,"./mk":305,"./mk.js":305,"./ml":306,"./ml.js":306,"./mn":307,"./mn.js":307,"./mr":308,"./mr.js":308,"./ms":309,"./ms-my":310,"./ms-my.js":310,"./ms.js":309,"./mt":311,"./mt.js":311,"./my":312,"./my.js":312,"./nb":313,"./nb.js":313,"./ne":314,"./ne.js":314,"./nl":315,"./nl-be":316,"./nl-be.js":316,"./nl.js":315,"./nn":317,"./nn.js":317,"./pa-in":318,"./pa-in.js":318,"./pl":319,"./pl.js":319,"./pt":320,"./pt-br":321,"./pt-br.js":321,"./pt.js":320,"./ro":322,"./ro.js":322,"./ru":323,"./ru.js":323,"./sd":324,"./sd.js":324,"./se":325,"./se.js":325,"./si":326,"./si.js":326,"./sk":327,"./sk.js":327,"./sl":328,"./sl.js":328,"./sq":329,"./sq.js":329,"./sr":330,"./sr-cyrl":331,"./sr-cyrl.js":331,"./sr.js":330,"./ss":332,"./ss.js":332,"./sv":333,"./sv.js":333,"./sw":334,"./sw.js":334,"./ta":335,"./ta.js":335,"./te":336,"./te.js":336,"./tet":337,"./tet.js":337,"./tg":338,"./tg.js":338,"./th":339,"./th.js":339,"./tl-ph":340,"./tl-ph.js":340,"./tlh":341,"./tlh.js":341,"./tr":342,"./tr.js":342,"./tzl":343,"./tzl.js":343,"./tzm":344,"./tzm-latn":345,"./tzm-latn.js":345,"./tzm.js":344,"./ug-cn":346,"./ug-cn.js":346,"./uk":347,"./uk.js":347,"./ur":348,"./ur.js":348,"./uz":349,"./uz-latn":350,"./uz-latn.js":350,"./uz.js":349,"./vi":351,"./vi.js":351,"./x-pseudo":352,"./x-pseudo.js":352,"./yo":353,"./yo.js":353,"./zh-cn":354,"./zh-cn.js":354,"./zh-hk":355,"./zh-hk.js":355,"./zh-tw":356,"./zh-tw.js":356};function o(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=r,e.exports=o,o.id=659},799:function(e,t,a){},825:function(e,t){},833:function(e,t,a){},834:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(30),c=a.n(r),l=(a(444),a(5)),s=a.n(l),i="/",u=a(65),m=a(34),p=a(7),d=a.n(p);function f(e){for(var t=1;t<arguments.length;t++)if(t%2){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){b(e,t,a[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var h=function(e){return function(t){return s.a.defaults.headers.common.Authorization=localStorage.getItem("token"),s.a.post("".concat(i,"api/dashboard/"),{data:e}).then(function(e){t(function(e){return{type:"CREATE_BOT",data:e}}(e.data.bot))})}},y=function(){return function(e){return s.a.defaults.headers.common.Authorization=localStorage.getItem("token"),s.a.get("".concat(i,"api/dashboard/")).then(function(t){e({type:"GET_BOTS",bots:t.data.bots})})}},_=function(e){return function(t){return s.a.defaults.headers.common.Authorization=localStorage.getItem("token"),s.a.delete("".concat(i,"api/dashboard/").concat(e)).then(function(a){t(function(e){return{type:"DELETE_BOT",id:e}}(e))})}},g=function(e,t){return function(a){return s.a.defaults.headers.common.Authorization=localStorage.getItem("token"),s.a.post("".concat(i,"api/dashboard/").concat(e),{data:{name:t}}).then(function(n){a(function(e,t){return{type:"RENAME_BOT",data:{id:e,newName:t}}}(e,t))})}},E=function(e){return{type:"CONNECT_PAGE",page:e}},v=function(e,t){return console.log(t),function(a){return s.a.defaults.headers.common.Authorization=localStorage.getItem("token"),s.a.post("".concat(i,"api/dashboard/connect-page/").concat(e),{data:f({},t)}).then(function(e){a(E(e.data.page))})}},O=function(e){return function(t){return s.a.defaults.headers.common.Authorization=localStorage.getItem("token"),s.a.get("".concat(i,"api/dashboard/connected-page/").concat(e)).then(function(e){console.log("CONNECTED PAGE ",e.data),t(E(e.data.page))})}},w=function(e){return function(t){return s.a.defaults.headers.common.Authorization=localStorage.getItem("token"),s.a.delete("".concat(i,"api/dashboard/disconnect-page/").concat(e)).then(function(e){t({type:"DISCONNECT_PAGE"})})}},S=function(e){return f({type:"SAVE_MENU"},e)},k=function(e,t){return function(a){return s.a.defaults.headers.common.Authorization=localStorage.getItem("token"),s.a.post("".concat(i,"api/bot/setup-menu/").concat(e),{data:t}).then(function(e){a(S(f({},t)))})}},j=function(e){return function(t){return s.a.defaults.headers.common.Authorization=localStorage.getItem("token"),s.a.get("".concat(i,"api/bot/get-menu/").concat(e)).then(function(e){e.data.menu&&t(S(f({},e.data.menu)))})}},T=function(e,t){return function(a){s.a.post("".concat(i,"api/bot/ai/create/").concat(t),{data:f({},e)}).then(function(e){console.log("RESPONSE ",e.data),a(function(e){return{type:"ADD_AI",ai:e}}(e.data.ai))})}},N=function(e,t,a){return console.log("edit ai",e),function(n){s.a.post("".concat(i,"api/bot/ai/edit/").concat(a,"/").concat(e),{data:f({},t)}).then(function(t){n(function(e,t){return{type:"EDIT_AI",ai:t,id:e}}(e,t.data.ai))})}},C=function(e,t){return function(a){s.a.delete("".concat(i,"api/bot/ai/remove/").concat(t,"/").concat(e)).then(function(t){a(function(e){return{type:"DELETE_AI",id:e}}(e))})}},P=a(10);function I(e){var t=e.name,a=e.id,n=e.deleteBot;return o.a.createElement("div",{class:"modal",tabindex:"-1",role:"dialog",id:"deleteModal_"+a},o.a.createElement("div",{class:"modal-dialog",role:"document"},o.a.createElement("div",{class:"modal-content"},o.a.createElement("div",{class:"modal-header"},o.a.createElement("h5",{class:"modal-title"},"Delete Bot"),o.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"},"×"))),o.a.createElement("div",{class:"modal-body"},o.a.createElement("p",null," you will delete ",t," permanentaly , Are your sure ? ")),o.a.createElement("div",{class:"modal-footer"},o.a.createElement("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"},"Close"),o.a.createElement("button",{type:"button",class:"btn btn-danger","data-dismiss":"modal",onClick:n},"Delete")))))}function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var M=function(e){function t(e){var a,n,o,r,c,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=B(t).call(this,e),a=!o||"object"!==L(o)&&"function"!=typeof o?D(n):o,r=D(a),l=function(e){var t=e.target.value;a.setState({name:t})},(c="onChange")in r?Object.defineProperty(r,c,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[c]=l,a.state={name:a.props.name},a}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,n["Component"]),a=t,(r=[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("div",{class:"modal",tabindex:"-1",role:"dialog",id:"renameModal_"+this.props.id},o.a.createElement("div",{class:"modal-dialog",role:"document"},o.a.createElement("div",{class:"modal-content"},o.a.createElement("div",{class:"modal-header"},o.a.createElement("h5",{class:"modal-title"},"Delete Bot"),o.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"},"×"))),o.a.createElement("div",{class:"modal-body"},o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{className:"form-control",id:"newName",placeholder:"name..",value:this.state.name,onChange:this.onChange}))),o.a.createElement("div",{class:"modal-footer"},o.a.createElement("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"},"Close"),o.a.createElement("button",{type:"button",class:"btn btn-success","data-dismiss":"modal",onClick:function(){e.props.renameBot(e.props.id,e.state.name)}},"rename"))))))}}])&&x(a.prototype,r),c&&x(a,c),t}();function U(e){var t=e.name,a=(e.img,e.id),n=e.deleteBot,r=e.renameBot;return o.a.createElement("div",{key:a,className:"bots__content__card text-center"},o.a.createElement("i",{class:"fas fa-ellipsis-v bots__content__card__dots ",href:"#",role:"button",id:"collapse_"+a,"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}),o.a.createElement("div",{class:"dropdown-menu","aria-labelledby":"dropdownMenuLink"},o.a.createElement("button",{class:"dropdown-item","data-toggle":"modal","data-target":"#deleteModal_"+a},"delete"),o.a.createElement("button",{class:"dropdown-item","data-toggle":"modal","data-target":"#renameModal_"+a},"rename")),o.a.createElement(P.a,{to:"/dashboard/bot/settings/"+a},o.a.createElement("img",{className:"bots__content__card__img ",src:"https://medias3.prestastore.com/835054-pbig/chat-bot-for-social-networking.jpg"}),o.a.createElement("p",{className:"bots__content__card__name"},t)),o.a.createElement(I,{name:t,id:a,deleteBot:function(){n(a)}}),o.a.createElement(M,{name:t,id:a,renameBot:r}))}var F=a(8);function H(e){var t=e.createBot;return o.a.createElement("div",{class:"modal",tabindex:"-1",role:"dialog",id:"createModal"},o.a.createElement("div",{class:"modal-dialog",role:"document"},o.a.createElement("div",{class:"modal-content"},o.a.createElement("div",{class:"modal-header"},o.a.createElement("h5",{class:"modal-title"},"Create Bot"),o.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"},"×"))),o.a.createElement("div",{class:"modal-body"},o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{className:"form-control",id:"botname",placeholder:"name.."}))),o.a.createElement("div",{class:"modal-footer"},o.a.createElement("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"},"Close"),o.a.createElement("button",{type:"button",class:"btn btn-primary","data-dismiss":"modal",onClick:t},"Create")))))}function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var W=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=G(t).call(this,e),a=!o||"object"!==R(o)&&"function"!=typeof o?q(n):o,K(q(a),"componentDidMount",function(){a.props.dispatch(y())}),K(q(a),"renameBot",function(e,t){console.log(t),a.props.dispatch(g(e,t))}),K(q(a),"deleteBot",function(e){a.props.dispatch(_(e))}),K(q(a),"createBot",function(){var e=d()("#botname").val();a.props.dispatch(h({name:e}))}),a.state={bots:[],loading:!0},a}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,n["Component"]),a=t,(r=[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"bots"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"bots__content"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-3"},o.a.createElement("div",{className:"bots__content__card text-center","data-toggle":"modal","data-target":"#createModal"},o.a.createElement("h3",{className:"bots__content__card__add"},"+"))),this.state.loading?"loading...":this.state.bots.map(function(t){return o.a.createElement("div",{className:"col-3"},o.a.createElement(U,{id:t._id,name:t.name,deleteBot:e.deleteBot,renameBot:e.renameBot}))}))),o.a.createElement(H,{createBot:this.createBot})))}}])&&z(a.prototype,r),c&&z(a,c),t}();K(W,"getDerivedStateFromProps",function(e,t){return console.log(e),e.bot!=t.bot?{bots:e.bot.bots,loading:e.bot.botLoader}:function(e){for(var t=1;t<arguments.length;t++)if(t%2){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){K(e,t,a[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}({},t)});var Y=Object(F.b)(function(e){return{bot:e.bot}})(W),J=function(e){var t=e.LoaderName,n=void 0===t?"rounded":t,r=e.width,c=e.top,l=void 0!==c&&c,s=e.style,i=a(651)("./".concat(n,".gif"));return o.a.createElement("div",{className:"d-flex  justify-content-center w-100 h-100",style:{alignItems:l?"flex-start":"center"}},o.a.createElement("img",{style:s,src:i,alt:"Loading...",width:r&&r,height:r&&r}))},Q=a(9);function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ne=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=$(t).call(this),a=!o||"object"!==Z(o)&&"function"!=typeof o?ee(n):o,ae(ee(a),"componentDidMount",function(){var e,t,a,n,o;window.fbAsyncInit=function(){FB.init({appId:"2245399952381834",cookie:!0,xfbml:!0,version:"v3.1"}),FB.AppEvents.logPageView()},e=document,t="script",a="facebook-jssdk",o=e.getElementsByTagName(t)[0],e.getElementById(a)||((n=e.createElement(t)).id=a,n.src="https://connect.facebook.net/en_US/sdk.js",o.parentNode.insertBefore(n,o))}),ae(ee(a),"login",function(){FB.login(function(e){"connected"==e.status&&s.a.post(i+"api/user/login",{user:e.authResponse}).then(function(e){localStorage.setItem("token",e.data.token),a.props.dispatch(sc())})},{scope:"public_profile,manage_pages,pages_messaging"}),FB.getLoginStatus(function(e){})}),ae(ee(a),"goToDashboard",function(){a.props.history.push("/dashboard")}),ae(ee(a),"goToHome",function(){a.props.history.push("/")}),ae(ee(a),"back",function(){a.props.history.goBack()}),ae(ee(a),"logout",function(){a.props.dispatch(mc())}),a.state={bot:{},templateIsEditing:e.templateIsEditing},a}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(t,n["Component"]),a=t,c=[{key:"getDerivedStateFromProps",value:function(e,t){return e.bot!=t.bot?{bot:e.bot}:t}}],(r=[{key:"componentDidUpdate",value:function(e,t){e.match.params.page!==this.props.match.params.page&&this.setState({templateIsEditing:null}),this.props.templateIsEditing!==e.templateIsEditing&&this.setState({templateIsEditing:this.props.templateIsEditing})}},{key:"render",value:function(){var e=!!this.props.user.user_id,t=this.props.user,a=t.user_name,n=t.image_url,r=this.state.templateIsEditing;return o.a.createElement(o.a.Fragment,null,e?o.a.createElement("section",{className:"c-navbar"},o.a.createElement("ul",{className:"c-navbar__list"},e?o.a.createElement("span",null,Object.keys(this.props.match.params).length>0?o.a.createElement(o.a.Fragment,null,o.a.createElement("li",{className:"goBack"},o.a.createElement("p",{onClick:this.back},o.a.createElement("i",{className:"fa fa-chevron-left"})," back"))):null,o.a.createElement("li",{className:"c-navbar__list__item  c-navbar__list__item--no-border c-navbar__list__item--right c-navbar__list__item--left-line "},o.a.createElement("img",{className:"c-navbar__list__item__avatar",src:n}),o.a.createElement("p",{className:"c-navbar__list__item__name"},a,o.a.createElement("small",{onClick:this.logout}," logout "))),o.a.createElement("li",{onClick:this.goToDashboard,className:"c-navbar__list__item c-navbar__list__item--right c-navbar__list__item--no-border",style:{marginTop:"7px"}},"Dashboard"),o.a.createElement("li",{onClick:this.goToHome,className:"c-navbar__list__item c-navbar__list__item--right c-navbar__list__item--no-border",style:{marginTop:"7px"}},"Home")):""),e&&o.a.createElement("div",{className:"d-flex align-items-center navbar-bot"},o.a.createElement("div",{className:"c-navbar__list__bot"},o.a.createElement("img",{src:"https://medias3.prestastore.com/835054-pbig/chat-bot-for-social-networking.jpg",className:"c-navbar__list__bot__img"}),this.state.bot.name),o.a.createElement("small",{className:"mr-4"},"Status"),o.a.createElement("div",null,null===r&&"",!0===r&&o.a.createElement(J,{width:30}),!1===r&&o.a.createElement(Q.a,{icon:"check",color:"green"})))):"dd")}}])&&X(a.prototype,r),c&&X(a,c),t}(),oe=Object(u.f)(Object(F.b)(function(e,t){var a;switch(t.match.params.page){case"blocks":a=e.block.template.templateIsEditing;break;case"schedules":a=e.schedule.template.templateIsEditing;break;case"welcome-message":a=e.welcome.template.templateIsEditing}return{user:e.user,bot:e.bot.bot,templateIsEditing:a}})(ne)),re=a(28),ce=a.n(re);function le(){return(le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function se(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var ie=function(e){var t=e.type,a=void 0===t?"text":t,n=e.name,r=e.value,c=e.onChange,l=e.placeholder,s=e.required,i=e.feedback,u=e.isvalid,m=e.className,p=void 0===m?"":m,d=e.id,f=se(e,["type","name","value","onChange","placeholder","required","feedback","isvalid","className","id"]);return o.a.createElement(o.a.Fragment,null,o.a.createElement("input",le({id:d,type:a,name:n,value:r,onChange:c,placeholder:l,className:"validated-input form-control  ".concat(p," ").concat("false"===u&&" is-invalid"),required:s},f,{autoComplete:"off"})),o.a.createElement("span",{className:"invalid-feedback"},i))};function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function de(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fe(e,t){return(fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var be=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=pe(t).call(this,e),a=!o||"object"!==ue(o)&&"function"!=typeof o?de(n):o,function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(de(a),"datalistChangeHandler",function(e){var t=e.target.value,n=d()("#".concat(a.state.blocksDatalistId)).find("[value='".concat(t,"']")),o=n.data("id");console.log(n),o||a.setState({errors:{blockid:!0}}),a.setState({blockid:o},function(){}),""===t.trim()&&a.setState({blockid:null})}),a.state={blockid:a.props.blockid,blocksDatalistId:ce()()},a}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fe(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.blocksDatalistId;return o.a.createElement("div",{class:"menu-control"},o.a.createElement("nav",null,o.a.createElement("div",{class:"nav nav-tabs",id:"nav-tab",role:"tablist"},o.a.createElement("a",{class:"nav-item nav-link active",id:"nav-url-tab","data-toggle":"tab",href:"#nav-url",role:"tab","aria-controls":"nav-url","aria-selected":"true"},"url"),o.a.createElement("a",{class:"nav-item nav-link",id:"nav-block-tab","data-toggle":"tab",href:"#nav-block",role:"tab","aria-controls":"nav-profile","aria-selected":"false"},"block"))),o.a.createElement("div",{class:"tab-content menu-control__tabs",id:"nav-tabContent"},o.a.createElement("div",{class:"form-group"},o.a.createElement("input",{id:"button-name",placeholder:"button name..",class:"form-control"})),o.a.createElement("div",{class:"tab-pane fade show active",id:"nav-url",role:"tabpanel","aria-labelledby":"nav-url-tab"},o.a.createElement("div",{class:"form-group"},o.a.createElement("input",{id:"button-url",placeholder:"Enter url..",class:"form-control"})),o.a.createElement("div",{class:"menu-control__action"},o.a.createElement("button",{class:"btn btn-primary w-100",onClick:this.props.addUrlButton},"add"))),o.a.createElement("div",{class:"tab-pane fade",id:"nav-block",role:"tabpanel","aria-labelledby":"nav-block-tab"},o.a.createElement("div",{class:"form-group"},o.a.createElement(ie,{type:"text",id:"menu_".concat(t),name:"blockid",onChange:this.datalistChangeHandler,placeholder:"Block *required",isvalid:"true",required:!0,feedback:null,className:"w-100 border",list:t}),o.a.createElement("datalist",{id:t},this.props.blocks.map(function(e,t){return o.a.createElement("option",{key:t,"data-id":e._id,value:e.name})}))),o.a.createElement("div",{class:"menu-control__action"},o.a.createElement("button",{class:"btn btn-primary w-100",onClick:function(){e.props.addBlockButton(e.state.blockid)}},"add")))),this.props.persistentMenuError?o.a.createElement("p",{class:"error-text text-center"},this.props.persistentMenuError):"")}}])&&me(a.prototype,r),c&&me(a,c),t}();function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _e(e,t){return!t||"object"!==he(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ve=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=_e(this,ge(t).call(this,e)),console.log(e,"MENU"),a}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(t,n["Component"]),a=t,(r=[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"settings__card__menu mr-2 card",style:{border:"1px solid rgba(0, 0, 0, 0.1)"}},o.a.createElement("div",{className:"settings__card__menu__header"},o.a.createElement("p",null,"Menu")),o.a.createElement("ul",{className:"settings__card__menu__list"},this.props.persistent_menu[0].call_to_actions.filter(function(e){return"create free chatbot"!=e.title}).map(function(t,a){return o.a.createElement("li",{className:"settings__card__menu__list__item"},o.a.createElement("i",{class:"fas fa-ellipsis-v bots__content__card__dots m-1 ",href:"#",role:"button",id:"collapse_","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}),o.a.createElement("div",{class:"dropdown-menu","aria-labelledby":"dropdownMenuLink"},o.a.createElement("button",{class:"dropdown-item",onClick:function(){return e.props.menuButtonDelete(a)}},"delete")),o.a.createElement("div",{className:"settings__card__menu__list__item__data"},o.a.createElement("div",{className:"settings__card__menu__list__item__data__name"},o.a.createElement("p",null,t.title))))}),!this.props.paid&&o.a.createElement("li",{className:"settings__card__menu__list__item",style:{color:"grey"}},o.a.createElement("div",{className:"settings__card__menu__list__item__data"},o.a.createElement("div",{className:"settings__card__menu__list__item__data__name"},o.a.createElement("p",null,"create free chatbot"))))))}}])&&ye(a.prototype,r),c&&ye(a,c),t}(),Oe=function(e){return function(t){t({type:"FETCH_BLOCKS"}),s.a.get("".concat(i,"api/bot/block/get-all/").concat(e)).then(function(e){var a=e.data;t({type:"FETCH_BLOCKS_SUCCESS",blocks:a.blocks})}).catch(function(e){return t({type:"FETCH_BLOCK_FAILURE"})})}},we=function(e,t,a){return function(n){return n({type:"CREATE_BLOCK"}),new Promise(function(o,r){s.a.post("".concat(i,"api/bot/block/create/").concat(e),{data:{name:t}}).then(function(t){var r=t.data;n({type:"CREATE_BLOCK_SUCCESS",block:r.block}),o(),!a&&cc.push("/dashboard/bot/blocks/".concat(e,"/").concat(r.block._id))}).catch(function(e){console.log("failed to create new schedule",e)})})}};function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ke(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function je(e,t){return!t||"object"!==Se(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Te(e){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ne(e,t){return(Ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ce=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),je(this,Te(t).apply(this,arguments))}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ne(e,t)}(t,n["Component"]),a=t,(r=[{key:"render",value:function(){var e=this.props.pages,t=(this.props.pagesLoading,this.props.pageConnected);return o.a.createElement("div",{className:"settings__card"},o.a.createElement("p",{className:"settings__card__header"},"Conenct your page"),o.a.createElement("div",{className:"settings__card__connect-page"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-6"},o.a.createElement("select",{id:"select-page",className:"settings__card__connect-page__select form-control"},e.map(function(e){return o.a.createElement("option",{value:e.id+"+"+e.access_token},e.name)}))),o.a.createElement("div",{className:"col-6"},t?o.a.createElement("div",{className:"settings__card__connect-page__page-card"},o.a.createElement("div",{className:"settings__card__connect-page__page-card__data"},o.a.createElement("img",{src:this.props.page.img_url,className:"settings__card__connect-page__page-card__data__image"}),o.a.createElement("p",{className:"settings__card__connect-page__page-card__data__text"},this.props.page?this.props.page.name:""))):o.a.createElement("div",null)),o.a.createElement("div",{className:"col-6 mt-3"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{class:"col-6"},t?"":o.a.createElement("button",{onClick:this.props.connect,ref:"connect-button",class:!0,Name:"btn  btn-outline-success "},"Conenct")),o.a.createElement("div",{className:"col-6"}))),this.props.connectPageLoading?o.a.createElement("div",{className:"col-3 mt-3"},"connecting..."):"",o.a.createElement("div",{className:"col-3 mt-3"},t?o.a.createElement("button",{className:"btn  btn-danger",onClick:this.props.disconnect},"Disconnect"):o.a.createElement("div",null)))))}}])&&ke(a.prototype,r),c&&ke(a,c),t}(),Pe=a(1),Ie=a.n(Pe);function Le(e){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xe(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function De(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ae(e,t){return(Ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Me=function(e){function t(){var e,a,n,o,r,c,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,i=new Array(s),u=0;u<s;u++)i[u]=arguments[u];return n=this,a=!(o=(e=Be(t)).call.apply(e,[this].concat(i)))||"object"!==Le(o)&&"function"!=typeof o?De(n):o,r=De(a),l={bot:{},loader:!0},(c="state")in r?Object.defineProperty(r,c,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[c]=l,a}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ae(e,t)}(t,n["Component"]),a=t,c=[{key:"getDerivedStateFromProps",value:function(e,t){return e.bot!=t.bot&&Object.keys(e.bot).length>0?(console.log("UPDATE "),{bot:e.bot,loader:!1}):t}}],(r=[{key:"componentDidMount",value:function(){console.log("MOUNT")}},{key:"render",value:function(){return o.a.createElement("div",{className:"settings__bot-state text-center"},this.state.loader?o.a.createElement("div",{className:"overlayer",style:{width:"100%",height:"100%"}},o.a.createElement(J,{width:40})):"",o.a.createElement("div",{className:"settings__bot-state__icon ".concat(this.state.bot.paid?"":"settings__bot-state__icon--grey")},o.a.createElement("i",{class:"far fa-check-circle fa-7x"})),o.a.createElement("div",{className:"settings__bot-state__info"},this.state.bot.paid?"paid":"free"),this.state.bot.paid&&o.a.createElement("div",{className:"settings__bot-state__days settings__bot-state__info--grey"},this.state.bot?Ie()(this.state.bot.paid_to).diff(Ie()(),"days"):"Error !"," ",Ie()(this.state.bot.paid_to).diff(Ie()(),"days")>1?"days":"day"," left"))}}])&&xe(a.prototype,r),c&&xe(a,c),t}(),Ue=Object(F.b)(function(e){return{bot:e.bot.bot}})(Me);function Fe(e){for(var t=1;t<arguments.length;t++)if(t%2){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){Ve(e,t,a[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ze(e){return(ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qe(e,t){return(qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ve(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Ke=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=ze(t).call(this,e),a=!o||"object"!==He(o)&&"function"!=typeof o?Ge(n):o,Ve(Ge(a),"addUrlButton",function(){var e=d()("#button-name").val(),t=d()("#button-url").val(),n=a.state.persistent_menu;a.props.bot.bot.paid&&3==n[0].call_to_actions.length&&a.props.bot.bot.paid&&2==n[0].call_to_actions.length?a.setState({persistentMenuError:"maximum 3 buttons !"}):(console.log(n),n[0].call_to_actions.push({type:"web_url",title:e,url:t,webview_height_ratio:"full"}),a.setState({persistent_menu:n}))}),Ve(Ge(a),"addBlockButton",function(e){var t=d()("#button-name").val(),n=a.state.persistent_menu;a.props.bot.bot.paid&&3==n[0].call_to_actions.length&&a.props.bot.bot.paid&&2==n[0].call_to_actions.length?a.setState({persistentMenuError:"maximum 3 buttons !"}):(console.log(n),n[0].call_to_actions.push({type:"postback",title:t,payload:e}),a.setState({persistent_menu:n}))}),Ve(Ge(a),"menuButtonDelete",function(e){console.log(e);var t=a.state.persistent_menu;3==t[0].call_to_actions.length&&a.setState({persistentMenuError:!1}),t[0].call_to_actions=t[0].call_to_actions.filter(function(t,a){return e!=a}),console.log("PRES ",t),a.setState({persistent_menu:t})}),Ve(Ge(a),"saveMenu",function(){var e=a.state.persistent_menu;console.log("PRE",e[0].call_to_actions.length),a.props.bot.bot.paid||0==e[0].call_to_actions.filter(function(e){return"create free chatbot"==e.title}).length&&e[0].call_to_actions.push({type:"web_url",title:"create free chatbot",url:"http://pandabotbeta2.herokuapp.com",webview_height_ratio:"full"}),0==e[0].call_to_actions.length?(console.log("IFFFF"),a.setState({persistentMenuError:"can't be empty "})):(a.setState({menuSave:!0}),console.log("SAVE"),a.props.dispatch(k(a.props.match.params.botid,{persistent_menu:a.state.persistent_menu})).then(function(){a.setState({menuSave:!1,persistentMenuError:!1})}))}),Ve(Ge(a),"connect",function(){var e=d()("#select-page option:selected").val().split("+"),t=d()("#select-page option:selected").text(),n=e[0],o=e[1];console.log("Selected page ",e,t,a.props),a.setState({connectPageLoading:!0}),a.props.dispatch(v(a.props.match.params.botid,{pageName:t,pageId:n,accessToken:o})).then(function(){a.setState({connectPageLoading:!1,pageConnected:!0})})}),Ve(Ge(a),"disconnect",function(){a.props.dispatch(w(a.props.match.params.botid))}),Ve(Ge(a),"componentDidMount",function(){a.props.dispatch(Oe(a.props.match.params.botid)),a.props.dispatch(O(a.props.match.params.botid)),a.props.dispatch(j(a.props.match.params.botid)),a.props.dispatch(ic())}),a.state={pagesLoading:!1,pages:[],page:null,connectPageLoading:!1,pageConnected:!0,persistentMenuError:!1,menuSave:!1,persistent_menu:[{locale:"default",composer_input_disabled:!1,call_to_actions:[]}],welcomeMessageCard:[{type:"text",value:"welcome mr wahid to batchbot",buttons:[{name:"Lecs"},{name:"secs"}]}]},a}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qe(e,t)}(t,n["Component"]),a=t,(r=[{key:"render",value:function(){this.state.welcomeMessageCard;var e=this.state.pagesLoading,t=this.state.pageConnected,a=this.state.pages?this.state.pages:[];return console.log("BLOCKS ",this.props.blocks),o.a.createElement("section",{className:"settings"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-8"},o.a.createElement("div",{className:"card"},e?o.a.createElement("div",{className:"overlayer",style:{width:"100%",height:"100%"}},o.a.createElement(J,{width:40})):"",o.a.createElement(Ce,{disconnect:this.disconnect,connect:this.connect,pages:a,pageConnected:t,pagesLoading:e,page:this.state.page})),o.a.createElement("div",{className:"card"},this.state.menuSave?o.a.createElement("div",{className:"overlayer",style:{width:"100%",height:"100%"}},o.a.createElement(J,{width:40})):"",o.a.createElement("button",{class:"card__save",onClick:this.saveMenu},"Save"),o.a.createElement("div",{className:"settings__card"},o.a.createElement("p",{className:"settings__card__header mb-2"},"Chatbot menu"),o.a.createElement("p",{className:"settings__card__text"},"is simply dummy text of the printing and typesetting industry. Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum"),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-6"},o.a.createElement(be,{blocks:this.props.blocks,persistentMenuError:this.state.persistentMenuError,addUrlButton:this.addUrlButton,addBlockButton:this.addBlockButton})),o.a.createElement("div",{className:"col-6"},o.a.createElement(ve,{paid:this.props.bot.bot.paid,persistent_menu:this.state.persistent_menu,menuButtonDelete:this.menuButtonDelete})))))),o.a.createElement("div",{className:"col-4"},o.a.createElement("div",{className:"card"},o.a.createElement("div",{className:"settings__widget"},o.a.createElement("div",{className:"settings__widget__create-page"},o.a.createElement(Ue,null)))))))}}])&&Re(a.prototype,r),c&&Re(a,c),t}();Ve(Ke,"getDerivedStateFromProps",function(e,t){return e!==t?Fe({},t,{pagesLoading:e.user.userLoader,pages:e.user.pages,pageConnected:!!e.bot.connectedPage,page:e.bot.connectedPage,userLoader:e.user.userLoader,persistent_menu:e.bot.persistent_menu}):Fe({},t)});var We=Object(F.b)(function(e){return{user:e.user,bot:e.bot,blocks:e.block.blocks}})(Ke);function Ye(e){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Je(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qe(e){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ze(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xe(e,t){return(Xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $e(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var et=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=Qe(t).call(this,e),a=!o||"object"!==Ye(o)&&"function"!=typeof o?Ze(n):o,$e(Ze(a),"save",function(){console.log(a.state),a.props.dispatch(N(a.state.id,{messages:a.state.messages,replay:a.state.replay})),a.setState({save:!1})}),$e(Ze(a),"delete",function(){a.props.dispatch(C(a.state.id,a.props.botId))}),a.state={replay:a.props.replay,messages:a.props.messages,save:!1,id:a.props.id,aiError:{messages:"",replay:""}},a}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xe(e,t)}(t,n["Component"]),a=t,(r=[{key:"onChange",value:function(e,t){this.setState($e({},t,e.target.value));var a=this.state.aiError;this.setState({save:!0}),""!=e.target.value&&(a[t]="",this.setState({aiError:a}))}},{key:"componentDidUpdate",value:function(e,t){e!=this.props&&this.setState({id:this.props.id,replay:this.props.replay,messages:this.props.messages})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"Ai__list__item"},o.a.createElement("div",{className:"form-group Ai__list__item__message"},o.a.createElement("i",{className:"fa fa-times Ai__list__item__message__close",onClick:this.delete}),o.a.createElement("textarea",{value:this.state.messages,style:{border:""==this.state.aiError.messages?"":"1px solid red"},className:"form-control  ",onChange:function(t){return e.onChange(t,"messages")},placeholder:"enter messages (eg. hello,welcome,hi) "})),o.a.createElement("div",{className:"form-group Ai__list__item__replay",id:"replay"},o.a.createElement("textarea",{style:{border:""==this.state.aiError.replay?"":"1px solid red"},value:this.state.replay,className:"form-control",onChange:function(t){return e.onChange(t,"replay")},placeholder:"Enter replay.."})),this.state.save?o.a.createElement("button",{onClick:this.save,className:"btn btn-success"},"Save"):"")}}])&&Je(a.prototype,r),c&&Je(a,c),t}(),tt=Object(F.b)()(et);function at(e){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nt(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ot(e){return(ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ct(e,t){return(ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var st=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=ot(t).call(this,e),a=!o||"object"!==at(o)&&"function"!=typeof o?rt(n):o,lt(rt(a),"botid",a.props.match.params.botid),lt(rt(a),"save",function(){var e=a.state.aiError;console.log("LEAVE"),""==a.state.message&&(e.messages="Please you can't leave messages empty"),""==a.state.replay&&(e.replay="Please you can't leave message replay"),a.setState({aiError:e}),""==e.messages&&""==e.replay&&(console.log(a.state),a.props.dispatch(T({messages:a.state.messages,replay:a.state.replay},a.botid)),a.setState({aiError:{messages:"",replay:""}}),a.setState({messages:"",replay:""}))}),lt(rt(a),"add",function(){a.setState({add:!a.state.add})}),a.state={messages:"",replay:"",aiError:{messages:"",replay:""},add:!1,ais:[]},a}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ct(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidMount",value:function(){var e;this.props.dispatch((e=this.props.match.params.botid,function(t){s.a.get("".concat(i,"api/bot/ai/get-all/").concat(e)).then(function(e){t(function(e){return{type:"GET_AIS",ais:e}}(e.data.ais))})}))}},{key:"componentDidUpdate",value:function(e,t){e.bot.ais!==this.props.bot.ais&&this.setState({ais:this.props.bot.ais})}},{key:"onChange",value:function(e,t){this.setState(lt({},t,e.target.value));var a=this.state.aiError;""!=e.target.value&&(a[t]="",this.setState({aiError:a}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"Ai"},o.a.createElement("div",{className:""},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-12"},o.a.createElement("div",{className:"Ai__add",onClick:this.add},o.a.createElement("i",{className:"fa fa-plus"})),o.a.createElement("div",{className:"Ai__list"},this.state.add?o.a.createElement("div",{className:"Ai__list__item Ai__list__item"},o.a.createElement("div",{className:"form-group Ai__list__item__message"},o.a.createElement("textarea",{style:{border:""==this.state.aiError.messages?"":"1px solid red"},onBlur:function(){e.onLeaveBox()},onChange:function(t){return e.onChange(t,"messages")},value:this.state.messages,className:"form-control ",placeholder:"enter messages (eg. hello,welcome,hi) "})),o.a.createElement("div",{className:"form-group Ai__list__item__replay",id:"replay"},o.a.createElement("textarea",{style:{border:""==this.state.aiError.replay?"":"1px solid red"},onBlur:function(){e.onLeaveBox()},onChange:function(t){return e.onChange(t,"replay")},value:this.state.replay,className:"form-control",placeholder:"Enter replay.."})),o.a.createElement("button",{onClick:this.save,className:"btn btn-success"},"Save")):"",this.state.ais.map(function(t,a){return o.a.createElement(tt,{id:t._id,botId:e.props.match.params.botid,replay:t.replay,messages:t.messages})}))))))}}])&&nt(a.prototype,r),c&&nt(a,c),t}(),it=Object(F.b)(function(e){return{bot:e.bot}})(st);function ut(e){return(ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mt(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pt(e){return(pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ft(e,t){return(ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ht=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=pt(t).call(this),a=!o||"object"!==ut(o)&&"function"!=typeof o?dt(n):o,bt(dt(a),"deleteSchedule",function(e){a.props.deleteSchedule(a.props.botId,a.state.schedule._id),d()(e.target).parents("#schdule_section").slideUp(400)}),bt(dt(a),"addActiveClass",function(e){e.currentTarget}),a.state={schedule:e.schedule},a}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ft(e,t)}(t,n["Component"]),a=t,c=[{key:"getDerivedStateFromProps",value:function(e,t){return e.schedule!=t.schedule?{schedule:e.schedule}:null}}],(r=[{key:"componentDidMount",value:function(){this.setState({schedule:this.props.schedule})}},{key:"render",value:function(){return o.a.createElement("div",{style:{position:"relative"},className:"schdule_section"},o.a.createElement("button",{onClick:this.deleteSchedule,className:"d-block badge has-fa-icon btn  btn-secondary d-flex justify-content-center align-items-center",id:"delete_schedule",style:{position:"absolute",right:"3px",top:"5px",zIndex:"1000",width:"20px",height:"20px",borderRadius:"12px",cursor:"pointer"}},o.a.createElement(Q.a,{icon:"times"}),o.a.createElement("span",{className:"fa-icon-cover"})),o.a.createElement(P.b,{to:"/dashboard/bot/schedules/".concat(this.props.botId,"/").concat(this.state.schedule._id),className:"block-schedule",activeClassName:"block--active"},o.a.createElement("button",{type:"button",className:"btn__icon has-fa-icon w-100 h-100"},o.a.createElement("div",null,o.a.createElement("span",{className:"badge badge-secondary mr-1"},Ie()(this.state.schedule.start_date).format("MMM DD")),this.state.schedule.end_date&&o.a.createElement("span",{className:"end-date badge badge-secondary"},Ie()(this.state.schedule.end_date).format("MMM DD"))),o.a.createElement("small",{style:{position:"absolute",right:"24px",bottom:"-21px"}},Ie()(this.state.schedule.start_date).format("hh:mm")))))}}])&&mt(a.prototype,r),c&&mt(a,c),t}(),yt=Object(F.b)(null,{deleteSchedule:function(e,t){return function(a){s.a.delete("".concat(i,"api/bot/schedule/remove/").concat(e,"/").concat(t)).then(function(n){a({type:"DELET_SCHEDULE",scheduleId:t}),cc.push("/dashboard/bot/schedules/".concat(e))})}}})(ht),_t=function(e,t,a,n){return function(o){o({type:"block"===n?"ADD_BLOCK_TEMPLATE":"ADD_SCHEDULE_TEMPLATE"});var r="block"===n?"block-template":"template";return new Promise(function(c,l){s.a.post("".concat(i,"api/bot/").concat(r,"/create/").concat(e,"/").concat(t),{data:a}).then(function(e){var t=e.data.template;try{t.message=JSON.parse(t.message)}catch(e){}o({type:"block"===n?"ADD_BLOCK_TEMPLATE_SUCCESS":"ADD_SCHEDULE_TEMPLATE_SUCCESS",newTemplate:t}),c()}).catch(function(e){console.log(e)})})}},gt=function(e,t,a,n){return function(o){var r="block"===n?"block-template":"template";return s.a.delete("".concat(i,"api/bot/").concat(r,"/remove/").concat(e,"/").concat(t,"/").concat(a)).then(function(e){o({type:"block"===n?"DELETE_BLOCK_TEMPLATE":"DELETE_SCHEDULE_TEMPLATE",id:a})})}},Et=function(e,t,a,n,o){return function(r){var c="block"===o?"block-template":"template";return r({type:"block"===o?"EDIT_BLOCK_TEMPLATE":"EDIT_SCHEDULE_TEMPLATE"}),new Promise(function(l,u){s.a.post("".concat(i,"api/bot/").concat(c,"/edit/").concat(e,"/").concat(t,"/").concat(a),{data:n}).then(function(e){e.data;r({type:"block"===o?"EDIT_BLOCK_TEMPLATE_SUCCESS":"EDIT_SCHEDULE_TEMPLATE_SUCCESS",id:a,newTemplate:n}),l()})})}},vt=function(e,t,a){return function(n){n({type:"block"===a?"FETCH_BLOCK_TEMPLATES":"FETCH_SCHEDULE_TEMPLATES"}),s.a.get("".concat(i,"api/bot/").concat(a,"/get/").concat(e,"/").concat(t)).then(function(e){var t=e.data,o=t.templates.map(function(e){try{e.message=JSON.parse(e.message)}catch(e){}return e});n({type:"block"===a?"FETCH_BLOCK_TEMPLATES_SUCCESS":"FETCH_SCHEDULE_TEMPLATES_SUCCESS",templates:o}),n({type:"block"===a?"SET_CURRENT_BLOCK":"SET_CURRENT_SCHEDULE",current:t.schedule||t.block})}).catch(function(e){console.log(e),n({type:"block"===a?"FETCH_BLOCK_TEMPLATES_FAILURE":"FETCH_SCHEDULE_TEMPLATES_FAILURE"})})}},Ot=function(e){var t=e._addTemplate;return o.a.createElement("div",{className:"list-unstyled btn-group",style:{zIndex:1}},o.a.createElement("button",{className:"choose-template__button  has-fa-icon",onClick:function(){t("button")}},o.a.createElement("span",{className:"fa-icon-cover","data-template":"button"}),o.a.createElement(Q.a,{className:"icon",icon:"align-left"}),o.a.createElement("span",{className:"text"},"Button")),o.a.createElement("button",{className:"choose-template__button has-fa-icon",onClick:function(){t("image")}},o.a.createElement("span",{className:"fa-icon-cover","data-template":"image"}),o.a.createElement(Q.a,{className:"icon",icon:"image"}),o.a.createElement("span",{className:"text"},"image")),o.a.createElement("button",{className:"choose-template__button has-fa-icon",onClick:function(){t("generic")}},o.a.createElement("span",{className:"fa-icon-cover","data-template":"gallery"}),o.a.createElement(Q.a,{className:"icon",icon:"images"}),o.a.createElement("span",{className:"text"},"gallery")),o.a.createElement("button",{className:"choose-template__button has-fa-icon",onClick:function(){t("typing")}},o.a.createElement("span",{className:"fa-icon-cover","data-template":"typing"}),o.a.createElement(Q.a,{className:"icon",icon:"comment-dots"}),o.a.createElement("span",{className:"text"},"typing")),o.a.createElement("button",{className:"choose-template__button has-fa-icon",onClick:function(){t("redirect")}},o.a.createElement("span",{className:"fa-icon-cover","data-template":"redirect"}),o.a.createElement(Q.a,{className:"icon",icon:"chevron-circle-down"}),o.a.createElement("span",{className:"text"},"redirect")))},wt=(a(660),a(685),a(184)),St=function(e){var t=e.message;switch(e.type){case"error":return o.a.createElement("div",{className:"d-flex justify-content-center align-items-center w-100"},o.a.createElement("div",{className:"show-message"},o.a.createElement("h6",{className:" alert alert-danger alert-dismissible fade show "},t,o.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"},"×")))));case"success":return o.a.createElement("div",{className:"d-flex justify-content-center align-items-center w-100"},o.a.createElement("div",{className:"show-message"},o.a.createElement("h6",{className:" alert alert-success alert-dismissible fade show "},t,o.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"},"×")))))}},kt=function(e){return null==e||""===e||0===Object.keys(e).length};function jt(e){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tt(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Nt(e){return(Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pt(e,t){return(Pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function It(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Lt=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=Nt(t).call(this),a=!o||"object"!==jt(o)&&"function"!=typeof o?Ct(n):o,It(Ct(a),"handleInputChange",function(e){var t=e.target;a.setState(It({},t.name,t.value))}),It(Ct(a),"editSchedule",function(){console.log(Ie()(),"MOMEEEEEENT");var e=Ie()(a.state.startDate).local("en").format("YYYY-MM-DD");console.log(e,"DATEEEEEEEEEEEE"),e=Ie()("".concat(e," ").concat(a.state.hour.replace(/^[0]/,""),":").concat(a.state.mins.replace(/^[0]/,"")," ").concat(a.state.time)),console.log(e,"DATEEEEEEEEEEEE");var t,n=Ie()(a.state.endDate).local("en").format("YYYY-MM-DD");n=Ie()("".concat(n," ").concat(a.state.hour.replace(/^[0]/,""),":").concat(a.state.mins.replace(/^[0]/,"")," ").concat(a.state.time)),a.state.isSingleDay?(e=Ie()(a.state.date).local("en").format("YYYY-MM-DD"),t={startDate:(e=Ie()("".concat(e," ").concat(a.state.hour.replace(/^[0]/,""),":").concat(a.state.mins.replace(/^[0]/,"")," ").concat(a.state.time))).toString(),endDate:null}):t={startDate:e.toString(),endDate:n.toString()},console.log("TIMEW ",t),a.props.editSchedule(a.props.match.params.botid,a.props.match.params.scheduleid,t)}),It(Ct(a),"selectDateTypeHandler",function(e){var t=e.target,n=t.checked;a.setState(It({},t.name,n))}),a.state={startDate:Ie()(e.startDate),endDate:null===e.endDate?void 0:Ie()(e.endDate)||Ie()(e.startDate),focusedInput:void 0,hour:"",mins:"",time:"am",date:void 0,focused:!1,isSingleDay:!1},a}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pt(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidUpdate",value:function(e,t){var a=this;e.startDate!==this.props.startDate&&(console.log(this.props.time),this.setState({startDate:Ie()(this.props.startDate),endDate:kt(this.props.endDate)?void 0:Ie()(this.props.endDate),mins:this.props.mins,hour:this.props.hours,time:this.props.time},function(){console.log(a.state),a.state.startDate&&void 0===a.state.endDate&&a.setState({isSingleDay:!0,date:a.state.startDate})}))}},{key:"render",value:function(){for(var e=this,t=[],a=[],n=1;n<=12;n++)n<10?t.push("0".concat(n)):t.push(n);for(var r=0;r<=59;r++)r<10?a.push("0".concat(r)):a.push(r);return o.a.createElement("form",{className:"schedule-time",style:{color:"#888",transform:"scale(0.8)"}},o.a.createElement("div",{className:"date form-group"},o.a.createElement("label",{htmlFor:"date"},"Date"),o.a.createElement("br",null),this.state.isSingleDay?o.a.createElement(wt.SingleDatePicker,{date:this.state.date,onDateChange:function(t){return e.setState({date:t})},focused:this.state.focused,onFocusChange:function(t){var a=t.focused;return e.setState({focused:a})},showDefaultInputIcon:!0,placeholder:"Single day",id:"single_date_picker"}):o.a.createElement(wt.DateRangePicker,{startDate:this.state.startDate,endDate:this.state.endDate,startDateId:"#startDate",endDateId:"#startDate",onDatesChange:function(t){var a=t.startDate,n=t.endDate;console.log(a),e.setState({startDate:a,endDate:n})},focusedInput:this.state.focusedInput,onFocusChange:function(t){return e.setState({focusedInput:t})},showDefaultInputIcon:!0})),o.a.createElement("div",{className:"form-group form-check"},o.a.createElement("input",{type:"checkbox",name:"isSingleDay",checked:this.state.isSingleDay,onChange:this.selectDateTypeHandler,className:"form-check-input ",style:{width:"20px",height:"20px"},id:"single_day"}),o.a.createElement("label",{style:{cursor:"pointer"},className:"ml-3",htmlFor:"single_day"},"choose single day")),o.a.createElement("p",null,"Or"),o.a.createElement("div",{className:"week-days form-group"},o.a.createElement("label",null,"Week days"),o.a.createElement("div",{className:"d-flex"},o.a.createElement("select",{id:"hour",name:"hour",onChange:this.handleInputChange,title:"choose schedule time",className:"form-control mr-2",value:this.state.hour,style:{width:"100px"}},t.map(function(e,t){return o.a.createElement("option",{value:e,key:t},e)})),o.a.createElement("select",{id:"",name:"mins",onChange:this.handleInputChange,title:"choose schedule time",className:"form-control mr-2",value:this.state.mins,style:{width:"100px"}},a.map(function(e,t){return o.a.createElement("option",{value:e,key:t},e)})),o.a.createElement("select",{id:"time",name:"time",onChange:this.handleInputChange,title:"choose schedule time   ",className:"form-control ",value:this.state.time,style:{width:"100px"}},o.a.createElement("option",{value:"am"},"am"),o.a.createElement("option",{value:"pm"},"pm")))),o.a.createElement("div",{className:"schedule-actions "},o.a.createElement(P.a,{to:"/",className:""},"Go back and cancel"),o.a.createElement("button",{onClick:this.editSchedule,type:"button",className:"btn btn-primary ml-3"},"Save schedule"),!1===this.props.scheduleIsEditing&&o.a.createElement("div",{className:"mt-3"},o.a.createElement(St,{type:"success",message:"your schedule is saved successfully"}))))}}])&&Tt(a.prototype,r),c&&Tt(a,c),t}(),xt=Object(F.b)(function(e){return{templates:e.schedule.template.templates,scheduleIsEditing:e.schedule.scheduleIsEditing}},{editSchedule:function(e,t,a){return function(n){var o={start_date:a.startDate,end_date:a.endDate};n({type:"SAVE_SCHEDULE"}),s.a.post("".concat(i,"api/bot/schedule/edit/").concat(e,"/").concat(t),{data:o}).then(function(e){var t=e.data;n({type:"SET_CURRENT_SCHEDULE",current:t.schedule}),n({type:"SAVE_SCHEDULE_SUCCESS",newSchedule:t.schedule})}).catch(function(e){console.log(e),n({type:"SAVE_SCHEDULE_FAILURE"})})}}})(Object(u.f)(Lt)),Bt=a(19),Dt=function(e){switch(e){case"button":return{valid:!1,type:"button",message:{attachment:{type:"template",payload:{template_type:"button",text:"",buttons:[]}}}};case"image":return{valid:!1,type:"image",message:{attachment:{type:"image",payload:{url:"",is_reusable:!0}}}};case"generic":return{valid:!1,type:"generic",message:{attachment:{type:"template",payload:{template_type:"generic",elements:[{title:"",image_url:"",subtitle:"",buttons:[]}]}}}};case"typing":return{valid:!0,type:"typing",seconds:1};case"redirect":return{valid:!1,type:"redirect"};default:return null}},At=function(e,t){var a={};if(!kt(t))switch(e){case"button":kt(t.text)&&(a.text="text field is required");break;case"image":kt(t.image_url)&&(a.picture="picture is required");break;case"gallery":kt(t.image_url)&&(a.picture="picture is required"),kt(t.title)&&(a.title="title is required")}return{isValid:kt(a),errors:a}};function Mt(){return(Mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Ut(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var Ft=function(e){var t=e.type,a=void 0===t?"text":t,n=e.name,r=e.value,c=e.onChange,l=e.placeholder,s=e.required,i=e.feedback,u=e.isvalid,m=e.className,p=void 0===m?"":m,d=e.maxLength,f=void 0===d?"":d,b=Ut(e,["type","name","value","onChange","placeholder","required","feedback","isvalid","className","maxLength"]);return o.a.createElement("div",{style:{position:"relative"}},o.a.createElement("textarea",Mt({type:a,name:n,value:r,onChange:c,placeholder:l,className:"validated-input form-control ".concat(p," ").concat("false"===u&&" is-invalid"),required:s,maxLength:f},b)),o.a.createElement("span",{style:{position:"absolute",zIndex:"100",bottom:0,left:"20px"},className:"invalid-feedback"},i))},Ht=a(434),Rt=function(e){var t={};return kt(e)||("web_url"!==e.buttonType||kt(e.buttonUrl)||Object(Ht.isURL)(e.buttonUrl)||(t.buttonUrl="Please enter a valid url!"),kt(e.buttonTitle)&&(t.buttonTitle="button title is required!"),"web_url"===e.buttonType&&kt(e.buttonUrl)&&(t.buttonUrl="button url is required!"),"postback"===e.buttonType&&null===e.buttonPayload&&(t.buttonPayload="button payload is required!")),{isValid:kt(t),errors:t}};function zt(e){return(zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gt(e){for(var t=1;t<arguments.length;t++)if(t%2){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){Yt(e,t,a[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}function qt(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Vt(e){return(Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wt(e,t){return(Wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Jt=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=Vt(t).call(this),a=!o||"object"!==zt(o)&&"function"!=typeof o?Kt(n):o,Yt(Kt(a),"handleInputChange",function(e){return a.setState(Yt({},e.target.name,e.target.value))}),Yt(Kt(a),"chooseButtonType",function(e){e.stopPropagation(),document.querySelectorAll(".button-type__list li").forEach(function(e){return e.classList.remove("active")}),e.target.classList.add("active"),a.setState({buttonType:e.target.getAttribute("data-button_type")})}),Yt(Kt(a),"datalistChangeHandler",function(e){var t=e.target.value,n=d()("#".concat(a.state.blocksDatalistId)).find("[value='".concat(t,"']")).data("id");a.setState({buttonPayload:n,unCreatedBlockName:t}),""===t.trim()&&a.setState({buttonPayload:null})}),Yt(Kt(a),"handleSubmit",function(e){e.preventDefault();var t={buttonType:a.state.buttonType,buttonTitle:a.state.buttonTitle,buttonPayload:a.state.buttonPayload,buttonUrl:a.state.buttonUrl},n=Rt(t),o=n.isValid,r=n.errors;if(o){if(a.props.buttons.length>=3)return void a.setState({errors:Gt({},a.state.errors,{buttonsNumberLimits:"can't add more than 3 buttons per template !"})},function(){setTimeout(function(){a.props.toggleButtonForm(!1)},3e3)});if(a.state.buttonType,void 0===a.state.buttonPayload)return void a.setState({blockNotFound:!0});a.setState({errors:{}});var c={};switch(a.state.buttonType){case"web_url":c={type:"web_url",url:a.state.buttonUrl,title:a.state.buttonTitle};break;case"postback":c={type:"postback",title:a.state.buttonTitle,payload:a.state.buttonPayload}}if(a.props.template){var l=a.props.template;a.state.isEditForm?a.props._editButtonOfTemplate(c,a.props.button.buttonIndex):a.props._addButtonToTemplate(c),a.props._editTemplate(l),a.props.toggleButtonForm(!1)}else console.error("template was not found")}else a.setState({errors:r})}),Yt(Kt(a),"__createBlock",function(){a.props._createBlock(a.state.unCreatedBlockName,!0),d()("#input_".concat(a.state.blocksDatalistId)).val(""),a.setState({blockNotFound:!1})}),a.state={buttonType:e.button&&e.button.type||"postback",buttonTitle:e.button&&e.button.title||"",buttonPayload:e.button&&e.button.payload||null,buttonUrl:e.button&&e.button.url||"",errors:{},isEditForm:!kt(e.button),blocksDatalistId:ce()(),blockNotFound:!1,unCreatedBlockName:""},a}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wt(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidMount",value:function(){var e=this;if("payload"===this.state.buttonType){var t=this.props.button&&this.props.blocks.find(function(t){return t._id===e.props.button.payload}).name;t&&d()("#input_".concat(this.state.blocksDatalistId)).val(t)}}},{key:"render",value:function(){var e=this,t=this.props,a=t.toggleButtonForm,n=t.animation,r=this.state,c=r.buttonTitle,l=r.buttonType,s=r.buttonUrl,i=r.errors,u=r.isEditForm,m=r.blocksDatalistId;return o.a.createElement(Bt.animated.div,{style:n,className:"add-button-form d-block"},o.a.createElement("span",{className:"badge badge-secondary d-flex justify-content-center align-items-center",style:{position:"absolute",top:"-7px",left:"-9px",fontSize:"16px",fontWeight:"bold",transform:"scale(0.8)",zIndex:"1000",cursor:"pointer"},onClick:function(){return a(!1)}},"×"),o.a.createElement(ie,{type:"text",name:"buttonTitle",value:c,onChange:this.handleInputChange,placeholder:"button title *required",isvalid:i.buttonTitle?"false":"true",required:!0,feedback:i.buttonTitle,className:"w-100 border"}),o.a.createElement("hr",{style:{margin:"10px 0"}}),o.a.createElement("ul",{className:"list-unstyled d-flex justify-content-between w-100 button-type__list mb-3"},o.a.createElement("li",{onClick:this.chooseButtonType,"data-button_type":"postback",style:{cursor:"pointer",position:"relative"},role:"button",className:"has-fa-icon"},o.a.createElement("span",{"data-button_type":"postback",className:"fa-icon-cover "}),o.a.createElement(Q.a,{icon:"th-large"}),o.a.createElement("span",{className:"ml-1"},"section")),o.a.createElement("li",{onClick:this.chooseButtonType,"data-button_type":"web_url",style:{cursor:"pointer"},role:"button",className:"has-fa-icon"},o.a.createElement("span",{className:"fa-icon-cover","data-button_type":"web_url"}),o.a.createElement(Q.a,{icon:"link"}),o.a.createElement("span",{className:"ml-1"},"url")),o.a.createElement("li",{onClick:this.chooseButtonType,"data-button_type":"share",style:{cursor:"pointer"},role:"button",className:"has-fa-icon"},o.a.createElement("span",{className:"fa-icon-cover","data-button_type":"share"}),o.a.createElement(Q.a,{icon:"share-alt"}),o.a.createElement("span",{"data-button-type":"share",className:"ml-1"},"share"))),"postback"===l&&o.a.createElement(o.a.Fragment,null,o.a.createElement(ie,{type:"text",id:"input_".concat(m),name:"buttonPayload",onChange:this.datalistChangeHandler,placeholder:"Block *required",isvalid:i.buttonPayload?"false":"true",required:!0,feedback:i.buttonPayload,className:"w-100 border",list:m}),o.a.createElement("datalist",{id:m},this.props.blocks.map(function(e,t){return o.a.createElement("option",{key:t,"data-id":e._id,value:e.name})})),o.a.createElement(Bt.Transition,{items:this.state.blockNotFound,from:{marginTop:"-40px",opacity:0},enter:{marginTop:"0",opacity:1},leave:{marginTop:"-40px",opacity:0},native:!0},function(t){return t&&function(t){return o.a.createElement(Bt.animated.div,{style:t},o.a.createElement("small",{className:"text-warning"},"this block is not found"),o.a.createElement("button",{type:"button",onClick:e.__createBlock,className:"btn btn-sm mt-1"},o.a.createElement("a",{href:"#",onClick:function(e){return e.preventDefault()}},"create block"),o.a.createElement("span",{className:"badge bg-light"},e.state.unCreatedBlockName," ?")))}})),"web_url"===l&&o.a.createElement(ie,{type:"text",name:"buttonUrl",value:s,onChange:this.handleInputChange,placeholder:"button url *required",isvalid:i.buttonUrl?"false":"true",required:!0,feedback:i.buttonUrl,className:"w-100 border"}),u?o.a.createElement("button",{className:"btn btn-primary float-right mt-3 btn-sm",type:"button",onClick:this.handleSubmit},!0===this.props.newBlockIsLoading?o.a.createElement(J,{width:20}):"Update"):o.a.createElement("button",{className:"btn btn-primary float-right mt-3 btn-sm",type:"button",onClick:this.handleSubmit,style:{position:"relative"}},!0===this.props.newBlockIsLoading?o.a.createElement(J,{width:20}):"Save"),o.a.createElement("div",{className:"clearfix"}),this.state.errors.buttonsNumberLimits&&o.a.createElement("small",{className:"text-danger"},this.state.errors.buttonsNumberLimits))}}])&&qt(a.prototype,r),c&&qt(a,c),t}(),Qt=function(e){var t=e.modalId,a=e.title,n=e.message,r=e.actionButtonBootstrapClass,c=e.doActionButtonTitle,l=e.action;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{tabIndex:-1,className:"modal fade",id:t,role:"dialog","aria-hidden":"true","aria-labelledby":"exampleModalLabel"},o.a.createElement("div",{className:"modal-dialog",role:"document"},o.a.createElement("div",{className:"modal-content"},o.a.createElement("div",{className:"modal-header"},o.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},a),o.a.createElement("button",{className:"close","aria-label":"Close",type:"button","data-dismiss":"modal"},o.a.createElement("span",{"aria-hidden":"true"},"×"))),o.a.createElement("div",{className:"modal-body"},n),o.a.createElement("div",{className:"modal-footer"},o.a.createElement("button",{className:"btn btn-secondary",type:"button","data-dismiss":"modal"},"Close"),o.a.createElement("button",{className:"btn btn-".concat(r),type:"button",onClick:function(e){l(e),d()("#".concat(t)).modal("hide")}},c))))))};function Zt(e){return(Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xt(e){for(var t=1;t<arguments.length;t++)if(t%2){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){na(e,t,a[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}function $t(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ea(e){return(ea=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ta(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aa(e,t){return(aa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function na(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function oa(e,t,a,n,o,r,c){try{var l=e[r](c),s=l.value}catch(e){return void a(e)}l.done?t(s):Promise.resolve(s).then(n,o)}var ra=Bt.Keyframes.Spring(function(){var e,t=(e=regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({from:{opacity:0,transform:"scale(0)"},transform:"scale(1.05)",opacity:.8});case 2:return e.next=4,t({from:{opacity:.8,transform:"scale(1.05)"},transform:"scale(1)",opacity:1});case 4:case"end":return e.stop()}},e)}),function(){var t=this,a=arguments;return new Promise(function(n,o){var r=e.apply(t,a);function c(e){oa(r,n,o,c,l,"next",e)}function l(e){oa(r,n,o,c,l,"throw",e)}c(void 0)})});return function(e){return t.apply(this,arguments)}}()),ca=function(e){function t(e){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n,o,r=e.template.message.attachment.payload.text;return n=this,o=ea(t).call(this),a=!o||"object"!==Zt(o)&&"function"!=typeof o?ta(n):o,na(ta(a),"handleInputChange",function(e){return a.setState(na({},e.target.name,e.target.value))}),na(ta(a),"toggleButtonForm",function(e){e?a.setState({openButtonForm:!0}):(a.setState({openButtonForm:!1}),a.state.currentButton&&a.setState({currentButton:void 0}))}),na(ta(a),"checkIfNoButtons",function(e){var t=Xt({},e);if(t.message.attachment&&0===t.message.attachment.payload.buttons.length){var a=t.message.attachment.payload.text;delete t.message.attachment,t.message={text:a},console.log("template after removing buttons is : ",t)}return t}),na(ta(a),"__editTemplate",function(){var e=a.props,t=e.template,n=e._editTemplate,o=At("button",{text:a.state.text}),r=o.isValid,c=o.errors;if(!r)return a.setState({errors:c}),t.valid=!1,t.message.attachment.payload.text=a.state.text,void n(checkIfNoButtons(t));a.setState({errors:{}}),t.message.attachment.payload.text=a.state.text,t.valid=!0,n(a.checkIfNoButtons(t))}),na(ta(a),"onBlurHandler",function(e){e.target;a.__editTemplate()}),na(ta(a),"setCurrentButton",function(e,t){var n=a.props.buttons[t];n.buttonIndex=t,a.setState({currentButton:n},function(){a.toggleButtonForm(!0)})}),na(ta(a),"deleteButton",function(e,t){e.stopPropagation(),e.preventDefault();var n=a.props,o=n.template,r=n._editTemplate;o.message.attachment.payload.buttons.splice(t,1),r(a.checkIfNoButtons(o))}),na(ta(a),"__deleteTemplate",function(e){a.setState({templateIsBeingDeleted:!0});var t=a.props;(0,t._deleteTemplate)(t.template._id)}),na(ta(a),"_addButtonToTemplate",function(e){var t=a.props,n=t.template,o=t._editTemplate;n.message.attachment.payload.buttons.push(e),o(n)}),na(ta(a),"_editButtonOfTemplate",function(e,t){var n=a.props,o=n.template,r=n._editTemplate;o.message.attachment.payload.buttons[t]=e,r(o)}),a.state={text:r||"",buttons:[],errors:{},openButtonForm:!1,templateIsBeingDeleted:null,currentButton:void 0,modalId:ce()()},a}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aa(e,t)}(t,n["Component"]),a=t,(r=[{key:"render",value:function(){var e=this,t=this.state,a=t.text,n=t.errors,r=t.openButtonForm,c=t.currentButton,l=t.modalId,s=t.templateIsBeingDeleted,i=this.props,u=i.template,m=i.blocks,p=i.buttons,f=i.animation,b=i.newBlockIsLoading,h=p||this.state.buttons;return o.a.createElement(o.a.Fragment,null,o.a.createElement(Qt,{modalId:l,title:"Delete Template!",message:"Are you sure you want to delete this template ?",doActionButtonTitle:"Delete",actionButtonBootstrapClass:"danger",action:this.__deleteTemplate}),o.a.createElement(Bt.animated.div,{style:Xt({},f,{},{zIndex:2,position:"relative"}),className:"button-template"},s&&o.a.createElement("div",{className:"overlayer",style:{width:"250px"}},o.a.createElement(J,{width:30})),o.a.createElement("button",{className:"btn__icon deleteButton_btn has-fa-icon",title:"delete this template",style:{left:"-29px",top:"-14px"},type:"button",onClick:function(){return d()("#".concat(l)).modal("show")}},o.a.createElement("span",{className:"fa-icon-cover"}),o.a.createElement(Q.a,{icon:"trash",size:"sm"})),o.a.createElement("div",{style:{position:"relative"}},o.a.createElement(Ft,{name:"text",onChange:this.handleInputChange,value:a,placeholder:"template text *required",isvalid:n.text?"false":"true",feedback:n.text,required:!0,className:"button-template__text-input",maxLength:"640",onBlur:this.onBlurHandler}),o.a.createElement("span",{className:"badge badge-pill badge-primary",style:{position:"absolute",left:"215px",bottom:"0",zIndex:"9"}},a.length)),o.a.createElement("ul",{className:"buttons-container list-unstyled"},h.map(function(t,a){return o.a.createElement(Bt.Transition,{key:a,from:{transform:"translate3d(0,-10px,0)",opacity:0},enter:{transform:"translate3d(0,0px,0)",opacity:1},leave:{transform:"translate3d(0,-10px,0)",opacity:0}},function(){return function(n){return o.a.createElement(Bt.animated.div,{onClick:function(t){e.setCurrentButton(t,a)},key:a,style:n},o.a.createElement("li",{style:{zIndex:"100",position:"relative",cursor:"pointer"},className:"btn__add-btn btn"},o.a.createElement("span",null,t.title),o.a.createElement("button",{className:"btn__icon deleteButton_btn has-fa-icon",title:"delete this button",type:"button",onClick:function(t){e.deleteButton(t,a)}},o.a.createElement("span",{className:"fa-icon-cover"}),o.a.createElement(Q.a,{icon:"trash-alt",size:"sm"}))))}})})),o.a.createElement("button",{type:"button",className:"btn__add-btn btn",onClick:function(){return e.toggleButtonForm(!0)}},"Add Button"),r&&o.a.createElement(ra,{native:!0},function(t){return o.a.createElement(Jt,{toggleButtonForm:e.toggleButtonForm,animation:t,blocks:m,template:u,buttons:h,button:c,_editTemplate:e.props._editTemplate,_createBlock:e.props._createBlock,newBlockIsLoading:b,_addButtonToTemplate:e._addButtonToTemplate,_editButtonOfTemplate:e._editButtonOfTemplate})})))}}])&&$t(a.prototype,r),c&&$t(a,c),t}(),la=a(435);function sa(e){return(sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ia(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ua(e){return(ua=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ma(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pa(e,t){return(pa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var da=function(e){function t(){var e,a,n,o,r,c,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,i=new Array(s),u=0;u<s;u++)i[u]=arguments[u];return n=this,a=!(o=(e=ua(t)).call.apply(e,[this].concat(i)))||"object"!==sa(o)&&"function"!=typeof o?ma(n):o,r=ma(a),c="state",l={loader:a.props.loader},c in r?Object.defineProperty(r,c,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[c]=l,a}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pa(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidUpdate",value:function(e,t){e.loader!=this.props.loader&&this.setState({loader:this.props.loader})}},{key:"render",value:function(){var e=this.state.loader,t=this.props,a=t.handleInputChange,n=t.image_url;return o.a.createElement("div",{className:this.props.className},o.a.createElement("div",{className:"avatar-upload"},e?o.a.createElement("div",{className:"overlayer"},o.a.createElement(J,{width:"40px"})):"",o.a.createElement("div",{className:"avatar-edit"},o.a.createElement("input",{type:"file",title:"",name:"image-template",onChange:a,accept:".png, .jpg, .jpeg "}),o.a.createElement("label",{className:"d-flex",style:{justifyContent:"center",alignItems:"center"}},o.a.createElement(Q.a,{icon:"upload",className:"upload-icon"}))),o.a.createElement("div",{className:"avatar-preview"},o.a.createElement("div",{style:{backgroundImage:"url(".concat(n,")")}}))))}}])&&ia(a.prototype,r),c&&ia(a,c),t}();function fa(e){return(fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ba(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ha(e){return(ha=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ya(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _a(e,t){return(_a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ga(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Ea=function(e){function t(){var e,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=ha(t).call(this),e=!n||"object"!==fa(n)&&"function"!=typeof n?ya(a):n,ga(ya(e),"readURL",function(t){e.setState({image_url:t});var a=e.props,n=a.template,o=a._editTemplate;n.message.attachment.payload.url=t,o(n)}),ga(ya(e),"handleImageInput",function(t){var a=new FormData;a.append("upload-image",t.target.files[0]),e.setState({loader:!0});var n=e.state.image_url?e.state.image_url.split("images/")[1]:"Un";s.a.post("".concat(i,"api/upload-image/").concat(n),a,{headers:{"content-type":"multipart/form-data"}}).then(function(t){e.readURL("".concat(t.data.img)),e.setState({loader:!1}),e.setState({image_url:"".concat(t.data.img)})})}),ga(ya(e),"__deleteTemplate",function(t){e.setState({loader:!0}),e.props._deleteTemplate(e.props.template._id)}),e.state={image_url:"",errors:{},loader:null,modalId:ce()()},e}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_a(e,t)}(t,n["Component"]),a=t,(r=[{key:"render",value:function(){var e=this.state,t=e.errors,a=e.loader,n=e.image_url,r=e.modalId,c=this.props,l=c.template,s=c.image_url,i=c.animation;return s=l.message.attachment.payload.url,o.a.createElement(o.a.Fragment,null,o.a.createElement(Qt,{modalId:r,title:"Delete Template!",message:"Are you sure you want to delete this template ?",doActionButtonTitle:"Delete",actionButtonBootstrapClass:"danger",action:this.__deleteTemplate}),o.a.createElement(la.a.div,{style:i,className:"image-template"},o.a.createElement("button",{className:"btn__icon deleteButton_btn has-fa-icon",title:"delete this template",style:{left:"-29px",top:"-14px"},type:"button",onClick:function(){return d()("#".concat(r)).modal("show")}},o.a.createElement("span",{className:"fa-icon-cover"}),o.a.createElement(Q.a,{icon:"trash",size:"sm"})),o.a.createElement(da,{className:"img-template__img-uploader",handleInputChange:this.handleImageInput,loader:a,templateId:l._id||"",image_url:s||n}),t.image_url&&o.a.createElement("small",{className:"text-danger"},t.image_url)))}}])&&ba(a.prototype,r),c&&ba(a,c),t}();function va(e){return(va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oa(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function wa(e){for(var t=1;t<arguments.length;t++)if(t%2){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){Na(e,t,a[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}function Sa(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ka(e){return(ka=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ja(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ta(e,t){return(Ta=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Na(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ca(e,t,a,n,o,r,c){try{var l=e[r](c),s=l.value}catch(e){return void a(e)}l.done?t(s):Promise.resolve(s).then(n,o)}var Pa=Bt.Keyframes.Spring(function(){var e,t=(e=regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({from:{opacity:0,transform:"scale(0)"},transform:"scale(1.05)",opacity:.8});case 2:return e.next=4,t({from:{opacity:.8,transform:"scale(1.05)"},transform:"scale(1)",opacity:1});case 4:case"end":return e.stop()}},e)}),function(){var t=this,a=arguments;return new Promise(function(n,o){var r=e.apply(t,a);function c(e){Ca(r,n,o,c,l,"next",e)}function l(e){Ca(r,n,o,c,l,"throw",e)}c(void 0)})});return function(e){return t.apply(this,arguments)}}()),Ia=function(e){function t(e){var a,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=ka(t).call(this),a=!o||"object"!==va(o)&&"function"!=typeof o?ja(n):o,Na(ja(a),"checkIfValid",function(){var e=a.props,t=e.elements,n=e.template,o=!0;t.forEach(function(e){kt(e.title||kt(e.image_url))&&(o=!1)}),n.valid=o,a.props._editTemplate(n)}),Na(ja(a),"readURL",function(e){a.setState({image_url:e});var t=a.props,n=t.template,o=t._editTemplate,r=t.elementIndex;t.templateIsBeingDeleted;n.message.attachment.payload.elements[r].image_url=e,o(n),a.checkIfValid()}),Na(ja(a),"handleImageInput",function(e){var t=new FormData;t.append("upload-image",e.target.files[0]),a.setState({loader:!0});var n=a.state.image_url?a.state.image_url.split("images/")[1]:"Un";s.a.post("".concat(i,"api/upload-image/").concat(n),t,{headers:{"content-type":"multipart/form-data"}}).then(function(e){a.readURL("".concat(e.data.img)),a.setState({loader:!1}),a.setState({image_url:"".concat(e.data.img)})})}),Na(ja(a),"handleInputChange",function(e){return a.setState(Na({},e.target.name,e.target.value))}),Na(ja(a),"toggleButtonForm",function(e){e?a.setState({openButtonForm:!0}):(a.setState({openButtonForm:!1}),a.state.currentButton&&a.setState({currentButton:void 0}))}),Na(ja(a),"__editTemplate",function(e){var t=a.props,n=t.template,o=t._editTemplate,r=t.elementIndex,c=a.state,l=c.title,s=c.subtitle,i=c.image_url,u={};if(n.valid=!0,kt(a.state.title))return u.title="title field is required !",n.valid=!1,void a.setState({errors:wa({},a.state.errors,{},u)});kt(a.state.image_url)&&(n.valid=!1),a.setState({errors:{}}),n.message.attachment.payload.elements[r].title=l,n.message.attachment.payload.elements[r].subtitle=s,n.message.attachment.payload.elements[r].image_url=i,o(n)}),Na(ja(a),"onBlurHandler",function(e){var t=e.target;a.__editTemplate(t)}),Na(ja(a),"setCurrentButton",function(e,t){var n=a.props.element.buttons[t];n.buttonIndex=t,a.setState({currentButton:n},function(){a.toggleButtonForm(!0)})}),Na(ja(a),"deleteButton",function(e,t){e.stopPropagation(),e.preventDefault();var n=a.props,o=n.template,r=n._editTemplate,c=n.elementIndex;o.message.attachment.payload.elements[c].buttons.splice(t,1),r(o)}),Na(ja(a),"_editButtonOfTemplate",function(e,t){var n=a.props,o=n.template,r=n.elementIndex,c=n._editTemplate;o.message.attachment.payload.elements[r].buttons[t]=e,c(o)}),Na(ja(a),"_addButtonToTemplate",function(e){var t=a.props,n=t.template,o=t.elementIndex,r=t._editTemplate;n.message.attachment.payload.elements[o].buttons.push(e),r(n)}),Na(ja(a),"deleteElement",function(){a.setState({elementIsBeingDeleted:!0});var e=a.props,t=e.template,n=e.elementIndex,o=e._editTemplate,r=e.elements;r.splice(n,1),t.message.attachment.payload.elements=Oa(r),o(t)});var r=e.element,c=r.title,l=r.subtitle,u=r.image_url;return a.state={title:c||"",subtitle:l||"",image_url:u||null,loader:!1,elementIsBeingDeleted:null,buttons:[],errors:{},openButtonForm:!1,currentButton:void 0},a}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ta(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidMount",value:function(){console.log("mounted")}},{key:"componentDidUpdate",value:function(e,t){this.props.elements.length!==e.elements.length&&this.setState({elementIsBeingDeleted:!1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.loader,n=t.image_url,r=t.title,c=t.subtitle,l=t.openButtonForm,s=t.currentButton,i=t.errors,u=t.elementIsBeingDeleted,m=this.props,p=m.template,d=m.image_url,f=m.elementIndex,b=m.blocks,h=m.element,y=m.animation,_=m.newBlockIsLoading,g=m.elementsLength,E=m.templateIsBeingDeleted,v=h&&h.buttons,O=v||this.state.buttons;return o.a.createElement(Bt.animated.div,{className:"mr-1",style:y},u&&o.a.createElement("div",{className:"overlayer"},o.a.createElement(J,{width:30})),E&&o.a.createElement("div",{className:"overlayer"},o.a.createElement(J,{width:30})),o.a.createElement(da,{className:"img-template__img-uploader",handleInputChange:this.handleImageInput,loader:a,templateId:p._id||"",image_url:d||n,index:f}),g>1&&o.a.createElement("span",{onClick:this.deleteElement,style:{position:"absolute",top:"-34px",right:"-17px",width:"25px",height:"25px",fontSize:"25px",cursor:"pointer",fontWeight:"bold"},title:"Delete Element"},"×"),o.a.createElement("div",{className:"p-2",style:{background:"#FFF"}},o.a.createElement("div",{style:{position:"relative"}},o.a.createElement(ie,{name:"title",value:r,onChange:this.handleInputChange,placeholder:"Title.. *required",isvalid:i.title?"false":"true",required:!0,maxLength:80,feedback:i.title,className:"mb-2",style:{borderRadius:"7px",padding:"30px 10px",border:"1px solid #DDD"},onBlur:this.onBlurHandler}),o.a.createElement("span",{className:"badge badge-pill badge-primary",style:{position:"absolute",left:"215px",bottom:"0",zIndex:"9",opacity:.7}},r.length)),o.a.createElement("div",{style:{position:"relative"}},o.a.createElement(ie,{name:"subtitle",value:c,onChange:this.handleInputChange,placeholder:"Subtitle..",isvalid:i.subtitle?"false":"true",feedback:i.subtitle,maxLength:80,style:{borderRadius:"0",paddingRight:"20px",fontSize:"14px"},onBlur:this.onBlurHandler}),o.a.createElement("span",{className:"badge badge-pill badge-primary",style:{position:"absolute",left:"215px",bottom:"0",zIndex:"9",opacity:.7}},c.length))),o.a.createElement("ul",{className:"buttons-container list-unstyled"},O.map(function(t,a){return o.a.createElement(Bt.Transition,{key:a,from:{transform:"translate3d(0,-10px,0)",opacity:0},enter:{transform:"translate3d(0,0px,0)",opacity:1},leave:{transform:"translate3d(0,-10px,0)",opacity:0}},function(){return function(n){return o.a.createElement(Bt.animated.div,{onClick:function(t){e.setCurrentButton(t,a)},key:a,style:n},o.a.createElement("li",{style:{zIndex:"100",position:"relative",cursor:"pointer"},className:"btn__add-btn btn"},o.a.createElement("span",null,t.title),o.a.createElement("button",{className:"btn__icon deleteButton_btn has-fa-icon",title:"delete this button",type:"button",onClick:function(t){e.deleteButton(t,a)}},o.a.createElement("span",{className:"fa-icon-cover"}),o.a.createElement(Q.a,{icon:"trash-alt",size:"sm"}))))}})})),o.a.createElement("button",{type:"button",className:"btn__add-btn btn",onClick:function(){return e.toggleButtonForm(!0)}},"Add Button"),l&&o.a.createElement(Pa,{native:!0},function(t){return o.a.createElement(Jt,{toggleButtonForm:e.toggleButtonForm,animation:t,blocks:b,template:p,buttons:O,button:s,_editTemplate:e.props._editTemplate,_createBlock:e.props._createBlock,_editButtonOfTemplate:e._editButtonOfTemplate,_addButtonToTemplate:e._addButtonToTemplate,newBlockIsLoading:_})}))}}])&&Sa(a.prototype,r),c&&Sa(a,c),t}(),La=(a(799),function(){return o.a.createElement("div",{className:"loading"},o.a.createElement("div",{className:"thumbnail"},o.a.createElement("div",{className:"black"}),o.a.createElement("div",{className:"caption"},o.a.createElement("div",{className:"p"}),o.a.createElement("div",{className:"p2"}),o.a.createElement("div",{className:"p"}),o.a.createElement("div",{className:"p2"}))))});function xa(e){return(xa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ba(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Da(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Aa(e){return(Aa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ma(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ua(e,t){return(Ua=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Ha=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=Aa(t).call(this),a=!o||"object"!==xa(o)&&"function"!=typeof o?Ma(n):o,Fa(Ma(a),"__deleteTemplate",function(e){a.setState({templateIsBeingDeleted:!0});var t=a.props;(0,t._deleteTemplate)(t.template._id)}),Fa(Ma(a),"addElement",function(){a.setState({newElementLoading:!0});var e=function(e){for(var t=1;t<arguments.length;t++)if(t%2){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){Fa(e,t,a[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}({},a.props.template);e.message.attachment.payload.elements=[].concat(Ba(a.props.elements),[{title:"",image_url:"",subtitle:"",buttons:[]}]),a.props._editTemplate(e)}),a.state={templateIsLoading:void 0,modalId:ce()(),galleryTemplateId:ce()(),newElementLoading:null,templateIsBeingDeleted:null},a}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ua(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidUpdate",value:function(e,t){this.props.elements.length>e.elements.length&&this.setState({newElementLoading:!1})}},{key:"componentDidMount",value:function(){d()("#".concat(this.state.galleryTemplateId)).parents(".template-form__gallery").scrollLeft(1e3)}},{key:"render",value:function(){var e=this.props,t=e.template,a=e._editTemplate,n=e.blocks,r=e.newBlockIsLoading,c=e._createBlock,l=e.animation,s=e.elements,i=this.state,u=i.modalId,m=i.galleryTemplateId,p=i.newElementLoading,f=i.templateIsBeingDeleted;return o.a.createElement(o.a.Fragment,null,o.a.createElement(Qt,{modalId:u,title:"Delete Template!",message:"Are you sure you want to delete this template ?",doActionButtonTitle:"Delete",actionButtonBootstrapClass:"danger",action:this.__deleteTemplate}),o.a.createElement("div",{className:"gallery-template d-flex mt-5 mb-1 ",id:m,style:{position:"relative"}},o.a.createElement("button",{className:"btn__icon deleteButton_btn has-fa-icon",title:"delete this template",style:{left:"-29px",top:"-14px"},type:"button",onClick:function(){return d()("#".concat(u)).modal("show")}},o.a.createElement("span",{className:"fa-icon-cover"}),o.a.createElement(Q.a,{icon:"trash",size:"sm"})),s.map(function(e,i){return o.a.createElement(Ia,{key:ce()(),element:e,template:t,elementIndex:i,elementsLength:s.length,blocks:n,newBlockIsLoading:r,_editTemplate:a,_createBlock:c,animation:l,elements:Ba(s),templateIsBeingDeleted:f})}),o.a.createElement("div",{className:"d-flex justify-content-center align-items-center ml-2 pr-2"},p&&o.a.createElement("div",{className:"",style:{position:"relative",width:"250px",height:"100%"}},o.a.createElement(La,null)),o.a.createElement("button",{onClick:this.addElement,className:"btn btn-primary"},"+"))))}}])&&Da(a.prototype,r),c&&Da(a,c),t}();function Ra(e){return(Ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function za(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ga(e){return(Ga=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Va(e,t){return(Va=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ka(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Wa=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=Ga(t).call(this,e),a=!o||"object"!==Ra(o)&&"function"!=typeof o?qa(n):o,Ka(qa(a),"datalistChangeHandler",function(e){var t=e.target.value,n=d()("#".concat(a.state.blocksDatalistId)).find("[value='".concat(t,"']")).data("id");n||a.setState({errors:{blockid:!0}}),a.setState({blockid:n,unCreatedBlockName:t},function(){a.editTemplate()}),""===t.trim()&&a.setState({blockid:null})}),Ka(qa(a),"onChangeSeconds",function(e){console.log("E ",e.target.value),a.setState({seconds:e.target.value},function(){d()("#seconds_".concat(a.props.template._id," option[value=").concat(a.state.seconds,"]")).attr("selected","selected"),a.props.template._id&&a.editTemplate()})}),Ka(qa(a),"editTemplate",function(){var e=a.props,t=e.template,n=e._editTemplate;a.setState({errors:{}}),t.redirect=a.state.blockid,t.valid=!0,n(t)}),Ka(qa(a),"__deleteTemplate",function(){var e=a.props;(0,e._deleteTemplate)(e.template._id)}),a.state={botId:e.match.params.botid,blocksDatalistId:ce()(),blockid:e.template.redirect,errors:{blockid:!1}},a}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Va(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.template;e._editTemplate;try{if(t.redirect){var a=this.props.blocks.find(function(e){return e._id===t.redirect}).name;console.log("BLOCK NAM ",a),a&&d()("#input_".concat(this.state.blocksDatalistId)).val(a)}}catch(e){console.log(e)}t.redirect||this.setState({errors:{blockid:!0}}),d()("#seconds_".concat(this.props.template._id," option[value=").concat(this.state.seconds,"]")).attr("selected","selected")}},{key:"render",value:function(){for(var e=this.state,t=e.errors,a=e.blocksDatalistId,n=[],r=1;r<=20;r++)n.push(o.a.createElement("option",{value:r},r,"s"));var c=this.props.template._id;return o.a.createElement("div",{className:"typing-template"},o.a.createElement(Qt,{modalId:"typing-".concat(c),title:"Delete Template!",message:"Are you sure you want to delete this template ?",doActionButtonTitle:"Delete",actionButtonBootstrapClass:"danger",action:this.__deleteTemplate}),o.a.createElement("button",{className:"btn__icon deleteButton_btn has-fa-icon",title:"delete this template",style:{left:"-29px",top:"-14px"},type:"button",onClick:function(){return d()("#typing-".concat(c)).modal("show")}},o.a.createElement("span",{className:"fa-icon-cover"}),o.a.createElement(Q.a,{icon:"trash",size:"sm"})),o.a.createElement("div",{className:"typing-template__header",style:{background:"#007bc3"}},o.a.createElement("p",null,"Redirect to block")),o.a.createElement("div",{className:"typing-template__body"},o.a.createElement("div",{className:"typing-template__body__info",style:{flex:"1"}},"choose next block being sent to user . it will help you to make good flow to your bot",o.a.createElement("br",null),o.a.createElement("small",{style:{color:"grey"}},"Note : it must be last element in your sequence")),o.a.createElement("div",{className:"typing-template__body__time"},o.a.createElement(ie,{type:"text",id:"input_".concat(a),name:"blockid",onChange:this.datalistChangeHandler,placeholder:"Block *required",isvalid:t.blockid?"false":"true",required:!0,feedback:t.blockid,className:"w-100 border",list:a}),o.a.createElement("datalist",{id:a},this.props.blocks.map(function(e,t){return o.a.createElement("option",{key:t,"data-id":e._id,value:e.name})})))))}}])&&za(a.prototype,r),c&&za(a,c),t}(),Ya=Object(F.b)()(Object(u.f)(Wa));function Ja(e){return(Ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qa(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Za(e){return(Za=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $a(e,t){return($a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function en(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var tn=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=Za(t).call(this,e),a=!o||"object"!==Ja(o)&&"function"!=typeof o?Xa(n):o,en(Xa(a),"onChangeSeconds",function(e){console.log("E ",e.target.value),a.setState({seconds:e.target.value},function(){d()("#seconds_".concat(a.props.template._id," option[value=").concat(a.state.seconds,"]")).attr("selected","selected"),a.props.template._id&&a.editTemplate()})}),en(Xa(a),"editTemplate",function(){var e=a.props,t=e.template,n=e._editTemplate;a.setState({errors:{}}),t.message="",t.seconds=a.state.seconds,t.valid=!0,n(t)}),en(Xa(a),"__deleteTemplate",function(){var e=a.props;(0,e._deleteTemplate)(e.template._id)}),a.state={seconds:e.template.seconds||1,botId:e.match.params.botid},a}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$a(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidMount",value:function(){d()("#seconds_".concat(this.props.template._id," option[value=").concat(this.state.seconds,"]")).attr("selected","selected")}},{key:"render",value:function(){for(var e=[],t=1;t<=20;t++)e.push(o.a.createElement("option",{value:t},t,"s"));var a=this.props.template._id;return o.a.createElement("div",{className:"typing-template"},o.a.createElement(Qt,{modalId:"typing-".concat(a),title:"Delete Template!",message:"Are you sure you want to delete this template ?",doActionButtonTitle:"Delete",actionButtonBootstrapClass:"danger",action:this.__deleteTemplate}),o.a.createElement("button",{className:"btn__icon deleteButton_btn has-fa-icon",title:"delete this template",style:{left:"-29px",top:"-14px"},type:"button",onClick:function(){return d()("#typing-".concat(a)).modal("show")}},o.a.createElement("span",{className:"fa-icon-cover"}),o.a.createElement(Q.a,{icon:"trash",size:"sm"})),o.a.createElement("div",{className:"typing-template__header"},o.a.createElement("p",null,"typing...")),o.a.createElement("div",{className:"typing-template__body"},o.a.createElement("div",{className:"typing-template__body__info"},"select number of seconds that this typing block will shown to the user"),o.a.createElement("div",{className:"typing-template__body__time"},o.a.createElement("div",{className:"form-group"},o.a.createElement("select",{class:"form-control",id:"seconds_".concat(a),onChange:this.onChangeSeconds},e.map(function(e){return e}))))))}}])&&Qa(a.prototype,r),c&&Qa(a,c),t}(),an=Object(F.b)()(Object(u.f)(tn));function nn(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function on(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var rn=function(e){var t=e.blocks,a=e.template,n=e.animation;switch(e.renderedTemplate||e.selectedTemplate){case"button":var r=function(e){for(var t=1;t<arguments.length;t++)if(t%2){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){on(e,t,a[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}({},a);if(kt(r.message.attachment)){var c=r.message.text,l=r._id;(r=Dt("button")).message.attachment.payload.text=c,r.message.attachment.payload.buttons=[],r._id=l}return o.a.createElement("div",{className:"template-form my-3"},o.a.createElement(ca,{blocks:t,template:r,buttons:nn(r.message.attachment.payload.buttons),_editTemplate:e._editTemplate,_deleteTemplate:e._deleteTemplate,_createBlock:e._createBlock,animation:n,newBlockIsLoading:e.newBlockIsLoading}));case"image":return o.a.createElement("div",{className:"template-form my-3"},o.a.createElement(Ea,{_editTemplate:e._editTemplate,_deleteTemplate:e._deleteTemplate,template:a,animation:n}));case"generic":return o.a.createElement("div",{className:"template-form my-3 template-form__gallery"},o.a.createElement(Ha,{animation:n,elements:a.message.attachment.payload.elements,template:a,_editTemplate:e._editTemplate,_deleteTemplate:e._deleteTemplate,_createBlock:e._createBlock,newBlockIsLoading:e.newBlockIsLoading,blocks:t}));case"typing":return o.a.createElement("div",{className:"template-form my-3"},o.a.createElement(an,{blocks:t,template:a,animation:n,_editTemplate:e._editTemplate,_deleteTemplate:e._deleteTemplate}));case"redirect":return o.a.createElement("div",{className:"template-form my-3"},o.a.createElement(Ya,{blocks:t,template:a,_editTemplate:e._editTemplate,_deleteTemplate:e._deleteTemplate,animation:n}));default:return null}};function cn(e){return(cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ln(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function sn(e){return(sn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function un(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mn(e,t){return(mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var dn=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=sn(t).call(this),a=!o||"object"!==cn(o)&&"function"!=typeof o?un(n):o,pn(un(a),"_addTemplate",function(e){var t=Dt(e);a.props.addTemplate(a.state.botId,a.state.scheduleId,t,"schedule")}),pn(un(a),"_editTemplate",function(e){a.props.editTemplate(a.state.botId,a.state.scheduleId,e._id,e,"schedule")}),pn(un(a),"_deleteTemplate",function(e){a.props.deleteTemplate(a.state.botId,a.state.scheduleId,e,"schedule")}),pn(un(a),"_createBlock",function(e,t){a.props.createBlock(a.state.botId,e,t)}),a.state={botId:e.match.params.botid,scheduleId:e.match.params.scheduleid,currentSchedule:{}},a}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mn(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidMount",value:function(){this.props.fetchTemplates(this.props.match.params.botid,this.props.match.params.scheduleid,"schedule")}},{key:"componentDidUpdate",value:function(e,t){this.props.currentSchedule!==e.currentSchedule&&this.setState({currentSchedule:this.props.currentSchedule}),e.match.params.scheduleid!==this.props.match.params.scheduleid&&(this.setState({scheduleId:this.props.match.params.scheduleId}),this.props.fetchTemplates(this.props.match.params.botid,this.props.match.params.scheduleid,"schedule"))}},{key:"render",value:function(){var e=this,t=this.props,a=t.templates,n=t.blocks,r=t.newBlockIsLoading,c=t.templateIsLoading;return t.templatesAreLoading?o.a.createElement("div",{className:"overlayer with-navs",style:{left:"338px"}},o.a.createElement(J,{width:40})):o.a.createElement("main",{className:"schedule"},o.a.createElement("div",{className:"create-template"},o.a.createElement("h5",null,"Add Schedule"),o.a.createElement("p",null,o.a.createElement("small",{className:"text-muted"},"add different types of message elements")),o.a.createElement("div",null,o.a.createElement("section",{className:"templates-container "},o.a.createElement("div",{className:"templates"},o.a.createElement(Bt.Transition,{items:a,keys:function(e){return e._id},from:{opacity:0,transform:"scale(0)"},enter:{opacity:1,transform:"scale(1)"},leave:{opacity:0}},function(t){return function(a){return o.a.createElement(rn,{key:t._id,selectedTemplate:t.type,blocks:n,template:t,_deleteTemplate:e._deleteTemplate,_editTemplate:e._editTemplate,_createBlock:e._createBlock,animation:a,newBlockIsLoading:r})}})),o.a.createElement("br",null),!0===c&&o.a.createElement("div",{className:"my-3"},o.a.createElement(J,{LoaderName:"dots",style:{transform:"scale(0.7)"}})),o.a.createElement(Ot,{templates:a,_addTemplate:this._addTemplate})),o.a.createElement(xt,{startDate:this.state.currentSchedule.start_date,endDate:this.state.currentSchedule.end_date,hours:Ie()(this.state.currentSchedule.start_date).format("hh"),mins:Ie()(this.state.currentSchedule.start_date).format("mm"),time:Ie()(this.state.currentSchedule.start_date).format("a"),botId:this.props.match.params.botid,scheduleId:this.props.match.params.scheduleid}))))}}])&&ln(a.prototype,r),c&&ln(a,c),t}(),fn=Object(F.b)(function(e){return{templates:e.schedule.template.templates,currentSchedule:e.schedule.currentSchedule,templateIsLoading:e.schedule.template.isLoading,blocks:e.block.blocks,newBlockIsLoading:e.block.newBlockIsLoading,templatesAreLoading:e.schedule.template.templatesAreLoading}},{fetchTemplates:vt,addTemplate:_t,editTemplate:Et,deleteTemplate:gt,createBlock:we})(dn);function bn(e){return(bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hn(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yn(e){return(yn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gn(e,t){return(gn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function En(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var vn=function(e){function t(){var e,a,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return n=this,o=(e=yn(t)).call.apply(e,[this].concat(c)),a=!o||"object"!==bn(o)&&"function"!=typeof o?_n(n):o,En(_n(a),"state",{schedules:[]}),En(_n(a),"botId",a.props.match.params.botid),En(_n(a),"createSchedule",function(){a.props.createSchedule(a.botId)}),a}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gn(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidMount",value:function(){this.props.fetchSchedules(this.botId),this.props.fetchBlocks(this.props.match.params.botid)}},{key:"componentDidUpdate",value:function(e,t){e.schedules!==this.props.schedules&&this.setState({schedules:this.props.schedules})}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"schedule-layout has-sidebar has-navbar"},o.a.createElement("div",{className:"blocks-schedule with-scroll",style:{top:"70px",paddingTop:"10px"}},o.a.createElement("button",{className:"btn btn__blue has-fa-icon",style:{width:"100%",borderRadius:"10px",height:"40px"},type:"button",onClick:this.createSchedule},o.a.createElement("span",{className:"fa-icon-cover"}),!0===this.props.newScheduleHasLoaded&&o.a.createElement(Q.a,{icon:"plus"}),this.props.newScheduleIsLoading&&o.a.createElement(J,{width:16})),this.props.schedulesAreLoading?o.a.createElement("div",{className:"mt-3"},o.a.createElement(J,{width:25,top:!0})):this.state.schedules.map(function(t,a){return o.a.createElement(yt,{schedule:t,botId:e.props.match.params.botid,key:a})})),o.a.createElement(u.b,{history:cc},o.a.createElement(u.a,{path:"/dashboard/bot/schedules/:botid/:scheduleid",component:fn}))))}}])&&hn(a.prototype,r),c&&hn(a,c),t}(),On=Object(F.b)(function(e){return{templates:e.schedule.template.templates,schedules:e.schedule.schedules,schedulesAreLoading:e.schedule.schedulesAreLoading,newScheduleIsLoading:e.schedule.newScheduleIsLoading,newScheduleHasLoaded:e.schedule.newScheduleHasLoaded}},{fetchSchedules:function(e){return function(t){t({type:"FETCH_SCHEDULES"}),s.a.get("".concat(i,"api/bot/schedule/get-all/").concat(e)).then(function(e){var a=e.data;t({type:"FETCH_SCHEDULES_SUCCESS",schedules:a.schedules})}).catch(function(e){return t({type:"FETCH_SCHEDULE_FAILURE"})})}},createSchedule:function(e){return function(t){t({type:"CREATE_SCHEDULE"}),s.a.post("".concat(i,"api/bot/schedule/create/").concat(e),{data:{start_date:Ie()().add(10,"hours").toString()}}).then(function(a){var n=a.data;t({type:"CREATE_SCHEDULE_SUCCESS",schedule:n.schedule}),cc.push("/dashboard/bot/schedules/".concat(e,"/").concat(n.schedule._id))}).catch(function(e){console.log("failed to create new schedule")})}},fetchBlocks:Oe})(vn);function wn(e){return(wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sn(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function kn(e){return(kn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tn(e,t){return(Tn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Cn=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=kn(t).call(this),a=!o||"object"!==wn(o)&&"function"!=typeof o?jn(n):o,Nn(jn(a),"deleteBlock",function(e){a.props.deleteBlock(a.botId,a.state.block._id),d()(e.target).parents("#schdule_section").slideUp(400)}),Nn(jn(a),"addActiveClass",function(e){e.currentTarget}),a.state={block:e.block},a.botId=e.match.params.botid,a}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tn(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidMount",value:function(){this.setState({block:this.props.block})}},{key:"componentDidUpdate",value:function(e,t){e.block!==this.props.block&&this.setState({block:this.props.block})}},{key:"render",value:function(){return o.a.createElement("div",{style:{position:"relative"},className:"schdule_section"},o.a.createElement("button",{onClick:this.deleteBlock,className:"d-block badge has-fa-icon btn  btn-secondary d-flex justify-content-center align-items-center",id:"delete_schedule",style:{position:"absolute",right:"3px",top:"5px",zIndex:"1000",width:"20px",height:"20px",borderRadius:"12px",cursor:"pointer"}},o.a.createElement(Q.a,{icon:"times"}),o.a.createElement("span",{className:"fa-icon-cover"})),o.a.createElement(P.b,{to:"/dashboard/bot/blocks/".concat(this.botId,"/").concat(this.state.block._id),className:"block-schedule",activeClassName:"block--active",style:{padding:"0"}},o.a.createElement("button",{type:"button",className:"btn__icon has-fa-icon w-100 h-100 d-flex justify-content-center align-items-center"},o.a.createElement("h5",{style:{margin:0,fontWeight:"bold"}},this.state.block.name))))}}])&&Sn(a.prototype,r),c&&Sn(a,c),t}(),Pn=Object(F.b)(null,{deleteBlock:function(e,t){return function(a){s.a.delete("".concat(i,"api/bot/block/remove/").concat(e,"/").concat(t)).then(function(n){a({type:"DELETE_BLOCK",blockId:t}),cc.push("/dashboard/bot/blocks/".concat(e))})}}})(Object(u.f)(Cn));function In(e){return(In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ln(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xn(e){return(xn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dn(e,t){return(Dn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function An(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Mn=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=xn(t).call(this),a=!o||"object"!==In(o)&&"function"!=typeof o?Bn(n):o,An(Bn(a),"_addTemplate",function(e){var t=Dt(e);a.props.addTemplate(a.state.botId,a.state.blockId,t,"block")}),An(Bn(a),"_editTemplate",function(e){a.props.editTemplate(a.state.botId,a.state.blockId,e._id,e,"block")}),An(Bn(a),"_deleteTemplate",function(e){a.props.deleteTemplate(a.state.botId,a.state.blockId,e,"block")}),An(Bn(a),"_createBlock",function(e,t){a.props.createBlock(a.state.botId,e,t)}),a.state={botId:e.match.params.botid,blockId:e.match.params.blockid},a}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dn(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidMount",value:function(){this.props.fetchTemplates(this.props.match.params.botid,this.props.match.params.blockid,"block")}},{key:"componentDidUpdate",value:function(e,t){e.match.params.blockid!==this.props.match.params.blockid&&(this.setState({blockId:this.props.match.params.blockid}),this.props.fetchTemplates(this.props.match.params.botid,this.props.match.params.blockid,"block"))}},{key:"render",value:function(){var e=this,t=this.props,a=t.templates,n=t.blocks,r=t.newBlockIsLoading,c=t.templateIsLoading,l=t.templatesAreLoading;t.templateIsEditing;return l?o.a.createElement("div",{className:"overlayer with-navs",style:{left:"338px"}},o.a.createElement(J,{width:40})):o.a.createElement("main",{className:"schedule"},o.a.createElement("div",{className:"create-template"},o.a.createElement("h5",null,"Add blocks"),o.a.createElement("p",null,o.a.createElement("small",{className:"text-muted"},"add different types of message elements")),o.a.createElement("section",{className:""},o.a.createElement(Bt.Transition,{items:a,keys:function(e){return e._id},from:{opacity:0,transform:"scale(0)"},enter:{opacity:1,transform:"scale(1)"},leave:{opacity:0}},function(t){return function(a){return o.a.createElement(rn,{key:t._id,selectedTemplate:t.type,blocks:n,template:t,_deleteTemplate:e._deleteTemplate,_editTemplate:e._editTemplate,_createBlock:e._createBlock,animation:a,newBlockIsLoading:r})}}),!0===c&&o.a.createElement(J,{style:{transform:"scale(0.7)"},LoaderName:"dots"}),o.a.createElement(Ot,{templates:a,_addTemplate:this._addTemplate}))))}}])&&Ln(a.prototype,r),c&&Ln(a,c),t}(),Un=Object(F.b)(function(e){return{templates:e.block.template.templates,templatesAreLoading:e.block.template.templatesAreLoading,templateIsLoading:e.block.template.isLoading,blocks:e.block.blocks,newBlockIsLoading:e.block.newBlockIsLoading,templateIsEditing:e.block.template.templateIsEditing}},{fetchTemplates:vt,addTemplate:_t,editTemplate:Et,deleteTemplate:gt,createBlock:we})(Object(u.f)(Mn));function Fn(e){return(Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hn(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Rn(e){return(Rn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gn(e,t){return(Gn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Vn=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=Rn(t).call(this),a=!o||"object"!==Fn(o)&&"function"!=typeof o?zn(n):o,qn(zn(a),"createBlock",function(e){e.preventDefault(),kt(a.state.blockName.trim())?a.setState({blockNameError:"block name is required"}):a.props.createBlock(a.props.match.params.botid,a.state.blockName).then(function(){a.hideBlockNameInput()})}),qn(zn(a),"showBlockNameInput",function(){a.setState({showBlockNameInput:!0})}),qn(zn(a),"hideBlockNameInput",function(){a.setState({showBlockNameInput:!1,blockName:""})}),qn(zn(a),"handleOnChange",function(e){return a.setState(qn({},e.target.name,e.target.value))}),a.state={blocks:[],blockName:"",showBlockNameInput:!1},a}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gn(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidMount",value:function(){this.props.fetchBlocks(this.props.match.params.botid)}},{key:"componentDidUpdate",value:function(e,t){e.blocks!=this.props.blocks&&this.setState({blocks:this.props.blocks},function(){})}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"schedule-layout has-sidebar has-navbar"},o.a.createElement("div",{className:"blocks-schedule with-scroll",style:{zIndex:"9",backgroundColor:"#efefef",top:" 70px",paddingTop:"10px"}},o.a.createElement("button",{className:"btn btn__blue has-fa-icon",style:{width:"100%",borderRadius:"10px",height:"40px"},type:"button",onClick:this.showBlockNameInput},o.a.createElement("span",{className:"fa-icon-cover"}),!0===this.props.newBlockIsLoading?o.a.createElement(J,{width:16}):o.a.createElement(Q.a,{icon:"plus"})),o.a.createElement(Bt.Transition,{items:this.state.showBlockNameInput,from:{marginTop:-100,opacity:0,display:"none"},enter:{marginTop:0,opacity:1,display:"block"},leave:{marginTop:-100}},function(t){return t&&function(t){return o.a.createElement("div",{className:"mb-5",style:t},o.a.createElement("form",{onSubmit:e.createBlock,noValidate:!0,id:"block_name",className:"form-group",style:{minHeight:"55px"}},o.a.createElement(ie,{name:"blockName",value:e.state.blockName,onChange:e.handleOnChange,placeholder:"Block name..",required:!0,className:"border mt-3 ",feedback:e.state.blockNameError,isvalid:e.state.blockNameError?"false":"true"}),o.a.createElement("button",{type:"submit",className:"btn btn-secondary btn-sm float-right mt-1"},"Save")))}}),this.props.blocksAreLoading?o.a.createElement("div",{className:"mt-3"},o.a.createElement(J,{width:25,top:!0})):o.a.createElement(Bt.Trail,{items:this.state.blocks,keys:function(e){return e._id},from:{left:"-100%",opacity:0,position:"relative"},to:{left:"0",opacity:1}},function(t){return function(a){return o.a.createElement("div",{style:a},o.a.createElement(Pn,{block:t,botId:e.props.match.params.botId}))}})),o.a.createElement(u.b,{history:cc},o.a.createElement(u.a,{path:"/dashboard/bot/blocks/:botid/:blockid",render:function(){return o.a.createElement(Un,{key:e.props.match.params.blockid,showBlockNameInput:e.showBlockNameInput})}}))))}}])&&Hn(a.prototype,r),c&&Hn(a,c),t}(),Kn=Object(F.b)(function(e){return{templates:e.block.template.templates,blocks:e.block.blocks,blocksAreLoading:e.block.blocksAreLoading,newBlockIsLoading:e.block.newBlockIsLoading}},{fetchBlocks:Oe,createBlock:we})(Object(u.f)(Vn)),Wn=a(109),Yn=a.n(Wn);function Jn(e){return(Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qn(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Zn(e,t){return!t||"object"!==Jn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xn(e){return(Xn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $n(e,t){return($n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var eo=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Zn(this,Xn(t).call(this,e))}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$n(e,t)}(t,n["Component"]),a=t,(r=[{key:"render",value:function(){return o.a.createElement("div",{className:"card"},o.a.createElement("div",{className:"card__analysis"},o.a.createElement("p",{className:"card__analysis__title"},this.props.title),o.a.createElement(Q.a,{className:"card__analysis__icon ".concat("paid"==this.props.title?"card__anaylsis__icon--orange":""),icon:this.props.icon}),o.a.createElement("p",{className:"card__analysis__data"},this.props.data)))}}])&&Qn(a.prototype,r),c&&Qn(a,c),t}(),to=a(185),ao=a.n(to);function no(e){return(no="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oo(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ro(e,t){return!t||"object"!==no(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function co(e){return(co=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lo(e,t){return(lo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var so={},io=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ro(this,co(t).call(this,e))}var a,r,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lo(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidUpdate",value:function(e){console.log("INSIDE ",this.props.data),this.props.data&&(so.data.datasets[0].data=this.props.data,so.update())}},{key:"componentDidMount",value:function(){Yn.a.defaults.global.legend.display=!1,Yn.a.defaults.scale.gridLines.display=!1;var e=c.a.findDOMNode(this.refs.chart).getContext("2d");so=new Yn.a(e,{type:"line",data:{labels:this.props.labels,datasets:[{fill:!1,borderColor:"rgba(99,195,194)",data:this.props.data}],options:{}}})}},{key:"render",value:function(){return o.a.createElement("div",{className:"chart-block"},o.a.createElement("p",{className:"chart-block__header"},this.props.header),o.a.createElement("p",{className:"chart-block__desc"},this.props.description),o.a.createElement("canvas",{ref:"chart"}))}}])&&oo(a.prototype,r),l&&oo(a,l),t}();function uo(e){return(uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mo(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function po(e){return(po=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bo(e,t){return(bo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ho=function(e){function t(){var e,a,n,o,r,c,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,i=new Array(s),u=0;u<s;u++)i[u]=arguments[u];return n=this,a=!(o=(e=po(t)).call.apply(e,[this].concat(i)))||"object"!==uo(o)&&"function"!=typeof o?fo(n):o,r=fo(a),l={analysis:{group:[0,0,0,0,0,0,0,0,0,0,0,0],today:0,users_no:0}},(c="state")in r?Object.defineProperty(r,c,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[c]=l,a}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bo(e,t)}(t,n["Component"]),a=t,c=[{key:"getDerivedStateFromProps",value:function(e,t){return e.analysis!==t.analysis&&e.analysis?{analysis:e.analysis}:t}}],(r=[{key:"componentDidMount",value:function(){var e;this.props.dispatch((e=this.props.match.params.botid,function(t){s.a.get("".concat(i,"api/bot/analysis/get-all/").concat(e)).then(function(e){t({type:"GET_ANALYSIS",analysis:e.data})})}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"analysis"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-6"},o.a.createElement("div",{className:"card card__charts"},o.a.createElement(io,{header:"users number",description:"number of users this year",data:this.state.analysis.group,labels:["1","2","3","4","5","6","7","8","9","10","11","12"]}))),o.a.createElement("div",{className:"col-md-6"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-6"},o.a.createElement(eo,{title:"users",icon:"users",data:ao()(this.state.analysis.users_no)})),o.a.createElement("div",{className:"col-md-6"},o.a.createElement(eo,{title:"today",icon:"door-open",data:ao()(this.state.analysis.today)}))))))}}])&&mo(a.prototype,r),c&&mo(a,c),t}(),yo=Object(F.b)(function(e){return{analysis:e.bot.analysis}})(ho);function _o(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function go(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Eo(e){return(Eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vo(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Oo(e){return(Oo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function So(e,t){return(So=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ko(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var jo=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=Oo(t).call(this),a=!o||"object"!==Eo(o)&&"function"!=typeof o?wo(n):o,ko(wo(a),"_addTemplate",function(e){var t=Dt(e);a.props.addTemplate(t,a.state.botId)}),ko(wo(a),"_editTemplate",function(e){a.props.editTemplate(e,a.state.botId)}),ko(wo(a),"_deleteTemplate",function(e){a.props.removeTemplate(a.state.botId,e)}),ko(wo(a),"_createBlock",function(e,t){a.props.createBlock(a.state.botId,e,t)}),a.state={botId:e.match.params.botid},a}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&So(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidMount",value:function(){this.props.fetchBlocks(this.state.botId),this.props.fetchTemplates(this.state.botId),console.log("welcome mounter")}},{key:"render",value:function(){var e=this,t=this.props,a=t.templates,n=t.blocks,r=t.newBlockIsLoading,c=t.newTemplateIsLoading,l=t.templatesAreLoading;t.templateIsEditing;return o.a.createElement(o.a.Fragment,null,l&&o.a.createElement("div",{className:"overlayer with-navs "},o.a.createElement(J,{width:40})),o.a.createElement("div",{className:"dashboard__page "},o.a.createElement("main",{className:"dashboard__main"},o.a.createElement("h5",null,"Welcome message"),o.a.createElement("section",{className:"template-forms-container"},o.a.createElement(Bt.Transition,{items:this.props.templates,keys:function(e){return e._id},from:{opacity:0,transform:"scale(0)"},enter:{opacity:1,transform:"scale(1)"},leave:{opacity:0}},function(t){return function(a){return o.a.createElement(rn,{key:t._id,selectedTemplate:t.type,blocks:n,template:t,_deleteTemplate:e._deleteTemplate,_editTemplate:e._editTemplate,_createBlock:e._createBlock,animation:a,newBlockIsLoading:r})}})),!0===c&&o.a.createElement(J,{style:{transform:"scale(0.7)"},LoaderName:"dots"}),o.a.createElement(Ot,{templates:a,_addTemplate:this._addTemplate}))))}}])&&vo(a.prototype,r),c&&vo(a,c),t}(),To=Object(F.b)(function(e){return{choosenTemplateType:e.welcome.template.choosenTemplateType,templates:e.welcome.template.templates,blocks:e.block.blocks,newBlockIsLoading:e.block.newBlockIsLoading,newTemplateIsLoading:e.welcome.template.newTemplateIsLoading,templatesAreLoading:e.welcome.template.templatesAreLoading,templateIsEditing:e.welcome.template.templateIsEditing}},{addTemplate:function(e,t){return function(a){a({type:"ADD_TEMPLATE__WELCOME"}),s.a.post("".concat(i,"api/bot/welcome/create/").concat(t),{data:e}).then(function(e){var t=function(e){for(var t=1;t<arguments.length;t++)if(t%2){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){go(e,t,a[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}({},e.data.template);try{t.message=JSON.parse(t.message)}catch(e){}a({type:"ADD_TEMPLATE_SUCCESS__WELCOME",newTemplate:t})})}},editTemplate:function(e,t){return function(a){a({type:"EDIT_TEMPLATE__WELCOME"}),s.a.post("".concat(i,"api/bot/welcome/edit/").concat(t,"/").concat(e._id),{data:e}).then(function(t){t.data,a({type:"EDIT_TEMPLATE_SUCCESS__WELCOME",newTemplate:e})})}},removeTemplate:function(e,t){return function(a){return s.a.delete("".concat(i,"api/bot/welcome/remove/").concat(e,"/").concat(t)).then(function(e){a({type:"REMOVE_TEMPLATE__WELCOME",templateId:t})})}},chooseTemplate:function(e){return{type:"CHOOSE_TEMPLATE__WELCOME",templateTypeName:e}},resetChoosenTemplate:function(){return{type:"RESET_CHOOSEN_TEMPLATE__WELCOME"}},fetchTemplates:function(e){return function(t){t({type:"FETCH_TEMPLATES__WELCOME",templates:a});var a=[];s.a.get("".concat(i,"api/bot/welcome/get/").concat(e)).then(function(e){var n=e.data;a=(a=_o(n.templates)).map(function(e){try{e.message=JSON.parse(e.message)}catch(e){}return e}),t({type:"FETCH_TEMPLATES_SUCCESS__WELCOME",templates:a})})}},fetchBlocks:Oe,createBlock:we})(jo);function No(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,{path:"/dashboard/bot/settings/:botid",component:We}),o.a.createElement(u.a,{path:"/dashboard/bot/broadcast/:botid",component:function(){return o.a.createElement("span",null,"schssssssssedules")}}),o.a.createElement(u.a,{exact:!0,path:"/dashboard/bot/ai/:botid",component:it}),o.a.createElement(u.a,{path:"/dashboard/bot/schedules/:botid",component:On}),o.a.createElement(u.a,{path:"/dashboard/bot/analysis/:botid",component:yo}),o.a.createElement(u.a,{path:"/dashboard/bot/blocks/:botid",component:Kn}),o.a.createElement(u.a,{path:"/dashboard/bot/welcome-message/:botid",component:To}))}function Co(e){return(Co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Po(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Io(e,t){return!t||"object"!==Co(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Lo(e){return(Lo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xo(e,t){return(xo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Bo=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Io(this,Lo(t).call(this,e))}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xo(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidMount",value:function(){d()('[data-toggle="tooltip"]').tooltip()}},{key:"render",value:function(){var e=this.props.id;return o.a.createElement("section",{className:"sidebar"},o.a.createElement("div",{className:"sidebar__header"},o.a.createElement("img",{className:"sidebar__header__image",src:"https://www.stickpng.com/assets/images/580b57fcd9996e24bc43c39a.png"}),o.a.createElement("div",{className:"sidebar__header__title"})),o.a.createElement("div",{className:"sidebar__body"},o.a.createElement("ul",{className:"sidebar__body__list"},o.a.createElement("li",null," ",o.a.createElement(P.b,{className:"sidebar__body__list__nav",activeClassName:"active-link",to:"/dashboard/bot/welcome-message/"+e},o.a.createElement("i",{"data-toggle":"tooltip",title:"Home",className:"fas fa-home x "}))),o.a.createElement("li",null," ",o.a.createElement(P.b,{"data-toggle":"tooltip",title:"Schedule",className:"sidebar__body__list__nav",activeClassName:"active-link",to:"/dashboard/bot/schedules/"+e},o.a.createElement("i",{className:"fas fa-calendar-alt x "}))),o.a.createElement("li",null," ",o.a.createElement(P.b,{"data-toggle":"tooltip",title:"Blocks",className:"sidebar__body__list__nav",activeClassName:"active-link",to:"/dashboard/bot/blocks/"+e},o.a.createElement("i",{className:"fas fa-th-large x"}))),o.a.createElement("li",null," ",o.a.createElement(P.b,{"data-toggle":"tooltip",title:"settings",className:"sidebar__body__list__nav",activeClassName:"active-link",to:"/dashboard/bot/settings/"+e},o.a.createElement("i",{className:"fas fa-cog x"}))),o.a.createElement("li",null," ",o.a.createElement(P.b,{"data-toggle":"tooltip",title:"Ai",className:"sidebar__body__list__nav",activeClassName:"active-link",to:"/dashboard/bot/ai/"+e},o.a.createElement("i",{className:"fas fa-robot x"}))),o.a.createElement("li",null," ",o.a.createElement(P.b,{className:"sidebar__body__list__nav",activeClassName:"active-link",to:"/dashboard/bot/analysis/"+e},o.a.createElement("i",{"data-toggle":"tooltip",title:"Analysis",className:"fas fa-chart-bar x"}))))))}}])&&Po(a.prototype,r),c&&Po(a,c),t}(),Do=a(80),Ao=a(436);function Mo(e){for(var t=1;t<arguments.length;t++)if(t%2){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){Uo(e,t,a[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}function Uo(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Fo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pages:[],userLoader:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Mo({},e,{user_id:t.data._id,user_name:t.data.name,image_url:t.data.image_url});case"GET_PAGES":return Mo({},e,{pages:t.pages,userLoader:!1});default:return e}},Ho=a(437);function Ro(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function zo(e){for(var t=1;t<arguments.length;t++)if(t%2){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){Go(e,t,a[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}function Go(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var qo,Vo=[{locale:"default",composer_input_disabled:!1,call_to_actions:[]}],Ko=[],Wo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ais:Ko,bot:{},bots:[],botLoader:!0,connectedPage:{},persistent_menu:Vo,welcomeMessage:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_BOT":return zo({},e,{botLoader:!1,bots:[].concat(Ro(e.bots),[t.data])});case"GET_BOT":return zo({},e,{botLoader:!1,bot:t.bot});case"GET_BOTS":return console.log(t.bots,"ACTION"),zo({},e,{botLoader:!1,bots:t.bots});case"DELETE_BOT":return console.log(t),zo({},e,{bots:e.bots.filter(function(e){return e._id!=t.id})});case"RENAME_BOT":return console.log(t),zo({},e,{bots:e.bots.map(function(e){return e._id==t.data.id&&(e.name=t.data.newName),e})});case"CONNECT_PAGE":return zo({},e,{connectedPage:t.page});case"DISCONNECT_PAGE":return zo({},e,{connectedPage:null});case"SAVE_MENU":return zo({},e,{persistent_menu:t.persistent_menu});case"ADD_AI":return zo({},e,{ais:[t.ai].concat(Ro(e.ais))});case"EDIT_AI":return zo({},e,{ais:e.ais.map(function(e,a){return e._id==t.id?t.ai:e})});case"DELETE_AI":return zo({},e,{ais:e.ais.filter(function(e,a){return e._id!=t.id})});case"GET_AIS":return zo({},e,{ais:t.ais});case"GET_ANALYSIS":return zo({},e,{analysis:t.analysis});default:return e}};function Yo(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Jo(e){for(var t=1;t<arguments.length;t++)if(t%2){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){Qo(e,t,a[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}function Qo(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Zo=(Qo(qo={schedules:[],currentSchedule:{},scheduleHasLoaded:!1,schedulesAreLoading:!1,newScheduleIsLoading:!1,newScheduleHasLoaded:!0,errors:{scheduleLoadingError:!1,templatesLoadingError:!1}},"currentSchedule",{}),Qo(qo,"button",{buttons:[],currentButton:{}}),Qo(qo,"template",{templates:[],error:null,templateIsEditing:null,isLoading:null,templatesAreLoading:null}),qo);function Xo(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function $o(e){for(var t=1;t<arguments.length;t++)if(t%2){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){er(e,t,a[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}function er(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var tr={blocks:[],currentBlock:{},blockHasLoaded:!1,blocksAreLoading:!1,newBlockIsLoading:null,errors:{blockLoadingError:!1,templatesLoadingError:!1,blockEditError:!1},button:{buttons:[],currentButton:{}},template:{templates:[],error:null,templatesAreLoading:null,templateIsEditing:null,isLoading:null,hasLoaded:!1}};function ar(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function nr(e){for(var t=1;t<arguments.length;t++)if(t%2){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){or(e,t,a[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}function or(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function rr(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function cr(e){for(var t=1;t<arguments.length;t++)if(t%2){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){lr(e,t,a[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}function lr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var sr={template:{templates:[],choosenTemplateType:"",newTemplateIsLoading:null,templatesAreLoading:null,templateIsEditing:null}},ir=Object(Ho.composeWithDevTools)({}),ur=Object(Do.combineReducers)({user:Fo,bot:Wo,schedule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zo,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_SCHEDULE_TEMPLATE":return Jo({},e,{template:Jo({},e.template,{isLoading:!0})});case"ADD_SCHEDULE_TEMPLATE_SUCCESS":return Jo({},e,{template:Jo({},e.template,{isLoading:!1,templates:[].concat(Yo(e.template.templates),[t.newTemplate])})});case"DELETE_SCHEDULE_TEMPLATE":var a=e.template.templates.filter(function(e){return e._id!==t.id});return Jo({},e,{template:Jo({},e.template,{templates:Yo(a)})});case"EDIT_SCHEDULE_TEMPLATE":return Jo({},e,{template:Jo({},e.template,{templateIsEditing:!0})});case"EDIT_SCHEDULE_TEMPLATE_SUCCESS":var n=e.template.templates.map(function(e){return e._id===t.id?t.newTemplate:e});return Jo({},e,{template:Jo({},e.template,{templates:Yo(n),templateIsEditing:!1})});case"FETCH_SCHEDULE_TEMPLATES":return Jo({},e,{template:Jo({},e.template,{templatesAreLoading:!0})});case"FETCH_SCHEDULE_TEMPLATES_SUCCESS":return Jo({},e,{template:Jo({},e.template,{templatesAreLoading:!1,templates:t.templates})});case"FETCH_SCHEDULE_TEMPLATES_FAILURE":return Jo({},e,{errors:Jo({},e.errors,{templatesLoadingError:!0}),template:Jo({},e.template,{templatesAreLoading:!0})});case"FETCH_SCHEDULES":return Jo({},e,{schedulesAreLoading:!0});case"FETCH_SCHEDULES_SUCCESS":return Jo({},e,{scheduleHasLoaded:!0,schedulesAreLoading:!1,schedules:t.schedules});case"FETCH_SCHEDULE_FAILURE":return Jo({},e,{errors:Jo({},e.errors,{scheduleLoadingError:!0})});case"CREATE_SCHEDULE":return Jo({},e,{newScheduleIsLoading:!0,newScheduleHasLoaded:!1});case"CREATE_SCHEDULE_SUCCESS":var o=e.schedules;return o.unshift(t.schedule),console.log("schdule comming from action in create schedule succcesss: ",t.schedule),Jo({},e,{newScheduleIsLoading:!1,newScheduleHasLoaded:!0,schedules:Yo(o)});case"SAVE_SCHEDULE":return Jo({},e,{scheduleIsEditing:!0});case"SAVE_SCHEDULE_SUCCESS":var r=e.schedules.map(function(e){return e._id===t.newSchedule._id?t.newSchedule:e});return Jo({},e,{schedules:r,scheduleIsEditing:!1});case"SAVE_SCHEDULE_FAILURE":return Jo({},e,{errors:Jo({},e.errors,{scheduleEditError:!0})});case"DELET_SCHEDULE":var c=e.schedules.filter(function(e){return e._id!==t.scheduleId});return Jo({},e,{schedules:c});case"SET_CURRENT_SCHEDULE":return Jo({},e,{currentSchedule:t.current});default:return e}},block:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_BLOCK_TEMPLATE":return $o({},e,{template:$o({},e.template,{isLoading:!0})});case"ADD_BLOCK_TEMPLATE_SUCCESS":return $o({},e,{template:$o({},e.template,{isLoading:!1,hasLoaded:!0,templates:[].concat(Xo(e.template.templates),[t.newTemplate])})});case"DELETE_BLOCK_TEMPLATE":var a=e.template.templates.filter(function(e){return e._id!==t.id});return $o({},e,{template:$o({},e.template,{templates:Xo(a)})});case"EDIT_BLOCK_TEMPLATE":return $o({},e,{template:$o({},e.template,{templateIsEditing:!0})});case"EDIT_BLOCK_TEMPLATE_SUCCESS":var n=e.template.templates.map(function(e){return e._id===t.newTemplate._id?t.newTemplate:e});return $o({},e,{template:$o({},e.template,{templates:Xo(n),templateIsEditing:!1})});case"FETCH_BLOCK_TEMPLATES":return $o({},e,{template:$o({},e.template,{templatesAreLoading:!0})});case"FETCH_BLOCK_TEMPLATES_SUCCESS":return $o({},e,{template:$o({},e.template,{templatesAreLoading:!1,templates:t.templates})});case"FETCH_BLOCK_TEMPLATES_FAILURE":return $o({},e,{errors:$o({},e.errors,{templatesLoadingError:!0}),template:$o({},e.template,{templatesAreLoading:void 0})});case"FETCH_BLOCKS":return $o({},e,{blocksAreLoading:!0});case"FETCH_BLOCKS_SUCCESS":return $o({},e,{blockHasLoaded:!0,blocksAreLoading:!1,blocks:t.blocks});case"FETCH_BLOCK_FAILURE":return $o({},e,{errors:$o({},e.errors,{blockLoadingError:!0})});case"CREATE_BLOCK":return $o({},e,{newBlockIsLoading:!0});case"CREATE_BLOCK_SUCCESS":var o=e.blocks;return o.unshift(t.block),$o({},e,{newBlockIsLoading:!1,blocks:Xo(o)});case"SAVE_BLOCK":return $o({},e,{blockIsEditing:!0});case"SAVE_BLOCK_SUCCESS":var r=e.blocks.map(function(e){return e._id===t.newBlock._id?t.newBlock:e});return $o({},e,{blocks:r,blockIsEditing:!1});case"SAVE_BLOCK_FAILURE":return $o({},e,{errors:$o({},e.errors,{blockEditError:!0})});case"DELETE_BLOCK":var c=e.blocks.filter(function(e){return e._id!==t.blockId});return $o({},e,{blocks:c});case"SET_CURRENT_BLOCK":return $o({},e,{currentBlock:t.current});default:return e}},chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{messages:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_MESSAGE":return nr({},e,{messages:[].concat(ar(e.messages),[{text:t.message,from:t.from}])});default:return e}},welcome:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TEMPLATE__WELCOME":return cr({},e,{template:cr({},e.template,{newTemplateIsLoading:!0})});case"ADD_TEMPLATE_SUCCESS__WELCOME":return cr({},e,{template:cr({},e.template,{templates:[].concat(rr(e.template.templates),[t.newTemplate]),newTemplateIsLoading:!1})});case"EDIT_TEMPLATE__WELCOME":return cr({},e,{template:cr({},e.template,{templateIsEditing:!0})});case"EDIT_TEMPLATE_SUCCESS__WELCOME":var a=e.template.templates.map(function(e){return e._id===t.newTemplate._id?t.newTemplate:e});return cr({},e,{template:cr({},e.template,{templates:rr(a),templateIsEditing:!1})});case"REMOVE_TEMPLATE__WELCOME":var n=e.template.templates.filter(function(e){return e._id!==t.templateId});return cr({},e,{template:cr({},e.template,{templates:rr(n)})});case"FETCH_TEMPLATES__WELCOME":return cr({},e,{template:cr({},e.template,{templatesAreLoading:!0})});case"FETCH_TEMPLATES_SUCCESS__WELCOME":return cr({},e,{template:cr({},e.template,{templates:rr(t.templates),templatesAreLoading:!1})});case"CHOOSE_TEMPLATE__WELCOME":return cr({},e,{template:cr({},e.template.templates,{choosenTemplateType:t.templateTypeName})});case"RESET_CHOOSEN_TEMPLATE__WELCOME":return cr({},e,{template:cr({},e.template.templates,{choosenTemplateType:""})});default:return e}}}),mr=Object(Do.createStore)(ur,ir(Object(Do.applyMiddleware)(Ao.a))),pr=function(e,t,a){return function(a){return new Promise(function(n,o){a(function(e,t){return{type:"SAVE_MESSAGE",message:e,from:t}}(e,t)),n()})}},dr=a(438),fr=a.n(dr);function br(e){return(br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hr(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function yr(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _r(e){return(_r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Er(e,t){return(Er=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Or=function(e){function t(){var e,a,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return n=this,o=(e=_r(t)).call.apply(e,[this].concat(c)),a=!o||"object"!==br(o)&&"function"!=typeof o?gr(n):o,vr(gr(a),"state",{typing:!1,welcomeMessages:[],text:"",messages:[],visible:!1,welcome:!1,animatePopUp:!1}),vr(gr(a),"socket",fr()("",{secure:!0})),vr(gr(a),"componentDidUpdate",function(e,t){if(t.messages!==a.state.messages){if(console.log("UPDATE"),"admin"==a.state.messages[a.state.messages.length-1].from)document.getElementById("receive").play();try{d()(".chat__body")[0].scroll(0,999999)}catch(e){console.log(e)}}}),vr(gr(a),"onChange",function(e){a.setState({text:e.target.value})}),vr(gr(a),"phone",function(){setTimeout(function(){a.setState({typing:!0})},"1000"),setTimeout(function(){a.props.dispatch(pr("call me 01100720379 , thanks !","admin")),document.getElementById("receive").play(),a.setState({typing:!1})},2e3)}),vr(gr(a),"status",function(){setTimeout(function(){a.setState({typing:!0})},"1000"),setTimeout(function(){a.props.dispatch(pr("fine <3 , you","admin"),function(){document.getElementById("receive").play()}),a.setState({typing:!1})},2e3)}),vr(gr(a),"send",function(){""!=a.state.text.trim()&&(document.getElementById("send").play(),a.props.dispatch(pr(a.state.text,"user")).then(function(){try{d()(".chat__body")[0].scroll(0,999999)}catch(e){console.log(e)}}),(a.state.text.includes("number")||a.state.text.includes("phone")||a.state.text.includes("رقم")||a.state.text.includes("رقمك")||a.state.text.includes("هاتف"))&&a.phone(),(a.state.text.includes("عامل")||a.state.text.includes("how are you")||a.state.text.includes("ازيك")||a.state.text.includes("اخبارك")||a.state.text.includes("كيفك")||a.state.text.includes("احوالك"))&&a.status(),a.setState({text:""}))}),vr(gr(a),"onKeyDown",function(e){"Enter"==e.key&&""!=a.state.text.trim()?(document.getElementById("send").play(),a.props.dispatch(pr(a.state.text,"user")).then(function(){try{d()(".chat__body")[0].scroll(0,999999)}catch(e){console.log(e)}}),(a.state.text.includes("number")||a.state.text.includes("phone")||a.state.text.includes("رقم")||a.state.text.includes("رقمك")||a.state.text.includes("هاتف"))&&a.phone(),2==a.state.welcomeMessages.length&&a.state.messages.length<=1&&(a.state.text.includes("yes")||a.state.text.includes("we")||a.state.text.includes("ah")||a.state.text.includes("اه")||a.state.text.includes("ياريت"))&&a.phone(),(a.state.text.includes("عامل")||a.state.text.includes("how are you")||a.state.text.includes("ازيك")||a.state.text.includes("اخبارك")||a.state.text.includes("كيفك")||a.state.text.includes("احوالك"))&&a.status(),a.setState({text:""})):a.socket.emit("typing",{id:"admin",socketId:localStorage.getItem("this.socketId")})}),vr(gr(a),"toggle",function(){if(a.state.visible||a.setState({animatePopUp:!1}),!a.state.visible&&!a.state.welcome)var e=["Hello !, we are pandabot team","can we help you !"],t=0,n=setInterval(function(){a.setState({typing:!0});var o=document.getElementById("receive");setTimeout(function(){var r=e[t];a.setState({welcomeMessages:[].concat(hr(a.state.welcomeMessages),[r])},function(){o.play()}),a.setState({typing:!1}),a.state.welcomeMessages.length==e.length&&clearInterval(n),t++},500)},1e3);a.setState({welcome:!0}),a.setState({visible:!a.state.visible})}),a}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Er(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidMount",value:function(){var e=this;console.log("MOUNT"),this.socket.on("typing",function(t){t==localStorage.getItem("this.socketId")&&e.setState({typing:!0})}),this.socket.on("stoptyping",function(t){t==localStorage.getItem("this.socketId")&&e.setState({typing:!1})})}},{key:"render",value:function(){var e=this;return d()("#chat-message").focusout(function(){console.log("stop"),e.socket.emit("stoptyping",{id:"admin",socketId:localStorage.getItem("this.socketId")})}),o.a.createElement(o.a.Fragment,null,o.a.createElement("audio",{id:"send"},o.a.createElement("source",{src:"/audio/sendMessage.mp3",type:"audio/mpeg"})),o.a.createElement("audio",{id:"receive"},o.a.createElement("source",{src:"/audio/receive.mp3",type:"audio/mpeg"})),o.a.createElement("div",{className:"chat-container"},this.state.visible?o.a.createElement("div",{className:"chat"},o.a.createElement("div",{className:"chat__header"},o.a.createElement("div",{className:"chat__header__data"},o.a.createElement("p",{className:"chat__header__data__name"},o.a.createElement("strong",null,"Pandabot team")),o.a.createElement("small",null,"  Mohamed Salah & Mohamed Essam"),o.a.createElement("p",{className:"chat__header__data__rule"},"Developers"),o.a.createElement("div",{className:"chat__header__status"},o.a.createElement("i",{className:"fa fa-toggle-on "})))),o.a.createElement("div",{className:"chat__body"},o.a.createElement("ul",{className:"chat__body__list"},this.state.welcomeMessages.map(function(e){return o.a.createElement("li",{className:"chat__body__list__message"},o.a.createElement("img",{className:"chat__body__list__message__img",src:"https://scontent-hbe1-1.xx.fbcdn.net/v/t1.0-9/37943301_1983834905000661_749321417757032448_n.jpg?_nc_cat=107&_nc_oc=AQnWlClsi_xdogMgx1VkLl7PVWefqYxuZqC1gkdn_z34QsA6L1l5SZ2suKDb0ymXDYg&_nc_ht=scontent-hbe1-1.xx&oh=a1c38e8915d3e3e7870c797d58218d7d&oe=5DA77A8C"}),o.a.createElement("div",{className:"chat__body__list__message__text"},e))}),this.state.messages.map(function(e){return o.a.createElement("li",{className:"admin"==e.from?"chat__body__list__message":"chat__body__list__message chat__body__list__message--right"},o.a.createElement("img",{className:"chat__body__list__message__img",src:"https://scontent-hbe1-1.xx.fbcdn.net/v/t1.0-9/37943301_1983834905000661_749321417757032448_n.jpg?_nc_cat=107&_nc_oc=AQnWlClsi_xdogMgx1VkLl7PVWefqYxuZqC1gkdn_z34QsA6L1l5SZ2suKDb0ymXDYg&_nc_ht=scontent-hbe1-1.xx&oh=a1c38e8915d3e3e7870c797d58218d7d&oe=5DA77A8C"}),o.a.createElement("div",{className:"chat__body__list__message__text"},e.text))}))),o.a.createElement("div",{className:"chat__input"},this.state.typing?o.a.createElement("div",{className:"chat__body__typing"},o.a.createElement("ul",{className:"chat__body__typing__list"},o.a.createElement("li",null,"."),o.a.createElement("li",null,"."),o.a.createElement("li",null,"."))):"",o.a.createElement("input",{value:this.state.text,id:"chat-message",onChange:this.onChange,onKeyDown:this.onKeyDown,placeholder:"text now..",type:"text",className:"chat__input__text"}),o.a.createElement("div",{onClick:this.send,className:"chat__input__send"},"send",o.a.createElement("i",{className:"fa fa-arrow"})))):"",o.a.createElement("div",{onClick:this.toggle,className:" chat__header chat-pop "},this.state.visible?"":o.a.createElement("img",{className:"chat__header__img   ".concat(!this.state.welcome||this.state.animatePopUp?"chat-pop-animation":""),style:!this.state.welcome||this.state.animatePopUp?{border:"2px solid red"}:{border:"none"},src:"http://localhost:2000/assets/images/panda-bear.png"}),this.state.visible?o.a.createElement("div",{style:{width:"100%"},className:"text-center"},"Close"):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"chat__header__data"},o.a.createElement("p",{className:"chat__header__data__name"},"Pandabot "),o.a.createElement("p",{className:"chat__header__data__rule"},"Get help"),o.a.createElement("div",{className:"chat__header__status"},o.a.createElement("i",{className:"fa fa-toggle-on "})))))))}}])&&yr(a.prototype,r),c&&yr(a,c),t}();vr(Or,"getDerivedStateFromProps",function(e,t){var a;return console.log("LOL"),e.chat.messages!==t.messages&&0!=e.chat.messages.length?(t.visible||(a=!0),{animatePopUp:a,typing:!1,messages:e.chat.messages}):t});Object(F.b)(function(e){return{chat:e.chat}})(Or);function wr(e){return(wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sr(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function kr(e,t){return!t||"object"!==wr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jr(e){return(jr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tr(e,t){return(Tr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Nr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),kr(this,jr(t).apply(this,arguments))}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tr(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidMount",value:function(){var e;this.props.dispatch((e=this.props.match.params.botid,function(t){return s.a.defaults.headers.common.Authorization=localStorage.getItem("token"),s.a.get("".concat(i,"api/dashboard/")+e).then(function(e){t({type:"GET_BOT",bot:e.data.bot})})}))}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(Bo,{id:this.props.match.params.botid}),o.a.createElement("div",{style:{marginLeft:"80px",position:"fixed",zIndex:"11",width:"97%"}},o.a.createElement(oe,null)),o.a.createElement("div",{className:"schedules"!=this.props.match.params.page&&"blocks"!=this.props.match.params.page?"dashboard__content":""},o.a.createElement(No,null)))}}])&&Sr(a.prototype,r),c&&Sr(a,c),t}(),Cr=Object(F.b)()(Nr),Pr=a(439),Ir=a.n(Pr);function Lr(e){return(Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xr(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Br(e){return(Br=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ar(e,t){return(Ar=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Mr=function(e){function t(e){var a,n,o,r,c,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=Br(t).call(this,e),a=!o||"object"!==Lr(o)&&"function"!=typeof o?Dr(n):o,r=Dr(a),l=function(){var e=Ir.a.parse(a.props.location.search);console.log(e),a.props.dispatch(uc("Bearer "+e.token))},(c="componentDidMount")in r?Object.defineProperty(r,c,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[c]=l,a}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ar(e,t)}(t,n["Component"]),a=t,(r=[{key:"render",value:function(){return o.a.createElement("div",null)}}])&&xr(a.prototype,r),c&&xr(a,c),t}(),Ur=Object(F.b)()(Mr);function Fr(e){return(Fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hr(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Rr(e){return(Rr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gr(e,t){return(Gr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Vr=function(e){function t(){var e,a,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return n=this,o=(e=Rr(t)).call.apply(e,[this].concat(c)),a=!o||"object"!==Fr(o)&&"function"!=typeof o?zr(n):o,qr(zr(a),"state",{bot:{}}),qr(zr(a),"componentDidMount",function(){var e,t,a,n,o;window.fbAsyncInit=function(){FB.init({appId:"2245399952381834",cookie:!0,xfbml:!0,version:"v3.1"}),FB.AppEvents.logPageView()},e=document,t="script",a="facebook-jssdk",o=e.getElementsByTagName(t)[0],e.getElementById(a)||((n=e.createElement(t)).id=a,n.src="https://connect.facebook.net/en_US/sdk.js",o.parentNode.insertBefore(n,o))}),qr(zr(a),"login",function(){window.location=i+"api/user/auth/facebook"}),qr(zr(a),"goToDashboard",function(){a.props.history.push("/dashboard")}),qr(zr(a),"back",function(){a.props.history.goBack()}),qr(zr(a),"logout",function(){a.props.dispatch(mc())}),a}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gr(e,t)}(t,n["Component"]),a=t,c=[{key:"getDerivedStateFromProps",value:function(e,t){return e.bot!=t.bot?{bot:e.bot}:t}}],(r=[{key:"render",value:function(){var e=!!this.props.user.user_id,t=this.props.user,a=t.user_name,n=t.image_url;return o.a.createElement("div",{className:"home-navbar ".concat("home"==this.props.class?"":"home-navbar--black")},o.a.createElement("img",{className:"home-navbar__logo",src:"http://localhost/assets/images/design/panda.png"}),o.a.createElement("ul",{className:"home-navbar__list list-style-none"},o.a.createElement("li",null,o.a.createElement(P.b,{className:"home-navbar__list__item",activeClassName:"home-navbar__list__item--active",to:"/"},"Home")),o.a.createElement("li",null,o.a.createElement(P.b,{className:"home-navbar__list__item",activeClassName:"home-navbar__list__item--active",to:"/about"},"About")),o.a.createElement("li",null,o.a.createElement(P.b,{className:"home-navbar__list__item",activeClassName:"home-navbar__list__item--active",to:"/chatbot"},"chatbot")),o.a.createElement("li",null,o.a.createElement(P.b,{className:"home-navbar__list__item",activeClassName:"home-navbar__list__item--active",to:"/privacy"},"privacy")),o.a.createElement("li",null,o.a.createElement(P.b,{className:"home-navbar__list__item",activeClassName:"home-navbar__list__item--active",to:"/faq"},"FAQ"))),e?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"home-navbar__user-info    right"},o.a.createElement("img",{className:"home-navbar__user-info__img",src:n}),o.a.createElement("div",{className:"home-navbar__user-info__name"},o.a.createElement("p",null,a),o.a.createElement("small",{onClick:this.logout},"logout")))):"",o.a.createElement("ul",{className:"home-navbar__list right list-style-none"},e||o.a.createElement("li",{className:"home-navbar__list__item home-navbar__list__item--login ",onClick:this.login},"login"),e&&o.a.createElement("li",{className:"home-navbar__list__item home-navbar__list__item--login ",onClick:this.goToDashboard},"Dashboard")))}}])&&Hr(a.prototype,r),c&&Hr(a,c),t}(),Kr=Object(F.b)(function(e){return{user:e.user,bot:e.bot.bot}})(Object(u.f)(Vr));function Wr(e){var t=e.img,a=e.header,n=e.info;return o.a.createElement("div",null,o.a.createElement("div",{className:"home-services__item"},o.a.createElement("img",{className:"home-services__item__img",src:t}),o.a.createElement("p",{className:"home-services__item__header"},a),o.a.createElement("p",{className:"home-services__item__info"},n)))}function Yr(e){return(Yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jr(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qr(e,t){return!t||"object"!==Yr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zr(e){return(Zr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xr(e,t){return(Xr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Qr(this,Zr(t).apply(this,arguments))}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xr(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidMount",value:function(){0==d()(document).scrollTop()&&d()(".home-navbar").addClass("home-navbar--white"),d()(document).on("scroll",function(){console.log(d()(this).scrollTop()),0==d()(this).scrollTop()?(d()(".home-navbar__list__item").removeClass("home-navbar__list__item--black"),d()(".home-navbar").addClass("home-navbar--white")):(d()(".home-navbar__list__item").addClass("home-navbar__list__item--black"),d()(".home-navbar").removeClass("home-navbar--white"))})}},{key:"render",value:function(){return o.a.createElement("div",{className:"home"},o.a.createElement("section",{className:"home-intro"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-6"},o.a.createElement("div",{className:"home-intro__text"},o.a.createElement("p",{className:"home-intro__text__header"},"Pandabot"),o.a.createElement("p",{className:"home-intro__text__info"}," Chatbots represent a very huge opportunity for business to communicate and engage their customers through messaging apps. Have you employed a chatbot strategy today?"),o.a.createElement("div",{className:"home-intro__text__get-started"},"Get Started"))),o.a.createElement("div",{className:"col-md-6"},o.a.createElement("div",{className:"home-intro__image"},o.a.createElement("img",{src:"https://pandabotbeta.herokuapp.com/assets/images/design/image_.png"}))))),o.a.createElement("section",{className:"home-business"},o.a.createElement("p",{className:"home-business__header"},"improve your business "),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-6"},o.a.createElement("div",{className:"home-business__text"},o.a.createElement("p",null,"Users are spending more time on messaging apps like Facebook Messenger, Snapchat, WeChat, and others. Using Chatbots in messaging platforms allow brands to interact personally."),o.a.createElement("p",null,"Messaging apps will soon leverage on technologies such as chatbot to deliver smarter and better engagement with the customers. More and more businesses are adopting chatbot technology to improve their customer experience."))),o.a.createElement("div",{className:"col-md-6"},o.a.createElement("div",{className:"home-business__image"},o.a.createElement("img",{src:"https://pandabotbeta.herokuapp.com/assets/images/design/business_1.png"}))))),o.a.createElement("section",{className:"home-services"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-3"},o.a.createElement(Wr,{info:"  Use this free online SVG to\r PNG converter to convert \r SVG files to PNG images, \r quickly and easily\r ",img:"https://pandabotbeta.herokuapp.com/assets/images/design/realtime.png",header:"Realtime"})),o.a.createElement("div",{className:"col-md-3"},o.a.createElement(Wr,{info:"  Use this free online SVG to\r PNG converter to convert \r SVG files to PNG images, \r quickly and easily\r ",img:"https://pandabotbeta.herokuapp.com/assets/images/design/unlimited.png",header:"Unlimited"})),o.a.createElement("div",{className:"col-md-3"},o.a.createElement(Wr,{info:"  Use this free online SVG to\r PNG converter to convert \r SVG files to PNG images, \r quickly and easily\r ",img:"https://pandabotbeta.herokuapp.com/assets/images/design/sent-mail.png",header:"Broadcast"})),o.a.createElement("div",{className:"col-md-3"},o.a.createElement(Wr,{info:"  Use this free online SVG to\r PNG converter to convert \r SVG files to PNG images, \r quickly and easily\r ",img:"https://pandabotbeta.herokuapp.com/assets/images/design/calendar.png",header:"Scheduling"})),o.a.createElement("div",{className:"col-md-3"},o.a.createElement(Wr,{info:"  Use this free online SVG to\r PNG converter to convert \r SVG files to PNG images, \r quickly and easily\r ",img:"https://pandabotbeta.herokuapp.com/assets/images/design/diagram.png",header:"Flow"})),o.a.createElement("div",{className:"col-md-3"},o.a.createElement(Wr,{info:"  Use this free online SVG to\r PNG converter to convert \r SVG files to PNG images, \r quickly and easily\r ",img:"https://pandabotbeta.herokuapp.com/assets/images/design/presentation.png",header:"AI training"})),o.a.createElement("div",{className:"col-md-3"},o.a.createElement(Wr,{info:"  Use this free online SVG to\r PNG converter to convert \r SVG files to PNG images, \r quickly and easily\r ",img:"https://pandabotbeta.herokuapp.com/assets/images/design/support.png",header:"customer support"})),o.a.createElement("div",{className:"col-md-3"},o.a.createElement(Wr,{info:"  Use this free online SVG to\r PNG converter to convert \r SVG files to PNG images, \r quickly and easily\r ",img:"https://pandabotbeta.herokuapp.com/assets/images/design/software.png",header:"development"})))),o.a.createElement("section",{className:"subscribe"},o.a.createElement("p",{className:"subscribe__header"},"Subscribe us"),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-6"},o.a.createElement("div",{className:"subscribe__body"},o.a.createElement("div",{className:"subscribe__body__text"},"subscribe us to get latest news about pandabot platforms and many updates"),o.a.createElement("div",{className:"subscribe__body__email"},o.a.createElement("input",{className:"subscribe__body__email__input",placeholder:"email.."}),o.a.createElement("div",{className:"subscribe__body__email__inside"},"email")))),o.a.createElement("div",{className:"col-md-6"},o.a.createElement("div",{className:"subscribe__image"},o.a.createElement("img",{src:"https://pandabotbeta.herokuapp.com/assets/images/design/subscribe_.png"}))))))}}])&&Jr(a.prototype,r),c&&Jr(a,c),t}();function ec(){return o.a.createElement("div",null,o.a.createElement("div",{className:"home__content"},o.a.createElement(Kr,null),o.a.createElement(u.a,{exact:!0,path:"/",component:$r}),o.a.createElement(u.a,{path:"/about",component:function(){return"ABOUT"}}),o.a.createElement("div",{className:"footer"},"Pandabot team ©2019")))}function tc(e){return(tc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ac(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function nc(e,t){return!t||"object"!==tc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oc(e){return(oc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rc(e,t){return(rc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var cc=Object(m.a)({}),lc=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),nc(this,oc(t).apply(this,arguments))}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rc(e,t)}(t,n["Component"]),a=t,(r=[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(u.b,{history:cc},o.a.createElement(u.a,{exact:!0,path:"/auth/facebook/",component:Ur}),o.a.createElement(u.c,null,o.a.createElement(u.a,{path:"/Hello",component:function(){return"HELLO"}}),o.a.createElement(u.a,{path:"/dashboard/bot/:page/:botid",component:Cr}),o.a.createElement(u.a,{path:"/schedule",component:On}),o.a.createElement(u.a,{path:"/dashboard",component:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(oe,null),o.a.createElement(Y,null))}}),o.a.createElement(ec,null))))}}])&&ac(a.prototype,r),c&&ac(a,c),t}();s.a.defaults.proxy={host:"127.0.0.1",port:8e3};var sc=function(){return function(e){return s.a.defaults.headers.common.Authorization=localStorage.getItem("token"),s.a.get("".concat(i,"api/user/")).then(function(t){e({type:"LOGIN",data:t.data.user})})}},ic=function(){return function(e){return s.a.get("".concat(i,"api/user/pages")).then(function(t){e({type:"GET_PAGES",pages:t.data.pages})})}},uc=function(e){return function(t){return localStorage.setItem("token",e),s.a.defaults.headers.common.Authorization=localStorage.getItem("token"),s.a.get("".concat(i,"api/user/")).then(function(e){t(sc()),cc.replace("/dashboard")})}},mc=function(){return function(e){localStorage.removeItem("token"),e({type:"LOGOUT"}),window.location="/"}},pc=(a(831),a(832),a(833),a(108)),dc=a(25);var fc=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(lc,null))};pc.b.add(dc.a,dc.g,dc.m,dc.i,dc.l,dc.d,dc.b,dc.p,dc.j,dc.q,dc.k,dc.n,dc.c,dc.r,dc.f,dc.h,dc.e,dc.o),s.a.defaults.headers.common.Authorization=localStorage.getItem("token");var bc=o.a.createElement(F.a,{store:mr},o.a.createElement(fc,null)),hc=!1,yc=function(){hc||(c.a.render(bc,document.getElementById("root")),hc=!0)};c.a.render(o.a.createElement("div",null,"login...."),document.getElementById("root")),localStorage.getItem("token")?mr.dispatch(sc()).then(function(){yc(),"/"==window.location.pathname&&history.push("/dashboard/bots")}):yc()}});